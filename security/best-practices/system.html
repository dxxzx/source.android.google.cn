<!doctype html>
<html       lang="en"      dir="ltr">
  
<!-- Mirrored from source.android.google.cn/security/best-practices/system by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 15:08:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../../_pwa/androidsource/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/rebrand-app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/touchicon-180.png"><link rel="canonical" href="system.html">      
<title>System Security Best Practices &nbsp;|&nbsp; Android Open Source Project</title>

<meta property="og:title" content="System Security Best Practices &nbsp;|&nbsp; Android Open Source Project">


  <meta property="og:url" content="system.html">

  <meta property="og:locale" content="en">




    
    
    
  
    </head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        block-apix        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header keep-tabs-visible>
      









<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../setup.html"
   class="gc-analytics-event"
   title="Set up"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab >
          <a href="../../compatibility.html"
   class="gc-analytics-event"
   title="Design"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab active>
          <a href="../../security.html"
   class="gc-analytics-event"
   title="Secure"
   aria-label="Secure, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab >
          <a href="../../devices.html"
   class="gc-analytics-event"
   title="Develop"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab >
          <a href="../../devices/tech.html"
   class="gc-analytics-event"
   title="Configure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search
            enable-suggestions
              family-name="Android Open Source Project"    tenant-name="Android Open Source Project"            >
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results" method="GET">
    <div class="devsite-search-container">
      <div class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons" aria-hidden="true"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

        <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>


                  <a class="devsite-header-link devsite-top-button button gc-analytics-event"
   href="http://android-review.googlesource.com/"
   data-category="Site-Wide Custom Events"
   data-label="Site header link">
  Go to code
</a>
        
              </div>    </div>  </div>
  <div class="devsite-collapsible-section
    ">
    <div class="devsite-header-background">
                        <div class="devsite-product-id-row">
            <div class="devsite-product-description-row">
                              <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../security.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Lower Header"
              data-value="1"
          >
            Secure
      
  </a>
        </li>
  </ul>
                                        </div>
                                                                                    </div>
                                      <div class="devsite-doc-set-nav-row">
                              <devsite-tabs class="lower-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../security.html"
   class="gc-analytics-event"
   title="Overview"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Overview"
   >
  Overview
</a>

        </tab>
                        <tab >
          <a href="../bulletin.html"
   class="gc-analytics-event"
   title="Bulletins"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Bulletins"
   >
  Bulletins
</a>

        </tab>
                        <tab >
          <a href="../features.html"
   class="gc-analytics-event"
   title="Features"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Features"
   >
  Features
</a>

        </tab>
                        <tab >
          <a href="../../devices/tech/debug/fuzz-sanitize.html"
   class="gc-analytics-event"
   title="Testing"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Testing"
   >
  Testing
</a>

        </tab>
                        <tab active>
          <a href="../best-practices.html"
   class="gc-analytics-event"
   title="Best Practices"
   aria-label="Best Practices, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Best Practices"
   >
  Best Practices
</a>

        </tab>
            </div>
</devsite-tabs>

        </div>
          </div>  </div></div>
  

  </devsite-header>      <devsite-book-nav scrollbars >
                  




<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
        <span class="devsite-product-name">
        <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
      </span>
    
</div>  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../security.html"
          class="devsite-nav-title gc-analytics-event
            devsite-nav-active"
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                            <ul class="devsite-nav-responsive-tabs">
                                                                                                                      <li class="devsite-nav-item">
    <a href="../../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview">
      <span class="devsite-nav-text" >Overview</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../bulletin.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Bulletins">
      <span class="devsite-nav-text" >Bulletins</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../features.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Features">
      <span class="devsite-nav-text" >Features</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../../devices/tech/debug/fuzz-sanitize.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Testing">
      <span class="devsite-nav-text" >Testing</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../best-practices.html"
     id="devsite-nav-forward"     class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Best Practices">
      <span class="devsite-nav-text" menu="_book">Best Practices</span>
        <span class="devsite-nav-icon material-icons" data-icon="forward" aria-hidden="true"
          menu="_book">
    </span>
        </a>
  </li>

                                  </ul>
                          </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices/tech.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
          <div class="devsite-mobile-nav-bottom">
                            <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item"><a href="../best-practices.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li>
  <li class="devsite-nav-item"><a href="ops.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Operational Security">Operational Security</span></a></li>
  <li class="devsite-nav-item"><a href="system.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="System Security">System Security</span></a></li>
  <li class="devsite-nav-item"><a href="app.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="App Security">App Security</span></a></li>
  <li class="devsite-nav-item"><a href="network.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Network Security">Network Security</span></a></li>
  <li class="devsite-nav-item"><a href="hardware.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Hardware Security">Hardware Security</span></a></li>
  <li class="devsite-nav-item"><a href="privacy.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Privacy Security">Privacy Security</span></a></li>
          </ul>
                                                                                                                                                                            </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
            has-book-nav            has-toc>
          <devsite-toc class="devsite-nav"
            ></devsite-toc>
          <devsite-content>
                          

<article class="devsite-article">
  <article class="devsite-article-inner">        
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../../security.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="2"
          >
            Secure
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../best-practices.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="3"
          >
            Best Practices
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

              <h1 class="devsite-page-title">System Security Best Practices</h1>
    
    <devsite-toc class="devsite-nav" devsite-toc-embedded >
    </devsite-toc>

    <div class="devsite-article-body clearfix
      ">

              
  <!--
      Copyright 2018 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          //www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->
<p>This section contains recommendations for ensuring the security of the core
  Android operating system and devices.
</p>

<h2 id="biometric-authentication">Biometric authentication</h2>

<p>Acquire, store, and process <a href="../biometric.html">biometric data</a>
   for user authentication carefully. You should:
</p>

<ul>
  <li>Mandate the primary authentication method before using any other form of
    authentication (including biometrics).</li>
  <li>Require an explicit confirmation to indicate intent when using passive
    biometric modalities, such as facial recognition, for transactions (for
    example, payments) that involve authentication-bound keys.</li>
  <li>Require the primary authentication method every 72 hours.</li>
  <li>Use a fully secure pipeline for all biometric data and handling.</li>
  <li>Never send biometric data (including raw sensor measurements and derived
    features) off-device. If possible, keep this data in a secure isolated
    environment, such as the <a href="../trusty.html">Trusted Execution
    Environment (TEE)</a> or Secure Element.</li>
</ul>

<p>Devices with biometrics should support the
  <a href="https://developer.android.google.cn/preview/features/security#fingerprint-auth"
     class="external">BiometricPrompt API</a>, which offers a common and
  consistent interface for app developers to take advantage of biometrics-based
  authentication in their apps. Only
  <a href="../biometric/index.html#strong-weak-unlocks" class="external">strong
  biometrics</a> can integrate with <code translate="no" dir="ltr">BiometricPrompt</code> and
  integrations must follow <a href="../../compatibility/cdd.html">Android Compatibility
  Definition Document</a> (CDD) guidelines.</p>

<p>For more biometric guidelines, see
<a href="../biometric.html#hal-implementation">Biometric HAL implementation
  guidelines</a>.</p>

<h2 id="selinux">SELinux</h2>

<p>SELinux provides the definition and enforcement of much of Android's
  security model. Correctly using SELinux is critical to the security of
  Android devices and can help mitigate the impact of security vulnerabilities.
  All Android devices should implement a
  <a href="../selinux/device-policy.html#granting_the_dac_override_capability">robust
    SELinux policy</a> for this reason.</p>

<ul>
  <li>Implement a least privilege policy.</li>
  <li>Avoid granting <code translate="no" dir="ltr">CAP_DAC_OVERRIDE</code>, <code translate="no" dir="ltr">CAP_SYS_ADMIN</code>,
    and <code translate="no" dir="ltr">CAP_NET_ADMIN</code> permissions.</li>
  <li>Don't log system data to the SD card.</li>
  <li>Use provided types for driver access, such as <code translate="no" dir="ltr">gpu_device</code>,
    <code translate="no" dir="ltr">audio_device</code>, etc.</li>
  <li>Use meaningful names for processes, files, and SELinux types.
    <ul>
      <li>Ensure default labels are not used and access is not granted to them.</li>
    </ul>
  </li>
  <li>Device-specific policy should account for 5–10% of the overall policy
    running on a device. Customizations in the 20%+ range almost certainly
    contain over-privileged domains and dead policy. Unnecessarily large policy
    wastes memory, wastes disk space by necessitating a larger boot image,
    and negatively affects runtime policy lookup times.
  </li>
</ul>

<h3 id="dynamic-loading-selinux-policy">Dynamic loading of SELinux policy</h3>

<p>Do not dynamically load SELinux policy on Android devices. Doing so can
  result in issues, such as:</p>

<ul>
  <li>Preventing the acceptance of critical security patches.</li>
  <li>Exposing the ability to root a device through reloading of policies.</li>
  <li>Exposing a vector for man-in-the-middle attacks against the policy
    updater.</li>
  <li>Resulting in bricked devices due to errors with policy updates.</li>
</ul>

<h2 id="backdoors">Backdoors</h2>

<p>Android apps should not have any backdoors or ways to access the system or
  data that bypass normal security mechanisms. This includes diagnostics,
  debugging, development, or warranty repair special access gated by secrets
  known to the developer. To prevent backdoors:</p>

<ul>
  <li>Scan all third-party apps using an industry-recognized app vulnerability
    scanning tool.</li>
  <li>Perform code reviews of all code with sensitive access, including
    third-party libraries.</li>
  <li>Utilize Google Play Protect by uploading apps to Google Play for
    scanning. You can upload apps for scanning without publishing to Google
    Play.</li>
  <li>Do not preload diagnostics- or repair-focused tools on release
    builds. Only install these tools on-demand to solve specific issues.
    Additionally, these tools must not operate upon or upload any
    account-specific data.</li>
</ul>

<h2 id="development-tools">Development tools</h2>

<p>Development tools, such as debugging, testing, and diagnostic tools, can
  often create unintended security gaps on your device by revealing how they
  operate and the data that they collect. To make sure that development tools
  don't make it into production builds:</p>

<ul>
  <li>Develop a blacklist of in-house debug and testing tool hashes and scan
    builds for these APKs prior to using the system image.</li>
  <li>Scan all first-party apps using an industry-recognized app vulnerability
    scanning tool.</li>
  <li>Hire a third-party app security testing firm to evaluate all critical
    on-device diagnostic apps before any major update, especially if the app is
    developed by a third party.</li>
  <li>Ensure that only the user can enable the tool, either verbally or over
    chat, during a support session. Store artifacts of consent and disable the
    tool after collecting the necessary diagnostic information.</li>
  <li>Store this tool's record of use in a log accessible by the user in their
    carrier account.</li>
  <li>Ensure that any personally identifiable information (PII) or device
    telemetry data collected by the tool is subject to anonymization, retention
    and deletion practices relevant to the country. Only data relevant for the
    support call should be collected. This data should be deleted after each
    call.</li>
  <li>Ensure that techniques that can be used for spyware, such as keystroke
    logging, microphone usage, or camera usage, are not used without explicit
    user consent. Apps utilizing these potentially privacy-invasive methods
    should be very clearly disclosed along with a privacy policy that the user
    must consent to. Apps like this should not be enabled without explicit
    consent by the user.</li>
</ul>

<p>Here are some additional suggestions to refer to when implementing
  disclosure and consent:</p>

<h3 id="in-app-disclosure">In-app disclosure</h3>

<ul>
  <li>Display the normal usage of the app directly in-app. Do not require the
    user to navigate into a menu or settings.</li>
  <li>Describe the type of data being collected and explain how the data will
    be used.</li>
  <li>Ideally do not embed this information in a privacy policy or terms of
    service. Do not include it with other disclosures unrelated to personal or
    sensitive data collection.</li>
</ul>

<h3 id="request-consent">Request for consent</h3>

<ul>
  <li>Consent must be affirmative. Don't consider navigation away from the
    disclosure, including tapping away or pressing the back or home button,
    as consent.</li>
  <li>Present the consent dialog in a clear and unambiguous way.</li>
  <li>Require affirmative user action, such as tap to accept or speak a
    command, to accept.</li>
  <li>Don't collect personal or sensitive data before obtaining
    affirmative consent.</li>
  <li>Don't use auto-dismissing or expiring messages.</li>
</ul>

<h2 id="embedded-functionality-in-aosp">Embedded functionality in AOSP</h2>

<p>Embedding additional functionality in AOSP can often have unexpected
  behavior and consequences; proceed with caution.</p>

<ul>
  <li>Ensure that the user is prompted if they want to use different default
    apps (for example, search engine, web browser, launcher) and disclose
    sending data off device.</li>
  <li>Ensure that AOSP APKs are signed with the AOSP certificate.</li>
  <li>Run regression tests and keep a change-log to determine whether the AOSP
    APKs have had code added.</li>
</ul>

<h2 id="security-updates">Security updates</h2>

<p>Android devices should receive ongoing security support for at least two
  years from launch. This includes receiving regular updates that address
  known security vulnerabilities.</p>

<ul>
  <li>Work with hardware partners, such as your SoC vendors, to put
    appropriate support agreements in place for all components on your
    Android device.</li>
  <li>Ensure that security updates can be installed with minimal user
    interaction to increase the likelihood of users accepting and installing
    updates on their Android device. Implementing
    <a href="../../devices/tech/ota/ab/index-3.html">Seamless System Updates</a> or an
    equivalent security feature is strongly recommended.</li>
  <li>Ensure that you understand the cumulative requirement of the Android
    Security Patch Level (SPL) as declared in the
    <a href="../bulletin/index-2.html">Android Security Bulletin</a>. For example,
    devices that use the 2018-02-01 security patch level must include all
    issues associated with that security patch level, as well as fixes for
    all issues reported in all previous security bulletins.</li>
</ul>

<h3 id="dynamic-kernel-updates">Dynamic kernel updates</h3>

<p>Do not dynamically modify critical system components. While there is some
  research to suggest that dynamic kernel updates help protect against
  emergency threats, the assessed cost currently outweighs the benefits.
  Instead, create a robust OTA update method to quickly distribute
  vulnerability protections.</p>

<h2 id="key-management">Key management</h2>

<p>Maintain good key management policies and practices to ensure the security
  of signing keys.</p>

<ul>
  <li>Do not share signing keys with external parties.</li>
  <li>If a signing key is compromised, generate a new key and double sign all
    apps going forward.</li>
  <li>Store all keys in high-security module hardware or services requiring
    multiple factors to access.</li>
</ul>

<h2 id="system-image-signing">System image signing</h2>

<p>The signature of the system image is critical to determine device integrity.</p>

<ul>
  <li>Do not sign devices with a publicly known key.</li>
  <li>Manage device-signing keys in a manner consistent with industry-standard
    practices for handling sensitive keys, including a hardware security module
    (HSM) that provides limited, auditable access.</li>
</ul>

<h2 id="unlockable-bootloaders">Unlockable bootloaders</h2>

<p>Many Android devices support unlocking, enabling the device owner to modify
  the system partition or install a custom operating system. Common use
  cases include installing a third-party system image and performing
  systems-level development on the device. For example, to unlock the system
  image on a Google Nexus or Pixel, a user can run <code translate="no" dir="ltr">fastboot oem
  unlock</code>, which displays this message:</p>

<aside class="caution">
    <p><strong>Unlock bootloader?</strong></p>

    <p>If you unlock the bootloader, you will be able to install custom
      operating system software on this phone.</p>

    <p>A custom OS is not subject to the same testing as the original OS, and
      can cause your phone and installed apps to stop working properly.</p>

    <p>To prevent unauthorized access to your personal data, unlocking the
      bootloader will also delete all personal data from your phone (a "factory
      data reset").</p>

    <p>Press the Volume Up/Down buttons to select Yes or No. Then press the
      Power button to continue.</p>

    <p><strong>Yes:</strong> Unlock bootloader (may void warranty)</p>

    <p><strong>No</strong>: Do not unlock bootloader and restart phone.</p>
</aside>

<p>As a best practice, unlockable Android devices must securely erase all user
  data prior to being unlocked. Failure to properly delete all data on
  unlocking may allow a physically proximate attacker to gain unauthorized
  access to confidential Android user data. To prevent the disclosure of user
  data, a device that supports unlocking must implement it properly.</p>

<ul>
  <li>After the user confirms the unlocking command, the device must start an
    immediate data wipe. The <code translate="no" dir="ltr">unlocked</code> flag must not be set until
    after the secure deletion is complete.</li>
  <li>If a secure deletion can't be completed, the device must stay in a locked
    state.</li>
  <li>If supported by the underlying block device,
    <code translate="no" dir="ltr">ioctl(BLKSECDISCARD)</code>or equivalent should be used. For
    embedded MultiMediaCard (eMMC) devices, this means using a Secure Erase or
    Secure Trim command. For eMMC 4.5 and later, this means using a normal Erase
    or Trim followed by a Sanitize operation.</li>
  <li>If <code translate="no" dir="ltr">BLKSECDISCARD</code> is not supported by the underlying block
    device, <code translate="no" dir="ltr">ioctl(BLKDISCARD)</code> must be used instead. On eMMC
    devices, this is a normal Trim operation.</li>
  <li>If <code translate="no" dir="ltr">BLKDISCARD</code> is not supported, overwriting the block
    devices with all zeros is acceptable.</li>
  <li>A user must have the option to require that user data be wiped
    beofre flashing a partition. For example, Nexus devices use the
    <code translate="no" dir="ltr">fastboot oem lock</code> command to wipe user data.</li>
  <li>A device may record, via eFuses or similar mechanism, whether a device
    was unlocked and/or relocked. However, we strongly recommend that relocking
    the bootloader with subsequent factory reset should restore full device
    functionality.</li>
</ul>

<p>These requirements ensure that all data is destroyed upon the completion of
  an unlock operation. Failure to implement these protections is considered a
  <a href="../overview/updates-resources.html#severity">moderate level
    security vulnerability</a>.</p>

<p>A device that is unlocked may be subsequently relocked using the
  <code translate="no" dir="ltr">fastboot oem lock</code> command. Locking the bootloader provides the
  same protection of user data with the new custom OS as was available with the
  original device manufacturer OS (e.g. user data will be wiped if the device
  is unlocked again).</p>

<h2 id="device-pentesting">Device pentesting</h2>

<p>Devices should be reviewed by a competent pentester prior to shipment.
  Pentesting should establish that the device followed security guidance
  provided here as well as internal OEM security guidance.</p>

          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
                      
<div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../setup/community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
    <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>

  </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar                   ></devsite-snackbar>    <devsite-tooltip blocked-link></devsite-tooltip>
    <devsite-analytics>
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
        <script>
    (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/js/app_loader.js', '[7,"en",null,"../../js/devsite_app.html","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource","https://androidsource-dot-google-developers.gonglchuangl.net/",null,null,["/_pwa/androidsource/manifest.json","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"]]')
  </script>  </body>

<!-- Mirrored from source.android.google.cn/security/best-practices/system by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 15:08:22 GMT -->
</html>