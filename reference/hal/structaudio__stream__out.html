<!doctype html>
<html  lang="en">
  
<!-- Mirrored from source.android.google.cn/reference/hal/structaudio__stream__out.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Mar 2019 15:10:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
          
<title>Android Hardware Abstraction Layer: audio_stream_out Struct Reference &nbsp;|&nbsp; Android Open Source Project</title>

<meta property="og:title" content="Android Hardware Abstraction Layer: audio_stream_out Struct Reference &nbsp;|&nbsp; Android Open Source Project">

  <meta property="og:url" content="structaudio__stream__out-2.html">

  <meta property="og:locale" content="en">


  
  
  
  

        <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../../_pwa/androidsource/manifest.json">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
    <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/css/app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/touchicon-180.png"><link rel="canonical" href="structaudio__stream__out-2.html"></head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header ds-is="header" keep-tabs-visible>
      








<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs ds-is="tabs" class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../setup.html"
   class="gc-analytics-event"
   title="Set up"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab >
          <a href="../../compatibility.html"
   class="gc-analytics-event"
   title="Design"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab >
          <a href="../../security.html"
   class="gc-analytics-event"
   title="Secure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab >
          <a href="../../devices/audio.html"
   class="gc-analytics-event"
   title="Develop"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab >
          <a href="../../devices/tech/dalvik.html"
   class="gc-analytics-event"
   title="Configure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search ds-is="search"
            enable-suggestions
                  project-path="">
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results/" method="GET">
    <div class="devsite-search-container">
      <div id="searchbox" class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

                <a class="devsite-header-link devsite-top-button button gc-analytics-event"
           href="http://android-review.googlesource.com/"
           data-category="Site-Wide Custom Events"
           data-label="Site header link">
          Go to code
        </a>
                      </div>    </div>  </div>
  <div class="devsite-collapsible-section
          devsite-header-no-lower-tabs
    ">
    <div class="devsite-header-background">
                              </div>  </div></div>

  </devsite-header>      <devsite-book-nav ds-is="book-nav" scrollbars hidden>
                  

<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices/audio.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices/tech/dalvik.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
                        has-toc>
          <devsite-toc ds-is="toc" class="devsite-nav"
            ></devsite-toc>
          <devsite-content ds-is="content">
                          

<article class="devsite-article">
  <article class="devsite-article-inner">    
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item">
                    <a href="../../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

        
    <devsite-toc ds-is="toc" class="devsite-nav" devsite-toc-embedded
                 ></devsite-toc>

    <div class="devsite-article-body clearfix
              devsite-no-page-title
        ">

              
  <div id="top"><!-- do not remove this div --></div>
  <h1><div class="title">audio_stream_out Struct Reference</div></h1>

<div id="doc-content">
<div class="header">
 <div class="summary">
  <a href="#pub-attribs">
   Data Fields
  </a>
 </div>
 <div class="headertitle">
  <div class="title">
   audio_stream_out Struct Reference
  </div>
 </div>
</div>
<!--header-->
<div class="contents">
 <p>
  <code>
   #include &lt;
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
    audio.h
   </a>
   &gt;
  </code>
 </p>
 <table class="memberdecls">
  <tr class="heading">
   <td colspan="2">
    <h2 class="groupheader">
     <a name="pub-attribs">
     </a>
     Data Fields
    </h2>
   </td>
  </tr>
  <tr class="memitem:a9975d0888d3a4eecf4f0144ea954a80f">
   <td class="memItemLeft" align="right" valign="top">
    struct
    <a class="el" href="structaudio__stream.html">
     audio_stream
    </a>
    &#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#a9975d0888d3a4eecf4f0144ea954a80f">
     common
    </a>
   </td>
  </tr>
  <tr class="separator:a9975d0888d3a4eecf4f0144ea954a80f">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ab11f28f34dd16672bc42edc8a3b68b27">
   <td class="memItemLeft" align="right" valign="top">
    uint32_t(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#ab11f28f34dd16672bc42edc8a3b68b27">
     get_latency
    </a>
    )(const struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream)
   </td>
  </tr>
  <tr class="separator:ab11f28f34dd16672bc42edc8a3b68b27">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a1d042d0e04b8daee587001e808cb49ec">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#a1d042d0e04b8daee587001e808cb49ec">
     set_volume
    </a>
    )(struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream, float left, float right)
   </td>
  </tr>
  <tr class="separator:a1d042d0e04b8daee587001e808cb49ec">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:aa7f0b22a9ac7188e5e1bc8bd927634e2">
   <td class="memItemLeft" align="right" valign="top">
    ssize_t(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#aa7f0b22a9ac7188e5e1bc8bd927634e2">
     write
    </a>
    )(struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream, const void *buffer, size_t bytes)
   </td>
  </tr>
  <tr class="separator:aa7f0b22a9ac7188e5e1bc8bd927634e2">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a179e9271f35ea937ee175622cfbdc365">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#a179e9271f35ea937ee175622cfbdc365">
     get_render_position
    </a>
    )(const struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream, uint32_t *dsp_frames)
   </td>
  </tr>
  <tr class="separator:a179e9271f35ea937ee175622cfbdc365">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:abb1b360476f0d97009f5163c2a050d6a">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#abb1b360476f0d97009f5163c2a050d6a">
     get_next_write_timestamp
    </a>
    )(const struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream, int64_t *timestamp)
   </td>
  </tr>
  <tr class="separator:abb1b360476f0d97009f5163c2a050d6a">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a4eedb376c94cd1865fce1e675b9643d5">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#a4eedb376c94cd1865fce1e675b9643d5">
     set_callback
    </a>
    )(struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream,
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     stream_callback_t
    </a>
    callback, void *cookie)
   </td>
  </tr>
  <tr class="separator:a4eedb376c94cd1865fce1e675b9643d5">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a520692ffcc11af5382edc621e07a0155">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#a520692ffcc11af5382edc621e07a0155">
     pause
    </a>
    )(struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream)
   </td>
  </tr>
  <tr class="separator:a520692ffcc11af5382edc621e07a0155">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a5fa0984f41214227dae3c29145c2abc8">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#a5fa0984f41214227dae3c29145c2abc8">
     resume
    </a>
    )(struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream)
   </td>
  </tr>
  <tr class="separator:a5fa0984f41214227dae3c29145c2abc8">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:af9be8a32a2b4243373efa38e119b4b86">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#af9be8a32a2b4243373efa38e119b4b86">
     drain
    </a>
    )(struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream,
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio_drain_type_t
    </a>
    type)
   </td>
  </tr>
  <tr class="separator:af9be8a32a2b4243373efa38e119b4b86">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:aff9669ff68dfb3f7b8b017a1979d7d95">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#aff9669ff68dfb3f7b8b017a1979d7d95">
     flush
    </a>
    )(struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream)
   </td>
  </tr>
  <tr class="separator:aff9669ff68dfb3f7b8b017a1979d7d95">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ae62e118ae9d2faf424da855e13a71277">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structaudio__stream__out.html#ae62e118ae9d2faf424da855e13a71277">
     get_presentation_position
    </a>
    )(const struct
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    *stream, uint64_t *frames, struct timespec *timestamp)
   </td>
  </tr>
  <tr class="separator:ae62e118ae9d2faf424da855e13a71277">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
 </table>
 <a name="details" id="details">
 </a>
 <h2 class="groupheader">
  Detailed Description
 </h2>
 <div class="textblock">
  <p>
   <a class="el" href="structaudio__stream__out.html">
    audio_stream_out
   </a>
   is the abstraction interface for the audio output hardware.
  </p>
  <p>
   It provides information about various properties of the audio output hardware driver.
  </p>
  <p>
   Definition at line
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
    276
   </a>
   of file
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
    audio.h
   </a>
   .
  </p>
 </div>
 <h2 class="groupheader">
  Field Documentation
 </h2>
 <a class="anchor" id="a9975d0888d3a4eecf4f0144ea954a80f">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      struct
      <a class="el" href="structaudio__stream.html">
       audio_stream
      </a>
      common
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Common methods of the audio stream out. This
    <em>
     must
    </em>
    be the first member of
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    as users of this structure will cast a
    <a class="el" href="structaudio__stream.html">
     audio_stream
    </a>
    to
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    pointer in contexts where it's known the
    <a class="el" href="structaudio__stream.html">
     audio_stream
    </a>
    references an
    <a class="el" href="structaudio__stream__out.html">
     audio_stream_out
    </a>
    .
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     282
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="af9be8a32a2b4243373efa38e119b4b86">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* drain)(struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream,
      <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
       audio_drain_type_t
      </a>
      type)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Requests notification when data buffered by the driver/hardware has been played. If
    <a class="el" href="structaudio__stream__out.html#a4eedb376c94cd1865fce1e675b9643d5">
     set_callback()
    </a>
    has previously been called to enable non-blocking mode, the
    <a class="el" href="structaudio__stream__out.html#af9be8a32a2b4243373efa38e119b4b86">
     drain()
    </a>
    must not block, instead it should return quickly and completion of the drain is notified through the callback. If
    <a class="el" href="structaudio__stream__out.html#a4eedb376c94cd1865fce1e675b9643d5">
     set_callback()
    </a>
    has not been called, the
    <a class="el" href="structaudio__stream__out.html#af9be8a32a2b4243373efa38e119b4b86">
     drain()
    </a>
    must block until completion. If type==AUDIO_DRAIN_ALL, the drain completes when all previously written data has been played. If type==AUDIO_DRAIN_EARLY_NOTIFY, the drain completes shortly before all data for the current track has played to allow time for the framework to perform a gapless track switch.
   </p>
   <p>
    Drain must return immediately on stop() and
    <a class="el" href="structaudio__stream__out.html#aff9669ff68dfb3f7b8b017a1979d7d95">
     flush()
    </a>
    call
   </p>
   <p>
    Implementation of this function is mandatory for offloaded playback.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     372
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="aff9669ff68dfb3f7b8b017a1979d7d95">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* flush)(struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Notifies to the audio driver to flush the queued data. Stream must already be paused before calling
    <a class="el" href="structaudio__stream__out.html#aff9669ff68dfb3f7b8b017a1979d7d95">
     flush()
    </a>
    .
   </p>
   <p>
    Implementation of this function is mandatory for offloaded playback.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     380
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ab11f28f34dd16672bc42edc8a3b68b27">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      uint32_t(* get_latency)(const struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Return the audio hardware driver estimated latency in milliseconds.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     287
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="abb1b360476f0d97009f5163c2a050d6a">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* get_next_write_timestamp)(const struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream, int64_t *timestamp)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    get the local time at which the next write to the audio driver will be presented. The units are microseconds, where the epoch is decided by the local audio HAL.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     324
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ae62e118ae9d2faf424da855e13a71277">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* get_presentation_position)(const struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream, uint64_t *frames, struct timespec *timestamp)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Return a recent count of the number of audio frames presented to an external observer. This excludes frames which have been written but are still in the pipeline. The count is not reset to zero when output enters standby. Also returns the value of CLOCK_MONOTONIC as of this presentation count. The returned count is expected to be 'recent', but does not need to be the most recent possible value. However, the associated time should correspond to whatever count is returned. Example: assume that N+M frames have been presented, where M is a 'small' number. Then it is permissible to return N instead of N+M, and the timestamp should correspond to N rather than N+M. The terms 'recent' and 'small' are not defined. They reflect the quality of the implementation.
   </p>
   <p>
    3.0 and higher only.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     398
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a179e9271f35ea937ee175622cfbdc365">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* get_render_position)(const struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream, uint32_t *dsp_frames)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     317
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a520692ffcc11af5382edc621e07a0155">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* pause)(struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Notifies to the audio driver to stop playback however the queued buffers are retained by the hardware. Useful for implementing pause/resume. Empty implementation if not supported however should be implemented for hardware with non-trivial latency. In the pause state audio hardware could still be using power. User may consider calling suspend after a timeout.
   </p>
   <p>
    Implementation of this function is mandatory for offloaded playback.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     345
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a5fa0984f41214227dae3c29145c2abc8">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* resume)(struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Notifies to the audio driver to resume playback following a pause. Returns error if called without matching pause.
   </p>
   <p>
    Implementation of this function is mandatory for offloaded playback.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     353
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a4eedb376c94cd1865fce1e675b9643d5">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* set_callback)(struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream,
      <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
       stream_callback_t
      </a>
      callback, void *cookie)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    set the callback function for notifying completion of non-blocking write and drain. Calling this function implies that all future
    <a class="el" href="structaudio__stream__out.html#aa7f0b22a9ac7188e5e1bc8bd927634e2">
     write()
    </a>
    and
    <a class="el" href="structaudio__stream__out.html#af9be8a32a2b4243373efa38e119b4b86">
     drain()
    </a>
    must be non-blocking and use the callback to signal completion.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     333
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a1d042d0e04b8daee587001e808cb49ec">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* set_volume)(struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream, float left, float right)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Use this method in situations where audio mixing is done in the hardware. This method serves as a direct interface with hardware, allowing you to directly set the volume as apposed to via the framework. This method might produce multiple PCM outputs or hardware accelerated codecs, such as MP3 or AAC.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     296
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="aa7f0b22a9ac7188e5e1bc8bd927634e2">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      ssize_t(* write)(struct
      <a class="el" href="structaudio__stream__out.html">
       audio_stream_out
      </a>
      *stream, const void *buffer, size_t bytes)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Write audio buffer to driver. Returns number of bytes written, or a negative status_t. If at least one frame was written successfully prior to the error, it is suggested that the driver return that successful (short) byte count and then return an error in the subsequent call.
   </p>
   <p>
    If
    <a class="el" href="structaudio__stream__out.html#a4eedb376c94cd1865fce1e675b9643d5">
     set_callback()
    </a>
    has previously been called to enable non-blocking mode the
    <a class="el" href="structaudio__stream__out.html#aa7f0b22a9ac7188e5e1bc8bd927634e2">
     write()
    </a>
    is not allowed to block. It must write only the number of bytes that currently fit in the driver/hardware buffer and then return this byte count. If this is less than the requested write size the callback function must be called when more space is available in the driver/hardware buffer.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     311
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
     audio.h
    </a>
    .
   </p>
  </div>
 </div>
 <hr />
 The documentation for this struct was generated from the following file:
 <ul>
  <li>
   hardware/libhardware/include/hardware/
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/audio.h">
    audio.h
   </a>
  </li>
 </ul>
</div>
<!-- contents -->
</div>


          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer ds-is="content-footer" class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos ds-is="footer-promos" class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes ds-is="footer-linkboxes" class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility ds-is="footer-utility" class="devsite-footer">
                      <div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../setup/community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
        <form class="devsite-footer-utility-language">
      <select class="devsite-footer-utility-language-select"
              name="language"
              track-name="click"
              track-type="languageSelector">
                  <option value="en"
                  track-metadata-original-language="en"
                  track-metadata-selected-language="en"
                  track-name="changed"
                  track-type="languageSelector"
                  selected="selected">
            English
          </option>
                  <option value="zh_cn"
                  track-metadata-original-language="en"
                  track-metadata-selected-language="zh_cn"
                  track-name="changed"
                  track-type="languageSelector"
                  >
            简体中文
          </option>
              </select>
    </form>
      </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask ds-is="site-mask"></devsite-sitemask>
    <devsite-snackbar ds-is="snackbar"                       ></devsite-snackbar>    <devsite-tooltip ds-is="tooltip"
                     blocked-link></devsite-tooltip>
    <devsite-analytics ds-is="analytics">
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
    <script>
    (function(d,e,v,E,l,o,p,r,s,_,__){d['GoogleDevelopersObject']=[!0,l,o,p,r,s];
    _=e.createElement(v);_.async=1;_.src=E;__=e.getElementsByTagName(v)[0];
    __.parentNode.insertBefore(_,__);})(window, document, 'script',
      'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/js/app_loader.js',
      'en',
      'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/js/devsite_app.js',
      'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource',
      !1,
      ['/_pwa/androidsource/manifest.json',
       'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/images/video-placeholder.svg',
       'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/favicon.png','https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/lockup.svg','https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons'],
       'https://androidsource-dot-google-developers.gonglchuangl.net/')
   </script>  </body>

<!-- Mirrored from source.android.google.cn/reference/hal/structaudio__stream__out.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Mar 2019 15:10:20 GMT -->
</html>