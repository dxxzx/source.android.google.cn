<!doctype html>
<html  lang="en">
  
<!-- Mirrored from source.android.google.cn/reference/hal/structcamera__module by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Mar 2019 18:43:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
          
<title>Android Hardware Abstraction Layer: camera_module Struct Reference &nbsp;|&nbsp; Android Open Source Project</title>

<meta property="og:title" content="Android Hardware Abstraction Layer: camera_module Struct Reference &nbsp;|&nbsp; Android Open Source Project">

  <meta property="og:url" content="structcamera__module-2.html">

  <meta property="og:locale" content="en">


  
  
  
  

        <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../../_pwa/androidsource/manifest.json">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
    <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/css/app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/touchicon-180.png"><link rel="canonical" href="structcamera__module-2.html"></head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header ds-is="header" keep-tabs-visible>
      








<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs ds-is="tabs" class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../setup.html"
   class="gc-analytics-event"
   title="Set up"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab >
          <a href="../../compatibility.html"
   class="gc-analytics-event"
   title="Design"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab >
          <a href="../../security.html"
   class="gc-analytics-event"
   title="Secure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab >
          <a href="../../devices/audio.html"
   class="gc-analytics-event"
   title="Develop"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab >
          <a href="../../devices/tech/dalvik.html"
   class="gc-analytics-event"
   title="Configure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search ds-is="search"
            enable-suggestions
                  project-path="">
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results/" method="GET">
    <div class="devsite-search-container">
      <div id="searchbox" class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

                <a class="devsite-header-link devsite-top-button button gc-analytics-event"
           href="http://android-review.googlesource.com/"
           data-category="Site-Wide Custom Events"
           data-label="Site header link">
          Go to code
        </a>
                      </div>    </div>  </div>
  <div class="devsite-collapsible-section
          devsite-header-no-lower-tabs
    ">
    <div class="devsite-header-background">
                              </div>  </div></div>

  </devsite-header>      <devsite-book-nav ds-is="book-nav" scrollbars hidden>
                  

<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices/audio.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices/tech/dalvik.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
                        has-toc>
          <devsite-toc ds-is="toc" class="devsite-nav"
            ></devsite-toc>
          <devsite-content ds-is="content">
                          

<article class="devsite-article">
  <article class="devsite-article-inner">    
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item">
                    <a href="../../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

        
    <devsite-toc ds-is="toc" class="devsite-nav" devsite-toc-embedded
                 ></devsite-toc>

    <div class="devsite-article-body clearfix
              devsite-no-page-title
        ">

              
  <div id="top"><!-- do not remove this div --></div>
  <h1><div class="title">camera_module Struct Reference</div></h1>

<div id="doc-content">
<div class="header">
 <div class="summary">
  <a href="#pub-attribs">
   Data Fields
  </a>
 </div>
 <div class="headertitle">
  <div class="title">
   camera_module Struct Reference
  </div>
 </div>
</div>
<!--header-->
<div class="contents">
 <p>
  <code>
   #include &lt;
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
    camera_common.h
   </a>
   &gt;
  </code>
 </p>
 <table class="memberdecls">
  <tr class="heading">
   <td colspan="2">
    <h2 class="groupheader">
     <a name="pub-attribs">
     </a>
     Data Fields
    </h2>
   </td>
  </tr>
  <tr class="memitem:aba34366e34e71c894dd7e4bd0fc5e5b7">
   <td class="memItemLeft" align="right" valign="top">
    <a class="el" href="structhw__module__t.html">
     hw_module_t
    </a>
    &#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#aba34366e34e71c894dd7e4bd0fc5e5b7">
     common
    </a>
   </td>
  </tr>
  <tr class="separator:aba34366e34e71c894dd7e4bd0fc5e5b7">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ae38f19d1d4394933042690e8e045479c">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#ae38f19d1d4394933042690e8e045479c">
     get_number_of_cameras
    </a>
    )(void)
   </td>
  </tr>
  <tr class="separator:ae38f19d1d4394933042690e8e045479c">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ac67cd8aea99fa2cea7ccf4e5f56dab3e">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#ac67cd8aea99fa2cea7ccf4e5f56dab3e">
     get_camera_info
    </a>
    )(int camera_id, struct
    <a class="el" href="structcamera__info.html">
     camera_info
    </a>
    *info)
   </td>
  </tr>
  <tr class="separator:ac67cd8aea99fa2cea7ccf4e5f56dab3e">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a62967d3f587c2e32bd9e5a898f134273">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#a62967d3f587c2e32bd9e5a898f134273">
     set_callbacks
    </a>
    )(const
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_module_callbacks_t
    </a>
    *callbacks)
   </td>
  </tr>
  <tr class="separator:a62967d3f587c2e32bd9e5a898f134273">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a6fd9f8291c1490cbb4ad499f0b6f8b2f">
   <td class="memItemLeft" align="right" valign="top">
    void(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#a6fd9f8291c1490cbb4ad499f0b6f8b2f">
     get_vendor_tag_ops
    </a>
    )(vendor_tag_ops_t *ops)
   </td>
  </tr>
  <tr class="separator:a6fd9f8291c1490cbb4ad499f0b6f8b2f">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:ab42ce817b3f40ca8038bdab60644d11d">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#ab42ce817b3f40ca8038bdab60644d11d">
     open_legacy
    </a>
    )(const struct
    <a class="el" href="structhw__module__t.html">
     hw_module_t
    </a>
    *module, const char *id, uint32_t halVersion, struct
    <a class="el" href="structhw__device__t-2.html">
     hw_device_t
    </a>
    **device)
   </td>
  </tr>
  <tr class="separator:ab42ce817b3f40ca8038bdab60644d11d">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a2ed32cb3de27c10e19245f4086b82f22">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#a2ed32cb3de27c10e19245f4086b82f22">
     set_torch_mode
    </a>
    )(const char *camera_id, bool enabled)
   </td>
  </tr>
  <tr class="separator:a2ed32cb3de27c10e19245f4086b82f22">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a4e87d7894f1922c357eafaf7c3471199">
   <td class="memItemLeft" align="right" valign="top">
    int(*&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#a4e87d7894f1922c357eafaf7c3471199">
     init
    </a>
    )()
   </td>
  </tr>
  <tr class="separator:a4e87d7894f1922c357eafaf7c3471199">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
  <tr class="memitem:a743ea6007d523a0f5007847daaae1a70">
   <td class="memItemLeft" align="right" valign="top">
    void *&#160;
   </td>
   <td class="memItemRight" valign="bottom">
    <a class="el" href="structcamera__module.html#a743ea6007d523a0f5007847daaae1a70">
     reserved
    </a>
    [5]
   </td>
  </tr>
  <tr class="separator:a743ea6007d523a0f5007847daaae1a70">
   <td class="memSeparator" colspan="2">
    &#160;
   </td>
  </tr>
 </table>
 <a name="details" id="details">
 </a>
 <h2 class="groupheader">
  Detailed Description
 </h2>
 <div class="textblock">
  <p>
   Definition at line
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
    646
   </a>
   of file
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
    camera_common.h
   </a>
   .
  </p>
 </div>
 <h2 class="groupheader">
  Field Documentation
 </h2>
 <a class="anchor" id="aba34366e34e71c894dd7e4bd0fc5e5b7">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      <a class="el" href="structhw__module__t.html">
       hw_module_t
      </a>
      common
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Common methods of the camera module. This
    <em>
     must
    </em>
    be the first member of
    <a class="el" href="structcamera__module.html">
     camera_module
    </a>
    as users of this structure will cast a
    <a class="el" href="structhw__module__t.html">
     hw_module_t
    </a>
    to
    <a class="el" href="structcamera__module.html">
     camera_module
    </a>
    pointer in contexts where it's known the
    <a class="el" href="structhw__module__t.html">
     hw_module_t
    </a>
    references a
    <a class="el" href="structcamera__module.html">
     camera_module
    </a>
    .
   </p>
   <p>
    The return values for common.methods-&gt;open for
    <a class="el" href="structcamera__module.html">
     camera_module
    </a>
    are:
   </p>
   <p>
    0: On a successful open of the camera device.
   </p>
   <p>
    -ENODEV: The camera device cannot be opened due to an internal error.
   </p>
   <p>
    -EINVAL: The input arguments are invalid, i.e. the id is invalid, and/or the module is invalid.
   </p>
   <p>
    -EBUSY: The camera device was already opened for this camera id (by using this method or open_legacy), regardless of the device HAL version it was opened as.
   </p>
   <p>
    -EUSERS: The maximal number of camera devices that can be opened concurrently were opened already, either by this method or the open_legacy method.
   </p>
   <p>
    All other return values from common.methods-&gt;open will be treated as -ENODEV.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     674
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ac67cd8aea99fa2cea7ccf4e5f56dab3e">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* get_camera_info)(int camera_id, struct
      <a class="el" href="structcamera__info.html">
       camera_info
      </a>
      *info)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    get_camera_info:
   </p>
   <p>
    Return the static camera information for a given camera device. This information may not change for a camera device.
   </p>
   <p>
    Return values:
   </p>
   <p>
    0: On a successful operation
   </p>
   <p>
    -ENODEV: The information cannot be provided due to an internal error.
   </p>
   <p>
    -EINVAL: The input arguments are invalid, i.e. the id is invalid, and/or the module is invalid.
   </p>
   <p>
    Version information (based on camera_module_t.common.module_api_version):
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_4 or higher:
   </p>
   <p>
    When a camera is disconnected, its camera id becomes invalid. Calling this this method with this invalid camera id will get -EINVAL and NULL camera static metadata (
    <a class="el" href="structcamera__info.html#a947e2649d5c48bd7647d3ed4ee79f550">
     camera_info.static_camera_characteristics
    </a>
    ).
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     727
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ae38f19d1d4394933042690e8e045479c">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* get_number_of_cameras)(void)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    get_number_of_cameras:
   </p>
   <p>
    Returns the number of camera devices accessible through the camera module. The camera devices are numbered 0 through N-1, where N is the value returned by this call. The name of the camera device for open() is simply the number converted to a string. That is, "0" for camera ID 0, "1" for camera ID 1.
   </p>
   <p>
    Version information (based on camera_module_t.common.module_api_version):
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_3 or lower:
   </p>
   <p>
    The value here must be static, and cannot change after the first call to this method.
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_4 or higher:
   </p>
   <p>
    The value here must be static, and must count only built-in cameras, which have CAMERA_FACING_BACK or CAMERA_FACING_FRONT camera facing values (
    <a class="el" href="structcamera__info.html#a0649f2bc6181d3fe471c7a9d9ab7b8a4">
     camera_info.facing
    </a>
    ). The HAL must not include the external cameras (
    <a class="el" href="structcamera__info.html#a0649f2bc6181d3fe471c7a9d9ab7b8a4">
     camera_info.facing
    </a>
    == CAMERA_FACING_EXTERNAL) into the return value of this call. Frameworks will use camera_device_status_change callback to manage number of external cameras.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     701
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a6fd9f8291c1490cbb4ad499f0b6f8b2f">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      void(* get_vendor_tag_ops)(vendor_tag_ops_t *ops)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    get_vendor_tag_ops:
   </p>
   <p>
    Get methods to query for vendor extension metadata tag information. The HAL should fill in all the vendor tag operation methods, or leave ops unchanged if no vendor tags are defined.
   </p>
   <p>
    The vendor_tag_ops structure used here is defined in: system/media/camera/include/system/vendor_tags.h
   </p>
   <p>
    Version information (based on camera_module_t.common.module_api_version):
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_1_x/2_0/2_1: Not provided by HAL module. Framework may not call this function.
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_2: Valid to be called by the framework.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     778
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a4e87d7894f1922c357eafaf7c3471199">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* init)()
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    init:
   </p>
   <p>
    This method is called by the camera service before any other methods are invoked, right after the camera HAL library has been successfully loaded. It may be left as NULL by the HAL module, if no initialization in needed.
   </p>
   <p>
    It can be used by HAL implementations to perform initialization and other one-time operations.
   </p>
   <p>
    Version information (based on camera_module_t.common.module_api_version):
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_1_x/2_0/2_1/2_2/2_3: Not provided by HAL module. Framework will not call this function.
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_4: If not NULL, will always be called by the framework once after the HAL module is loaded, before any other HAL module method is called.
   </p>
   <p>
    Return values:
   </p>
   <p>
    0: On a successful operation.
   </p>
   <p>
    -ENODEV: Initialization cannot be completed due to an internal error. The HAL must be assumed to be in a nonfunctional state.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     909
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="ab42ce817b3f40ca8038bdab60644d11d">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* open_legacy)(const struct
      <a class="el" href="structhw__module__t.html">
       hw_module_t
      </a>
      *module, const char *id, uint32_t halVersion, struct
      <a class="el" href="structhw__device__t-2.html">
       hw_device_t
      </a>
      **device)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    open_legacy:
   </p>
   <p>
    Open a specific legacy camera HAL device if multiple device HAL API versions are supported by this camera HAL module. For example, if the camera module supports both CAMERA_DEVICE_API_VERSION_1_0 and CAMERA_DEVICE_API_VERSION_3_2 device API for the same camera id, framework can call this function to open the camera device as CAMERA_DEVICE_API_VERSION_1_0 device.
   </p>
   <p>
    This is an optional method. A Camera HAL module does not need to support more than one device HAL version per device, and such modules may return -ENOSYS for all calls to this method. For all older HAL device API versions that are not supported, it may return -EOPNOTSUPP. When above cases occur, The normal open() method (common.methods-&gt;open) will be used by the framework instead.
   </p>
   <p>
    Version information (based on camera_module_t.common.module_api_version):
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_1_x/2_0/2_1/2_2: Not provided by HAL module. Framework will not call this function.
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_3: Valid to be called by the framework.
   </p>
   <p>
    Return values:
   </p>
   <p>
    0: On a successful open of the camera device.
   </p>
   <p>
    -ENOSYS This method is not supported.
   </p>
   <p>
    -EOPNOTSUPP: The requested HAL version is not supported by this method.
   </p>
   <p>
    -EINVAL: The input arguments are invalid, i.e. the id is invalid, and/or the module is invalid.
   </p>
   <p>
    -EBUSY: The camera device was already opened for this camera id (by using this method or common.methods-&gt;open method), regardless of the device HAL version it was opened as.
   </p>
   <p>
    -EUSERS: The maximal number of camera devices that can be opened concurrently were opened already, either by this method or common.methods-&gt;open method.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     824
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a743ea6007d523a0f5007847daaae1a70">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      void* reserved[5]
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     912
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a62967d3f587c2e32bd9e5a898f134273">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* set_callbacks)(const
      <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
       camera_module_callbacks_t
      </a>
      *callbacks)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    set_callbacks:
   </p>
   <p>
    Provide callback function pointers to the HAL module to inform framework of asynchronous camera module events. The framework will call this function once after initial camera HAL module load, after the
    <a class="el" href="structcamera__module.html#ae38f19d1d4394933042690e8e045479c">
     get_number_of_cameras()
    </a>
    method is called for the first time, and before any other calls to the module.
   </p>
   <p>
    Version information (based on camera_module_t.common.module_api_version):
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_1_0, CAMERA_MODULE_API_VERSION_2_0:
   </p>
   <p>
    Not provided by HAL module. Framework may not call this function.
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_1:
   </p>
   <p>
    Valid to be called by the framework.
   </p>
   <p>
    Return values:
   </p>
   <p>
    0: On a successful operation
   </p>
   <p>
    -ENODEV: The operation cannot be completed due to an internal error.
   </p>
   <p>
    -EINVAL: The input arguments are invalid, i.e. the callbacks are null
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     758
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <a class="anchor" id="a2ed32cb3de27c10e19245f4086b82f22">
 </a>
 <div class="memitem">
  <div class="memproto">
   <table class="memname">
    <tr>
     <td class="memname">
      int(* set_torch_mode)(const char *camera_id, bool enabled)
     </td>
    </tr>
   </table>
  </div>
  <div class="memdoc">
   <p>
    set_torch_mode:
   </p>
   <p>
    Turn on or off the torch mode of the flash unit associated with a given camera ID. If the operation is successful, HAL must notify the framework torch state by invoking
    <a class="el" href="structcamera__module__callbacks.html#a70479d8b007a3a6b441437a3e584b2af">
     camera_module_callbacks.torch_mode_status_change()
    </a>
    with the new state.
   </p>
   <p>
    The camera device has a higher priority accessing the flash unit. When there are any resource conflicts, such as open() is called to open a camera device, HAL module must notify the framework through
    <a class="el" href="structcamera__module__callbacks.html#a70479d8b007a3a6b441437a3e584b2af">
     camera_module_callbacks.torch_mode_status_change()
    </a>
    that the torch mode has been turned off and the torch mode state has become TORCH_MODE_STATUS_NOT_AVAILABLE. When resources to turn on torch mode become available again, HAL module must notify the framework through
    <a class="el" href="structcamera__module__callbacks.html#a70479d8b007a3a6b441437a3e584b2af">
     camera_module_callbacks.torch_mode_status_change()
    </a>
    that the torch mode state has become TORCH_MODE_STATUS_AVAILABLE_OFF for
    <a class="el" href="structcamera__module.html#a2ed32cb3de27c10e19245f4086b82f22">
     set_torch_mode()
    </a>
    to be called.
   </p>
   <p>
    When the framework calls
    <a class="el" href="structcamera__module.html#a2ed32cb3de27c10e19245f4086b82f22">
     set_torch_mode()
    </a>
    to turn on the torch mode of a flash unit, if HAL cannot keep multiple torch modes on simultaneously, HAL should turn off the torch mode that was turned on by a previous
    <a class="el" href="structcamera__module.html#a2ed32cb3de27c10e19245f4086b82f22">
     set_torch_mode()
    </a>
    call and notify the framework that the torch mode state of that flash unit has become TORCH_MODE_STATUS_AVAILABLE_OFF.
   </p>
   <p>
    Version information (based on camera_module_t.common.module_api_version):
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_1_x/2_0/2_1/2_2/2_3: Not provided by HAL module. Framework will not call this function.
   </p>
   <p>
    CAMERA_MODULE_API_VERSION_2_4: Valid to be called by the framework.
   </p>
   <p>
    Return values:
   </p>
   <p>
    0: On a successful operation.
   </p>
   <p>
    -ENOSYS: The camera device does not support this operation. It is returned if and only if android.flash.info.available is false.
   </p>
   <p>
    -EBUSY: The camera device is already in use.
   </p>
   <p>
    -EUSERS: The resources needed to turn on the torch mode are not available, typically because other camera devices are holding the resources to make using the flash unit not possible.
   </p>
   <p>
    -EINVAL: camera_id is invalid.
   </p>
   <p>
    Definition at line
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     878
    </a>
    of file
    <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
     camera_common.h
    </a>
    .
   </p>
  </div>
 </div>
 <hr />
 The documentation for this struct was generated from the following file:
 <ul>
  <li>
   hardware/libhardware/include/hardware/
   <a class="el" href="https://android.googlesource.com/platform/hardware/libhardware/+/master/include/hardware/camera_common.h">
    camera_common.h
   </a>
  </li>
 </ul>
</div>
<!-- contents -->
</div>


          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer ds-is="content-footer" class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos ds-is="footer-promos" class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes ds-is="footer-linkboxes" class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility ds-is="footer-utility" class="devsite-footer">
                      <div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../setup/community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
        <form class="devsite-footer-utility-language">
      <select class="devsite-footer-utility-language-select"
              name="language"
              track-name="click"
              track-type="languageSelector">
                  <option value="en"
                  track-metadata-original-language="en"
                  track-metadata-selected-language="en"
                  track-name="changed"
                  track-type="languageSelector"
                  selected="selected">
            English
          </option>
                  <option value="zh_cn"
                  track-metadata-original-language="en"
                  track-metadata-selected-language="zh_cn"
                  track-name="changed"
                  track-type="languageSelector"
                  >
            简体中文
          </option>
              </select>
    </form>
      </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask ds-is="site-mask"></devsite-sitemask>
    <devsite-snackbar ds-is="snackbar"                       ></devsite-snackbar>    <devsite-tooltip ds-is="tooltip"
                     blocked-link></devsite-tooltip>
    <devsite-analytics ds-is="analytics">
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
    <script>
    (function(d,e,v,E,l,o,p,r,s,_,__){d['GoogleDevelopersObject']=[!0,l,o,p,r,s];
    _=e.createElement(v);_.async=1;_.src=E;__=e.getElementsByTagName(v)[0];
    __.parentNode.insertBefore(_,__);})(window, document, 'script',
      'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/js/app_loader.js',
      'en',
      'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/js/devsite_app.js',
      'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource',
      !1,
      ['/_pwa/androidsource/manifest.json',
       'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/images/video-placeholder.svg',
       'https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/favicon.png','https://www.gstatic.com/devrel-devsite/v804714fbf31610f6bd494c83c2b0ed270c7475db2947bab1f550f430dad1ed36/androidsource/images/lockup.svg','https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons'],
       'https://androidsource-dot-google-developers.gonglchuangl.net/')
   </script>  </body>

<!-- Mirrored from source.android.google.cn/reference/hal/structcamera__module by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Mar 2019 18:43:43 GMT -->
</html>