<!doctype html>
<html       lang="en"      dir="ltr">
  
<!-- Mirrored from source.android.google.cn/devices/architecture/vndk/build-system by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:55:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../../../_pwa/androidsource/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/rebrand-app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/touchicon-180.png"><link rel="canonical" href="build-system.html">      
<title>VNDK Build System Support &nbsp;|&nbsp; Android Open Source Project</title>

<meta property="og:title" content="VNDK Build System Support &nbsp;|&nbsp; Android Open Source Project">


  <meta property="og:url" content="build-system.html">

  <meta property="og:locale" content="en">




    
    
    
  
    </head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        block-apix        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header keep-tabs-visible>
      









<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../../setup.html"
   class="gc-analytics-event"
   title="Set up"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab active>
          <a href="../../../compatibility.html"
   class="gc-analytics-event"
   title="Design"
   aria-label="Design, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab >
          <a href="../../../security.html"
   class="gc-analytics-event"
   title="Secure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab >
          <a href="../../../devices.html"
   class="gc-analytics-event"
   title="Develop"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab >
          <a href="../../tech.html"
   class="gc-analytics-event"
   title="Configure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../../../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search
            enable-suggestions
              family-name="Android Open Source Project"    tenant-name="Android Open Source Project"            >
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results" method="GET">
    <div class="devsite-search-container">
      <div class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons" aria-hidden="true"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

        <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>


                  <a class="devsite-header-link devsite-top-button button gc-analytics-event"
   href="http://android-review.googlesource.com/"
   data-category="Site-Wide Custom Events"
   data-label="Site header link">
  Go to code
</a>
        
              </div>    </div>  </div>
  <div class="devsite-collapsible-section
    ">
    <div class="devsite-header-background">
                        <div class="devsite-product-id-row">
            <div class="devsite-product-description-row">
                              <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../../compatibility.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Lower Header"
              data-value="1"
          >
            Design
      
  </a>
        </li>
  </ul>
                                        </div>
                                                                                    </div>
                                      <div class="devsite-doc-set-nav-row">
                              <devsite-tabs class="lower-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../../compatibility.html"
   class="gc-analytics-event"
   title="Overview"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Overview"
   >
  Overview
</a>

        </tab>
                        <tab active>
          <a href="../../architecture.html"
   class="gc-analytics-event"
   title="Architecture"
   aria-label="Architecture, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Architecture"
   >
  Architecture
</a>

        </tab>
                        <tab >
          <a href="../../../compatibility/overview-2.html"
   class="gc-analytics-event"
   title="Compatibility"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Compatibility"
   >
  Compatibility
</a>

        </tab>
                        <tab >
          <a href="../../tech/display.html"
   class="gc-analytics-event"
   title="Display"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Display"
   >
  Display
</a>

        </tab>
                        <tab >
          <a href="../../tech/settings.html"
   class="gc-analytics-event"
   title="Settings"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Settings"
   >
  Settings
</a>

        </tab>
                        <tab >
          <a href="../../../compatibility/tests.html"
   class="gc-analytics-event"
   title="Tests"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Tests"
   >
  Tests
</a>

        </tab>
            </div>
</devsite-tabs>

        </div>
          </div>  </div></div>
  

  </devsite-header>      <devsite-book-nav scrollbars >
                  




<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">
  <a href="../../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
        <span class="devsite-product-name">
        <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
      </span>
    
</div>  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../../../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            devsite-nav-active"
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                            <ul class="devsite-nav-responsive-tabs">
                                                                                                                      <li class="devsite-nav-item">
    <a href="../../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview">
      <span class="devsite-nav-text" >Overview</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../../architecture.html"
     id="devsite-nav-forward"     class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Architecture">
      <span class="devsite-nav-text" menu="_book">Architecture</span>
        <span class="devsite-nav-icon material-icons" data-icon="forward" aria-hidden="true"
          menu="_book">
    </span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../../../compatibility/overview-2.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Compatibility">
      <span class="devsite-nav-text" >Compatibility</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../../tech/display.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Display">
      <span class="devsite-nav-text" >Display</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../../tech/settings.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Settings">
      <span class="devsite-nav-text" >Settings</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../../../compatibility/tests.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Tests">
      <span class="devsite-nav-text" >Tests</span>
        </a>
  </li>

                                  </ul>
                          </li>
                      <li class="devsite-nav-item">
                                <a href="../../../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../../devices.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../tech.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
          <div class="devsite-mobile-nav-bottom">
                            <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item"><a href="../../architecture.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Modular System Components">Modular System Components</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../modular-system.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../modular-system/runtime.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Android Runtime">Android Runtime</span></a></li><li class="devsite-nav-item"><a href="../modular-system/conscrypt.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Conscrypt">Conscrypt</span></a></li><li class="devsite-nav-item"><a href="../modular-system/dns-resolver.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="DNS Resolver">DNS Resolver</span></a></li><li class="devsite-nav-item"><a href="../modular-system/documentsui.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="DocumentsUI">DocumentsUI</span></a></li><li class="devsite-nav-item"><a href="../modular-system/extservices.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="ExtServices">ExtServices</span></a></li><li class="devsite-nav-item"><a href="../modular-system/media.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Media">Media</span></a></li><li class="devsite-nav-item"><a href="../modular-system/metadata.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Metadata">Metadata</span></a></li><li class="devsite-nav-item"><a href="../modular-system/networking.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Networking">Networking</span></a></li><li class="devsite-nav-item"><a href="../modular-system/permissioncontroller.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="PermissionController">PermissionController</span></a></li><li class="devsite-nav-item"><a href="../modular-system/timezone.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Time Zone Data">Time Zone Data</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Hardware Abstraction Layer (HAL)">Hardware Abstraction Layer (HAL)</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../hal.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Legacy HALs">Legacy HALs</span></a></li><li class="devsite-nav-item"><a href="../hal-types.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="HAL Types">HAL Types</span></a></li><li class="devsite-nav-item"><a href="../hal/framework-testing.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Framework Testing">Framework Testing</span></a></li><li class="devsite-nav-item"><a href="../hal/dynamic-lifecycle.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Dynamic Lifecycle">Dynamic Lifecycle</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Kernel">Kernel</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../kernel.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../kernel/releases.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Stable Releases &amp; Updates">Stable Releases &amp; Updates</span></a></li><li class="devsite-nav-item"><a href="../kernel/android-common.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Android Common Kernels">Android Common Kernels</span></a></li><li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Modular Kernels">Modular Kernels</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../kernel/modular-kernels.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../kernel/loadable-kernel-modules.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Loadable Kernel Modules">Loadable Kernel Modules</span></a></li><li class="devsite-nav-item"><a href="../kernel/mounting-partitions-early.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Mounting Partitions Early">Mounting Partitions Early</span></a></li><li class="devsite-nav-item"><a href="../kernel/dto-support.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="DTO Support">DTO Support</span></a></li><li class="devsite-nav-item"><a href="../kernel/core-kernel-reqs.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Core Kernel Requirements">Core Kernel Requirements</span></a></li><li class="devsite-nav-item"><a href="../kernel/future-versions.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Future Android Versions">Future Android Versions</span></a></li></ul></devsite-expandable-nav></li><li class="devsite-nav-item"><a href="../kernel/reqs-interfaces.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Interface Requirements">Interface Requirements</span></a></li><li class="devsite-nav-item"><a href="../kernel/bpf.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Extending the kernel with eBPF">Extending the kernel with eBPF</span></a></li><li class="devsite-nav-item"><a href="../kernel/ion_abi_changes.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Ion ABI Changes">Ion ABI Changes</span></a></li><li class="devsite-nav-item"><a href="../kernel/config.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Configuration">Configuration</span></a></li><li class="devsite-nav-item"><a href="../kernel/hardening.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Kernel Hardening">Kernel Hardening</span></a></li><li class="devsite-nav-item"><a href="../kernel/squashfs.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="SquashFS">SquashFS</span></a></li><li class="devsite-nav-item"><a href="../kernel/lldb-debug.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="LLDB Debugging">LLDB Debugging</span></a></li><li class="devsite-nav-item"><a href="../kernel/network_tests.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Network Tests">Network Tests</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="HIDL (General)">HIDL (General)</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../hidl.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../hidl/interfaces.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Interfaces &amp; Packages">Interfaces &amp; Packages</span></a></li><li class="devsite-nav-item"><a href="../hidl/hashing.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Interface Hashing">Interface Hashing</span></a></li><li class="devsite-nav-item"><a href="../hidl/services.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Services &amp; Data Transfer">Services &amp; Data Transfer</span></a></li><li class="devsite-nav-item"><a href="../hidl/fmq.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Fast Message Queue">Fast Message Queue</span></a></li><li class="devsite-nav-item"><a href="../hidl/binder-ipc.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Using Binder IPC">Using Binder IPC</span></a></li><li class="devsite-nav-item"><a href="../hidl/memoryblock.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Using MemoryBlock">Using MemoryBlock</span></a></li><li class="devsite-nav-item"><a href="../hidl/network-stack.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Network Stack Configuration Tools">Network Stack Configuration Tools</span></a></li><li class="devsite-nav-item"><a href="../hidl/threading.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Threading Models">Threading Models</span></a></li><li class="devsite-nav-item"><a href="../hidl/converting.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Converting Modules">Converting Modules</span></a></li><li class="devsite-nav-item"><a href="../hidl/types.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Data Types">Data Types</span></a></li><li class="devsite-nav-item"><a href="../hidl/safe_union.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Safe Union">Safe Union</span></a></li><li class="devsite-nav-item"><a href="../hidl/versioning.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Versioning">Versioning</span></a></li><li class="devsite-nav-item"><a href="../hidl/code-style.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Code Style Guide">Code Style Guide</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="HIDL (C++)">HIDL (C++)</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../hidl-cpp.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../hidl-cpp/packages.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Packages">Packages</span></a></li><li class="devsite-nav-item"><a href="../hidl-cpp/interfaces.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Interfaces">Interfaces</span></a></li><li class="devsite-nav-item"><a href="../hidl-cpp/types.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Data Types">Data Types</span></a></li><li class="devsite-nav-item"><a href="../hidl-cpp/functions.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Functions">Functions</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="HIDL (Java)">HIDL (Java)</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../hidl-java.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../hidl-java/types.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Data Types">Data Types</span></a></li><li class="devsite-nav-item"><a href="../hidl-java/interfaces.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Interface Errors &amp; Methods">Interface Errors &amp; Methods</span></a></li><li class="devsite-nav-item"><a href="../hidl-java/constants.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Exporting Constants">Exporting Constants</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Configuration">Configuration</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../configuration.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../sysprops-apis.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="System Properties APIs">System Properties APIs</span></a></li><li class="devsite-nav-item"><a href="../config-file-schema-api.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Config File Schema API">Config File Schema API</span></a></li><li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="ConfigStore HAL">ConfigStore HAL</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../configstore.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../configstore/interface.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Creating the HAL Interface">Creating the HAL Interface</span></a></li><li class="devsite-nav-item"><a href="../configstore/service.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Implementing the Service">Implementing the Service</span></a></li><li class="devsite-nav-item"><a href="../configstore/client.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Client-Side Usage">Client-Side Usage</span></a></li><li class="devsite-nav-item"><a href="../configstore/add-class-item.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Adding Classes &amp; Items">Adding Classes &amp; Items</span></a></li></ul></devsite-expandable-nav></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item"><a href="../systemsuspend.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="SystemSuspend Service">SystemSuspend Service</span></a></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Device Tree Overlays">Device Tree Overlays</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../dto.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../dto/implement.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Implementing DTO">Implementing DTO</span></a></li><li class="devsite-nav-item"><a href="../dto/syntax.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="DTO Syntax">DTO Syntax</span></a></li><li class="devsite-nav-item"><a href="../dto/compile.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Compiling &amp; Verifying">Compiling &amp; Verifying</span></a></li><li class="devsite-nav-item"><a href="../dto/multiple.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Using Multiple DTs">Using Multiple DTs</span></a></li><li class="devsite-nav-item"><a href="../dto/partitions.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="DTB/DTBO Partition Format">DTB/DTBO Partition Format</span></a></li><li class="devsite-nav-item"><a href="../dto/optimize.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Optimizing DTO">Optimizing DTO</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Vendor NDK">Vendor NDK</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../vndk.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="enabling.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Enabling the VNDK">Enabling the VNDK</span></a></li><li class="devsite-nav-item"><a href="build-system.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="VNDK Build System Support">VNDK Build System Support</span></a></li><li class="devsite-nav-item"><a href="extensions.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="VNDK Extensions">VNDK Extensions</span></a></li><li class="devsite-nav-item"><a href="deftool.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="VNDK Definition Tool">VNDK Definition Tool</span></a></li><li class="devsite-nav-item"><a href="snapshot-design.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="VNDK Snapshot Design">VNDK Snapshot Design</span></a></li><li class="devsite-nav-item"><a href="snapshot-generate.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Generating VNDK Snapshots">Generating VNDK Snapshots</span></a></li><li class="devsite-nav-item"><a href="linker-namespace.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Linker Namespace">Linker Namespace</span></a></li><li class="devsite-nav-item"><a href="dir-rules-sepolicy.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Directories, Rules, and sepolicy">Directories, Rules, and sepolicy</span></a></li><li class="devsite-nav-item"><a href="renderscript.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Renderscript">Renderscript</span></a></li><li class="devsite-nav-item"><a href="abi-stability.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="ABI Stability">ABI Stability</span></a></li><li class="devsite-nav-item"><a href="abi-use-check.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Prebuilt ABI Usage Checker">Prebuilt ABI Usage Checker</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Vendor Interface Object">Vendor Interface Object</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../vintf.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../vintf/objects.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Manifests">Manifests</span></a></li><li class="devsite-nav-item"><a href="../vintf/comp-matrices.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Compatibility Matrices">Compatibility Matrices</span></a></li><li class="devsite-nav-item"><a href="../vintf/fcm.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="FCM Lifecycle">FCM Lifecycle</span></a></li><li class="devsite-nav-item"><a href="../vintf/dm.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="DM Development">DM Development</span></a></li><li class="devsite-nav-item"><a href="../vintf/match-rules.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Matching Rules">Matching Rules</span></a></li><li class="devsite-nav-item"><a href="../vintf/resources.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Resources">Resources</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Bootloader">Bootloader</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../../bootloader.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/boot-reason.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Boot Reason">Boot Reason</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/boot-image-header.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Boot Image Header">Boot Image Header</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/system-as-root.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Partition Layout">Partition Layout</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/partitions-images.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Partitions and Images">Partitions and Images</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/product-partitions.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Product Partitions">Product Partitions</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/odm-partitions.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="ODM Partitions">ODM Partitions</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/recovery-image.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Recovery Image">Recovery Image</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/flashing-updating.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Flashing and Updating">Flashing and Updating</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/unlock-trusty.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Unlocking and Trusty">Unlocking and Trusty</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/stable-aidl.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Stable AIDL">Stable AIDL</span></a></li><li class="devsite-nav-item"><a href="../../bootloader/fastbootd.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Fastboot in User Space">Fastboot in User Space</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item"><a href="../java-library.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Java SDK Library">Java SDK Library</span></a></li>
          </ul>
                                                                                                                                                                            </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
            has-book-nav            has-toc>
          <devsite-toc class="devsite-nav"
            ></devsite-toc>
          <devsite-content>
                          

<article class="devsite-article">
  <article class="devsite-article-inner">        
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../../../compatibility.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="2"
          >
            Design
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../../architecture.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="3"
          >
            Architecture
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

              <h1 class="devsite-page-title">VNDK Build System Support</h1>
    
    <devsite-toc class="devsite-nav" devsite-toc-embedded >
    </devsite-toc>

    <div class="devsite-article-body clearfix
      ">

              
  <!--
      Copyright 2017 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->


<p>
  In Android 8.1 and higher, the build system has built-in VNDK support. When
  VNDK support is enabled, the build system checks the dependencies between
  modules, builds a vendor-specific variant for vendor modules, and
  automatically installs those modules into designated directories.
</p>

<h2 id=vndk-build-support-example>VNDK build support example</h2>

<p>
  In this example, the <code translate="no" dir="ltr">Android.bp</code> module definition defines a
  library named <code translate="no" dir="ltr">libexample</code>. The <code translate="no" dir="ltr">vendor_available</code>
  property indicates framework modules and vendor modules may depend on
  <code translate="no" dir="ltr">libexample</code>:
</p>

<p>
  <img src="../images/treble_vndk_androidbp.png" alt="libexample vendor_available:true and vndk.enabled:true" />
</p>
<figcaption>
  <strong>Figure 1.</strong> VNDK support enabled
</figcaption>

<p>
  Both the framework executable <code translate="no" dir="ltr">/system/bin/foo</code> and the vendor
  executable <code translate="no" dir="ltr">/vendor/bin/bar</code> depend on <code translate="no" dir="ltr">libexample</code> and
  have <code translate="no" dir="ltr">libexample</code> in their <code translate="no" dir="ltr">shared_libs</code> properties.
</p>

<p>
  If <code translate="no" dir="ltr">libexample</code> is used by both framework modules and vendor
  modules, two variants of <code translate="no" dir="ltr">libexample</code> are built. The core variant
  (named after <code translate="no" dir="ltr">libexample</code>) is used by framework modules and the
  vendor variant (named after <code translate="no" dir="ltr">libexample.vendor</code>) is used by vendor
  modules. The two variants are installed into different directories:
</p>

<ul>
  <li>The core variant is installed into
  <code translate="no" dir="ltr">/system/lib[64]/libexample.so</code>.</li>
  <li>The vendor variant is installed into
  <code translate="no" dir="ltr">/system/lib[64]/vndk/libexample.so</code> because
  <code translate="no" dir="ltr">vndk.enabled</code> is <code translate="no" dir="ltr">true</code>.</li>
</ul>

<p>
  For more details, see <a href="#module-definition">Module definition</a>.
</p>

<h2 id="configuring-build-support">Configuring build support</h2>

<p>
  To enable full build system support for a product device, add
  <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code> to <code translate="no" dir="ltr">BoardConfig.mk</code>:
</p>

<pre class="prettyprint" translate="no" dir="ltr">BOARD_VNDK_VERSION := current</pre>

<p>
  This setting has a <strong>global</strong> effect: When defined in
  <code translate="no" dir="ltr">BoardConfig.mk</code>, all modules are checked. As there is no mechanism
  to blacklist or whitelist an offending module, you should clean all
  unnecessary dependencies before adding <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code>. You
  can test and compile a module by setting <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code> in
  your environment variables:
</p>

<pre class="prettyprint" translate="no" dir="ltr">$ BOARD_VNDK_VERSION=current m module_name.vendor</pre>

<p>When <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code> is enabled, several default global
  header search paths are <em>removed</em>. These include:
</p>

<ul>
 <li><code translate="no" dir="ltr">frameworks/av/include</code></li>
 <li><code translate="no" dir="ltr">frameworks/native/include</code></li>
 <li><code translate="no" dir="ltr">frameworks/native/opengl/include</code></li>
 <li><code translate="no" dir="ltr">hardware/libhardware/include</code></li>
 <li><code translate="no" dir="ltr">hardware/libhardware_legacy/include</code></li>
 <li><code translate="no" dir="ltr">hardware/ril/include</code></li>
 <li><code translate="no" dir="ltr">libnativehelper/include</code></li>
 <li><code translate="no" dir="ltr">libnativehelper/include_deprecated</code></li>
 <li><code translate="no" dir="ltr">system/core/include</code></li>
 <li><code translate="no" dir="ltr">system/media/audio/include</code></li>
</ul>

<p>
  If a module depends on the headers from these directories, you must specify
  (explicitly) the dependencies with <code translate="no" dir="ltr">header_libs</code>,
  <code translate="no" dir="ltr">static_libs</code>, and/or <code translate="no" dir="ltr">shared_libs</code>.
</p>

<h2 id="module-definition">Module definition</h2>

<p>
  To build Android with <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code>, you must revise the
  module definition in either <code translate="no" dir="ltr">Android.mk</code> or
  <code translate="no" dir="ltr">Android.bp</code>. This section describes different kinds of module
  definitions, several VNDK-related module properties, and dependency checks
  implemented in the build system.
</p>

<h3 id="vendor-modules">Vendor modules</h3>

<p>
  Vendor modules are vendor-specific executables or shared libraries that
  must be installed into a vendor partition. In <code translate="no" dir="ltr">Android.bp</code> files,
  vendor modules must set vendor or proprietary property to <code translate="no" dir="ltr">true</code>.
  In <code translate="no" dir="ltr">Android.mk</code> files, vendor modules must set
  <code translate="no" dir="ltr">LOCAL_VENDOR_MODULE</code> or <code translate="no" dir="ltr">LOCAL_PROPRIETARY_MODULE</code> to
  <code translate="no" dir="ltr">true</code>.
</p>

<p>
  If <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code> is defined, the build system disallows
  dependencies between vendor modules and framework modules and emits errors if:
</p>

<ul>
 <li>a module without <code translate="no" dir="ltr">vendor:true</code> depends on a module with
 <code translate="no" dir="ltr">vendor:true</code>, or</li>
 <li>a module with <code translate="no" dir="ltr">vendor:true</code> depends on a
 non-<code translate="no" dir="ltr">llndk_library</code> module that has neither
 <code translate="no" dir="ltr">vendor:true</code> nor <code translate="no" dir="ltr">vendor_available:true</code>.</li>
</ul>

<p>
  The dependency check applies to <code translate="no" dir="ltr">header_libs</code>,
  <code translate="no" dir="ltr">static_libs</code>, and <code translate="no" dir="ltr">shared_libs</code> in
  <code translate="no" dir="ltr">Android.bp</code>, and to <code translate="no" dir="ltr">LOCAL_HEADER_LIBRARIES</code>,
  <code translate="no" dir="ltr">LOCAL_STATIC_LIBRARIES</code> and <code translate="no" dir="ltr">LOCAL_SHARED_LIBRARIES</code> in
  <code translate="no" dir="ltr">Android.mk</code>.
</p>

<h3 id="ll-ndk">LL-NDK</h3>

<p>
  LL-NDK shared libraries are shared libraries with stable ABIs. Both framework
  and vendor modules share the same and the latest implementation. For each
  LL-NDK shared library, <code translate="no" dir="ltr">Android.bp</code> contains a
  <code translate="no" dir="ltr">llndk_library</code> module definition:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
llndk_library {
    name: "libvndksupport",
    symbol_file: "libvndksupport.map.txt",
}
</pre>

<p>
  This module definition specifies a module name and a symbol file that
  describes the symbols visible to vendor modules. For example:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
LIBVNDKSUPPORT {
  global:
    android_load_sphal_library; # vndk
    android_unload_sphal_library; # vndk
  local:
    *;
};
</pre>

<p>
  Based on the symbol file, the build system generates a stub shared library for
  vendor modules, which link with these libraries when
  <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code> is enabled. A symbol is included in the stub
  shared library only if it:
</p>

<ul>
 <li>Is not defined in the section end with <code translate="no" dir="ltr">_PRIVATE</code> or
 <code translate="no" dir="ltr">_PLATFORM</code>,</li>
 <li>Does not have <code translate="no" dir="ltr">#platform-only</code> tag, and</li>
 <li>Does not have <code translate="no" dir="ltr">#introduce*</code> tags or the tag matches with the
 target.</li>
</ul>

<aside class="note">
  <strong>Note</strong>: Vendors must not define their own LL-NDK shared
  libraries because vendor modules won't be able to find them in
  <a href="../../../setup/build/gsi.html">Generic System Image (GSI)</a>.
</aside>

<h3 id="vndk">VNDK</h3>

<p>
  In <code translate="no" dir="ltr">Android.bp</code> files, <code translate="no" dir="ltr">cc_library</code>,
  <code translate="no" dir="ltr">cc_library_static</code>, <code translate="no" dir="ltr">cc_library_shared</code>, and
  <code translate="no" dir="ltr">cc_library_headers</code> module definitions support three VNDK-related
  properties: <code translate="no" dir="ltr">vendor_available</code>, <code translate="no" dir="ltr">vndk.enabled</code>, and
  <code translate="no" dir="ltr">vndk.support_system_process</code>.
</p>

<p>
  If <code translate="no" dir="ltr">vendor_available</code> or <code translate="no" dir="ltr">vndk.enabled</code> is
  <code translate="no" dir="ltr">true</code>, two variants (<em>core</em> and <em>vendor</em>) may be
  built. The core variant should be treated as a framework module and the vendor
  variant should be treated as a vendor module. If some framework modules depend
  on this module, the core variant is built. If some vendor modules
  depend on this module, the vendor variant is built. The build system enforces
  the following dependency checks:
</p>

<ul>
 <li>The core variant is always framework-only and inaccessible to vendor
 modules.</li>
 <li>The vendor variant is always inaccessible to framework modules.</li>
 <li>All dependencies of the vendor variant, which are specified in
 <code translate="no" dir="ltr">header_libs</code>, <code translate="no" dir="ltr">static_libs</code>, and/or
 <code translate="no" dir="ltr">shared_libs</code>, must be either an <code translate="no" dir="ltr">llndk_library</code> or a
 module with <code translate="no" dir="ltr">vendor_available</code> or <code translate="no" dir="ltr">vndk.enabled</code>.</li>
 <li>If <code translate="no" dir="ltr">vendor_available</code> is <code translate="no" dir="ltr">true</code>, the vendor variant
 is accessible to all vendor modules.</li>
 <li>If <code translate="no" dir="ltr">vendor_available</code> is <code translate="no" dir="ltr">false</code>, the vendor variant
 is accessible only to other VNDK or VNDK-SP modules (i.e., modules with
 <code translate="no" dir="ltr">vendor:true</code> cannot link <code translate="no" dir="ltr">vendor_available:false</code>
 modules).</li>
</ul>

<p>
  The default installation path for <code translate="no" dir="ltr">cc_library</code> or
  <code translate="no" dir="ltr">cc_library_shared</code> is determined by the following rules:
</p>

<ul>
 <li>The core variant is installed to <code translate="no" dir="ltr">/system/lib[64]</code>.</li>
 <li>The vendor variant installation path may vary:
  <ul>
    <li>If <code translate="no" dir="ltr">vndk.enabled</code> is <code translate="no" dir="ltr">false</code>, the vendor variant
    is installed into <code translate="no" dir="ltr">/vendor/lib[64]</code>.</li>
    <li>If <code translate="no" dir="ltr">vndk.enabled</code> is <code translate="no" dir="ltr">true</code>,
    <code translate="no" dir="ltr">vndk.support_system_process</code> can be either <code translate="no" dir="ltr">true</code> or
    <code translate="no" dir="ltr">false</code>. If:
  <ul>
    <li><code translate="no" dir="ltr">false</code>, the vendor variant is installed into
    <code translate="no" dir="ltr">/system/lib[64]/vndk-${VER}</code>.</li>
    <li><code translate="no" dir="ltr">true</code>, the vendor variant is installed to
    <code translate="no" dir="ltr">/system/lib[64]/vndk-sp-${VER}</code>.</li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

<p>
  The table below summarizes how the build system handles the vendor variants:
</p>
<table>
 <tr>
  <th>vendor_available</th>
  <th style="text-align: center">vndk<br>enabled</th>
  <th style="text-align: center">vndk<br>support_same_process</th>
  <th>Vendor variant descriptions</th>
 </tr>

 <tr>
  <td rowspan="4"><code translate="no" dir="ltr">true</code></td>
  <td rowspan="2"><code translate="no" dir="ltr">false</code></td>
  <td><code translate="no" dir="ltr">false</code></td>
  <td>The vendor variants are <em>VND-ONLY</em>. Shared libraries are
  installed into <code translate="no" dir="ltr">/vendor/lib[64]</code>.</td>
 </tr>

 <tr>
  <td><code translate="no" dir="ltr">true</code></td>
  <td><em>Invalid</em> (Build error)</td>
 </tr>

 <tr>
  <td rowspan="2"><code translate="no" dir="ltr">true</code></td>
  <td><code translate="no" dir="ltr">false</code></td>
  <td>The vendor variants are <em>VNDK</em>. Shared libraries are installed
  to <code translate="no" dir="ltr">/system/lib[64]/vndk-${VER}</code>.</td>
 </tr>

 <tr>
  <td><code translate="no" dir="ltr">true</code></td>
  <td>The vendor variants are <em>VNDK-SP</em>. Shared libraries are
  installed to <code translate="no" dir="ltr">/system/lib[64]/vndk-sp-${VER}</code>.</td>
 </tr>

 <tr>
  <td rowspan="4"><p><code translate="no" dir="ltr">false</code></p></td>
  <td rowspan="2"><p><code translate="no" dir="ltr">false</code></p></td>
  <td><p><code translate="no" dir="ltr">false</code></p></td>
  <td><p>No vendor variants. This module is <em>FWK-ONLY</em>.</p></td>
 </tr>

 <tr>
  <td><code translate="no" dir="ltr">true</code></td>
  <td><em>Invalid</em> (Build error)</td>
 </tr>

 <tr>
  <td rowspan="2"><code translate="no" dir="ltr">true</code></td>
  <td><code translate="no" dir="ltr">false</code></td>
  <td>The vendor variants are <em>VNDK-Private</em>. Shared libraries are
  installed to <code translate="no" dir="ltr">/system/lib[64]/vndk-${VER}</code>.These must not be
  directly used by vendor modules.</td>
 </tr>

 <tr>
  <td><code translate="no" dir="ltr">true</code></td>
  <td>The vendor variants are <em>VNDK-SP-Private</em>. Shared libraries are
  installed to <code translate="no" dir="ltr">/system/lib[64]/vndk-sp-${VER}</code>. These must not be
  directly used by vendor modules.</td>
 </tr>
</table>

<aside class="note">
  <strong>Note</strong>: Vendors may set <code translate="no" dir="ltr">vendor_available</code> to their
  modules but must not set <code translate="no" dir="ltr">vndk.enabled</code> or
  <code translate="no" dir="ltr">vndk.support_system_process</code> because the modules won't be able
  to find them in the <a href="../../../setup/build/gsi.html">Generic System Image (GSI)</a>.
</aside>

<h3 id="vndk-extensions">VNDK extensions</h3>

<p>
  VNDK extensions are VNDK shared libraries with additional APIs. Extensions are
  installed to <code translate="no" dir="ltr">/vendor/lib[64]/vndk[-sp]</code> (without version suffix)
  and override the original VNDK shared libraries at runtime.
</p>

<h4 id="defining-vndk-extensions">Defining VNDK extensions</h4>

<p>
  In Android 9 and higher, <code translate="no" dir="ltr">Android.bp</code> natively supports VNDK
  extensions. To build a VNDK extension, define another module with a
  <code translate="no" dir="ltr">vendor:true</code> and an <code translate="no" dir="ltr">extends</code> property:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libvndk",
    vendor_available: true,
    vndk: {
        enabled: true,
    },
}

cc_library {
    name: "libvndk_ext",
    vendor: true,
    vndk: {
        enabled: true,
        extends: "libvndk",
    },
}
</pre>

<p>
  A module with <code translate="no" dir="ltr">vendor:true</code>, <code translate="no" dir="ltr">vndk.enabled:true</code>, and
  <code translate="no" dir="ltr">extends</code> properties defines the VNDK extension:</p>

<ul>
 <li>The <code translate="no" dir="ltr">extends</code> property must specify a base VNDK shared library
  name (or VNDK-SP shared library name).</li>
  <li>VNDK extensions (or VNDK-SP extensions) are named after the base module
  names from which they extend. For example, the output binary of
  <code translate="no" dir="ltr">libvndk_ext</code> is <code translate="no" dir="ltr">libvndk.so</code> instead of
  <code translate="no" dir="ltr">libvndk_ext.so</code>.</li>
  <li>VNDK extensions are installed into <code translate="no" dir="ltr">/vendor/lib[64]/vndk</code>.</li>
  <li>VNDK-SP extensions are installed into
  <code translate="no" dir="ltr">/vendor/lib[64]/vndk-sp</code>.</li>
  <li>The base shared libraries must have both <code translate="no" dir="ltr">vndk.enabled:true</code>
  and <code translate="no" dir="ltr">vendor_available:true</code>.</li>
</ul>

<p>
  A VNDK-SP extension must extend from a VNDK-SP shared library
  (<code translate="no" dir="ltr">vndk.support_system_process</code> must be equal):
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libvndk_sp",
    vendor_available: true,
    vndk: {
        enabled: true,
        support_system_process: true,
    },
}

cc_library {
    name: "libvndk_sp_ext",
    vendor: true,
    vndk: {
        enabled: true,
        extends: "libvndk_sp",
        support_system_process: true,
    },
}
</pre>

<p>
  VNDK extensions (or VNDK-SP extensions) may depend on other vendor shared
  libraries:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libvndk",
    vendor_available: true,
    vndk: {
        enabled: true,
    },
}

cc_library {
    name: "libvndk_ext",
    vendor: true,
    vndk: {
        enabled: true,
        extends: "libvndk",
    },
    shared_libs: [
        "libvendor",
    ],
}

cc_library {
    name: "libvendor",
    vendor: true,
}
</pre>

<aside class="note">
  <strong>Note:</strong> Similar to SP-HAL-Dep, VNDK-SP extensions and their
  dependencies (including vendor libraries) must be labeled as
  <code translate="no" dir="ltr">same_process_hal_file</code> in sepolicy.
</aside>

<h4 id="using-vndk-extensions">Using VNDK extensions</h4>

<p>
  If a vendor module depends on additional APIs defined by VNDK extensions, the
  module must specify the name of the VNDK extension in its
  <code translate="no" dir="ltr">shared_libs</code> property:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
// A vendor shared library example
cc_library {
    name: "libvendor",
    vendor: true,
    shared_libs: [
        "libvndk_ext",
    ],
}

// A vendor executable example
cc_binary {
    name: "vendor-example",
    vendor: true,
    shared_libs: [
        "libvndk_ext",
    ],
}
</pre>

<p>
  If a vendor module depends on VNDK extensions, those VNDK extensions are
  installed to <code translate="no" dir="ltr">/vendor/lib[64]/vndk[-sp]</code> automatically. If a module
  no longer depends on a VNDK extension, add a clean step to
  <code translate="no" dir="ltr">CleanSpec.mk</code> to remove the shared library. For example:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
$(call add-clean-step, rm -rf $(TARGET_OUT_VENDOR)/lib/libvndk.so)
</pre>

<h3 id="conditional-compilation">Conditional compilation</h3>

<p>
  This section describes how to deal with the <em>subtle differences</em> (e.g.
  adding or removing a feature from one of the variants) between the following
  three VNDK shared libraries:
</p>

<ul>
  <li>Core variant (e.g. <code translate="no" dir="ltr">/system/lib[64]/libexample.so</code>)</li>
  <li>Vendor variant (e.g.
  <code translate="no" dir="ltr">/system/lib[64]/vndk[-sp]-${VER}/libexample.so</code>)</li>
  <li>VNDK extension (e.g. <code translate="no" dir="ltr">/vendor/lib[64]/vndk[-sp]/libexample.so</code>)
  </li>
</ul>


<h4 id="conditional-cflags">Conditional compiler flags</h4>

<p>
  The Android build system defines <code translate="no" dir="ltr">__ANDROID_VNDK__</code> for vendor
  variants and VNDK extensions by default. You may guard the code
  with the C preprocessor guards:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
void all() { }

#if !defined(__ANDROID_VNDK__)
void framework_only() { }
#endif

#if defined(__ANDROID_VNDK__)
void vndk_only() { }
#endif
</pre>

<p>
  In addition to <code translate="no" dir="ltr">__ANDROID_VNDK__</code>, different <code translate="no" dir="ltr">cflags</code> or
  <code translate="no" dir="ltr">cppflags</code> may be specified in <code translate="no" dir="ltr">Android.bp</code>. The
  <code translate="no" dir="ltr">cflags</code> or <code translate="no" dir="ltr">cppflags</code> specified in
  <code translate="no" dir="ltr">target.vendor</code> is specific to the vendor variant.
</p>

<p>
  For example, the following <code translate="no" dir="ltr">Android.bp</code> defines
  <code translate="no" dir="ltr">libexample</code> and <code translate="no" dir="ltr">libexample_ext</code>:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libexample",
    srcs: ["src/example.c"],
    vendor_available: true,
    vndk: {
        enabled: true,
    },
    target: {
        vendor: {
            cflags: ["-DLIBEXAMPLE_ENABLE_VNDK=1"],
        },
    },
}

cc_library {
    name: "libexample_ext",
    srcs: ["src/example.c"],
    vendor: true,
    vndk: {
        enabled: true,
        extends: "libexample",
    },
    cflags: [
        "-DLIBEXAMPLE_ENABLE_VNDK=1",
        "-DLIBEXAMPLE_ENABLE_VNDK_EXT=1",
    ],
}
</pre>

<p>
  And this is the code listing of <code translate="no" dir="ltr">src/example.c</code>:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
void all() { }

#if !defined(LIBEXAMPLE_ENABLE_VNDK)
void framework_only() { }
#endif

#if defined(LIBEXAMPLE_ENABLE_VNDK)
void vndk() { }
#endif

#if defined(LIBEXAMPLE_ENABLE_VNDK_EXT)
void vndk_ext() { }
#endif
</pre>

<p>
  According to these two files, the build system generates shared libraries
  with following exported symbols:
</p>

<table>
 <tr>
  <th>Installation path</th>
  <th>Exported symbols</th>
 </tr>

 <tr>
  <td><code translate="no" dir="ltr">/system/lib[64]/libexample.so</code></td>
  <td><code translate="no" dir="ltr">all</code>, <code translate="no" dir="ltr">framework_only</code></td>
 </tr>

 <tr>
  <td><code translate="no" dir="ltr">/system/lib[64]/vndk-${VER}/libexample.so</code></td>
  <td><code translate="no" dir="ltr">all</code>, <code translate="no" dir="ltr">vndk</code></td>
 </tr>

 <tr>
  <td><code translate="no" dir="ltr">/vendor/lib[64]/vndk/libexample.so</code></td>
  <td><code translate="no" dir="ltr">all</code>, <code translate="no" dir="ltr">vndk</code>, <code translate="no" dir="ltr">vndk_ext</code></td>
 </tr>
</table>


<h4 id="exported-symbols">Requirements on the exported symbols</h4>

<p>
  The <a href="abi-stability.html">VNDK ABI checker</a>
  compares the ABI of <em>VNDK vendor variants</em> and
  <em>VNDK extensions</em> to the reference ABI dumps under
  <code translate="no" dir="ltr">prebuilts/abi-dumps/vndk</code>.
</p>

<ul>
  <li>Symbols exported by <em>VNDK vendor variants</em> (e.g.
  <code translate="no" dir="ltr">/system/lib[64]/vndk-${VER}/libexample.so</code>) must be identical
  to (not the supersets of) the symbols defined in ABI dumps.</li>

  <li>Symbols exported by <em>VNDK extensions</em> (e.g.
  <code translate="no" dir="ltr">/vendor/lib[64]/vndk/libexample.so</code>) must be supersets of the
  symbols defined in ABI dumps.</li>
</ul>

<p>
  If <em>VNDK vendor variants</em> or <em>VNDK extensions</em> fail to follow
  the requirements above, VNDK ABI checker emits build errors and stops the
  build.
</p>


<h4 id="excluding">Excluding source files or shared libraries from vendor variants</h4>

<p>
  To exclude source files from the vendor variant, add them to the
  <code translate="no" dir="ltr">exclude_srcs</code> property. Similarly, to ensure shared libraries are
  not linked with the vendor variant, add those libraries to the
  <code translate="no" dir="ltr">exclude_shared_libs</code> property. For example:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libexample_cond_exclude",
    srcs: ["fwk.c", "both.c"],
    shared_libs: ["libfwk_only", "libboth"],
    target: {
        vendor: {
            exclude_srcs: ["fwk.c"],
            exclude_shared_libs: ["libfwk_only"],
        },
    },
}
</pre>

<p>
  In this example, the core variant of <code translate="no" dir="ltr">libexample_cond_exclude</code>
  includes the code from <code translate="no" dir="ltr">fwk.c</code> and <code translate="no" dir="ltr">both.c</code> and depends
  on the shared libraries <code translate="no" dir="ltr">libfwk_only</code> and <code translate="no" dir="ltr">libboth</code>. The
  vendor variant of <code translate="no" dir="ltr">libexample_cond_exclude</code> includes only the code
  from <code translate="no" dir="ltr">both.c</code> because <code translate="no" dir="ltr">fwk.c</code> is excluded by the
  <code translate="no" dir="ltr">exclude_srcs</code> property. Similarly,
  <code translate="no" dir="ltr">libexample_cond_exclude</code> depends only on the shared library
  <code translate="no" dir="ltr">libboth</code> because <code translate="no" dir="ltr">libfwk_only</code> is excluded by the
  <code translate="no" dir="ltr">exclude_shared_libs</code> property.
</p>

<h4 id="export-headers-from-vndk-extension">Export headers from VNDK extensions</h4>

<p>
  A VNDK extension may add new classes or new functions to a VNDK shared
  library. It is suggested to keep those declarations in independent headers
  and avoid changing the existing headers.
</p>

<p>
  For example, a new header file
  <code translate="no" dir="ltr">include-ext/example/ext/feature_name.h</code> is created for the VNDK
  extension <code translate="no" dir="ltr">libexample_ext</code>:
</p>

<ul>
  <li>Android.bp</li>
  <li><strong>include-ext/example/ext/feature_name.h</strong></li>
  <li>include/example/example.h</li>
  <li>src/example.c</li>
  <li><strong>src/ext/feature_name.c</strong></li>
</ul>

<p>
  In the following <code translate="no" dir="ltr">Android.bp</code>, <code translate="no" dir="ltr">libexample</code> exports
  only <code translate="no" dir="ltr">include</code>, whereas <code translate="no" dir="ltr">libexample_ext</code> exports both
  <code translate="no" dir="ltr">include</code> and <code translate="no" dir="ltr">include-ext</code>. This ensures
  <code translate="no" dir="ltr">feature_name.h</code> won't be incorrectly included by the users of
  <code translate="no" dir="ltr">libexample</code>:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libexample",
    srcs: ["src/example.c"],
    export_include_dirs: ["include"],
    vendor_available: true,
    vndk: {
        enabled: true,
    },
}

cc_library {
    name: "libexample_ext",
    srcs: [
        "src/example.c",
        "src/ext/feature_name.c",
    ],
    export_include_dirs: [
        "include",
        "include-ext",
    ],
    vendor: true,
    vndk: {
        enabled: true,
        extends: "libexample",
    },
}
</pre>

<p>
  If separating extensions to independent header files is not feasible, an
  alternative is to add <code translate="no" dir="ltr">#ifdef</code> guards. However, make sure that all
  VNDK extension users add the define flags. You may define
  <code translate="no" dir="ltr">cc_defaults</code> to add define flags to <code translate="no" dir="ltr">cflags</code> and link
  shared libraries with <code translate="no" dir="ltr">shared_libs</code>.
</p>

<p>
  For example, to add a new member function <code translate="no" dir="ltr">Example2::get_b()</code> to
  the VNDK extension <code translate="no" dir="ltr">libexample2_ext</code>, you must modify the existing
  header file and add a <code translate="no" dir="ltr">#ifdef</code> guard:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
#ifndef LIBEXAMPLE2_EXAMPLE_H_
#define LIBEXAMPLE2_EXAMPLE_H_

class Example2 {
 public:
  Example2();

  void get_a();

#ifdef LIBEXAMPLE2_ENABLE_VNDK_EXT
  void get_b();
#endif

 private:
  void *impl_;
};

#endif  // LIBEXAMPLE2_EXAMPLE_H_
</pre>

<p>
  A <code translate="no" dir="ltr">cc_defaults</code> named <code translate="no" dir="ltr">libexample2_ext_defaults</code> is
  defined for the users of <code translate="no" dir="ltr">libexample2_ext</code>:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libexample2",
    srcs: ["src/example2.cpp"],
    export_include_dirs: ["include"],
    vendor_available: true,
    vndk: {
        enabled: true,
    },
}

cc_library {
    name: "libexample2_ext",
    srcs: ["src/example2.cpp"],
    export_include_dirs: ["include"],
    vendor: true,
    vndk: {
        enabled: true,
        extends: "libexample2",
    },
    cflags: [
        "-DLIBEXAMPLE2_ENABLE_VNDK_EXT=1",
    ],
}

cc_defaults {
    name: "libexample2_ext_defaults",
    shared_libs: [
        "libexample2_ext",
    ],
    cflags: [
        "-DLIBEXAMPLE2_ENABLE_VNDK_EXT=1",
    ],
}
</pre>

<p>
  The users of <code translate="no" dir="ltr">libexample2_ext</code> may simply include
  <code translate="no" dir="ltr">libexample2_ext_defaults</code> in their <code translate="no" dir="ltr">defaults</code>
  property:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_binary {
    name: "example2_user_executable",
    defaults: ["libexample2_ext_defaults"],
    vendor: true,
}
</pre>



<h3 id="product-packages">Product packages</h3>

<p>
  In the Android build system, the variable <code translate="no" dir="ltr">PRODUCT_PACKAGES</code>
  specifies the executables, shared libraries, or packages that should be
  installed into the device. The transitive dependencies of the specified
  modules are implicitly installed into the device as well.
</p>

<p>
  If <code translate="no" dir="ltr">BOARD_VNDK_VERSION</code> is enabled, modules with
  <code translate="no" dir="ltr">vendor_available</code> or <code translate="no" dir="ltr">vndk.enabled</code> get special
  treatment. If a framework module depends on a module with
  <code translate="no" dir="ltr">vendor_available</code> or <code translate="no" dir="ltr">vndk.enabled</code>, the core variant
  is included in the transitive installation set. Similarly, if a vendor module
  depends on a module with <code translate="no" dir="ltr">vendor_available</code> or
  <code translate="no" dir="ltr">vndk.enabled</code>, the vendor variant is included in the transitive
  installation set.
</p>

<p>
  When the dependencies are invisible to the build system (e.g. shared libraries
  that may be opened with <code translate="no" dir="ltr">dlopen()</code> in runtime), you should specify
  the module names in <code translate="no" dir="ltr">PRODUCT_PACKAGES</code> to install those modules
  explicitly.
</p>

<p>
  If a module has <code translate="no" dir="ltr">vendor_available</code> or <code translate="no" dir="ltr">vndk.enabled</code>,
  the module name stands for its core variant. To explicitly specify the
  vendor variant in <code translate="no" dir="ltr">PRODUCT_PACKAGES</code>, append a <code translate="no" dir="ltr">.vendor</code>
  suffix to the module name. For example:
</p>

<pre class="prettyprint" translate="no" dir="ltr">
cc_library {
    name: "libexample",
    srcs: ["example.c"],
    vendor_available: true,
}
</pre>

<p>
  In this example, <code translate="no" dir="ltr">libexample</code> stands for
  <code translate="no" dir="ltr">/system/lib[64]/libexample.so</code> and <code translate="no" dir="ltr">libexample.vendor</code>
  stands for <code translate="no" dir="ltr">/vendor/lib[64]/libexample.so</code>. To install
  <code translate="no" dir="ltr">/vendor/lib[64]/libexample.so</code>, add <code translate="no" dir="ltr">libexample.vendor</code>
  to <code translate="no" dir="ltr">PRODUCT_PACKAGES</code>:
</p>

<pre class="prettyprint" translate="no" dir="ltr">PRODUCT_PACKAGES += libexample.vendor</pre>

  
          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../../../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../../setup/build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../../setup/build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
                      
<div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../setup/community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
    <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>

  </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar                   ></devsite-snackbar>    <devsite-tooltip blocked-link></devsite-tooltip>
    <devsite-analytics>
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
        <script>
    (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/js/app_loader.js', '[7,"en",null,"../../../js/devsite_app.html","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource","https://androidsource-dot-google-developers.gonglchuangl.net/",null,null,["/_pwa/androidsource/manifest.json","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"]]')
  </script>  </body>

<!-- Mirrored from source.android.google.cn/devices/architecture/vndk/build-system by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:55:53 GMT -->
</html>