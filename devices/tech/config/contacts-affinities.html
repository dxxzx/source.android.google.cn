<!doctype html>
<html       lang="en"      dir="ltr">
  
<!-- Mirrored from source.android.google.cn/devices/tech/config/contacts-affinities by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:58:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../../../_pwa/androidsource/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/rebrand-app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/touchicon-180.png"><link rel="canonical" href="contacts-affinities.html">      
<title>Contacts Provider and Affinities Information</title>

<meta property="og:title" content="Contacts Provider and Affinities Information">


  <meta property="og:url" content="contacts-affinities.html">

  <meta property="og:locale" content="en">




    
    
    
  
    </head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        block-apix        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header keep-tabs-visible>
      









<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../../setup.html"
   class="gc-analytics-event"
   title="Set up"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab >
          <a href="../../../compatibility.html"
   class="gc-analytics-event"
   title="Design"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab >
          <a href="../../../security.html"
   class="gc-analytics-event"
   title="Secure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab >
          <a href="../../../devices.html"
   class="gc-analytics-event"
   title="Develop"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab active>
          <a href="../../tech.html"
   class="gc-analytics-event"
   title="Configure"
   aria-label="Configure, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../../../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search
            enable-suggestions
              family-name="Android Open Source Project"    tenant-name="Android Open Source Project"            >
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results" method="GET">
    <div class="devsite-search-container">
      <div class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons" aria-hidden="true"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

        <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>


                  <a class="devsite-header-link devsite-top-button button gc-analytics-event"
   href="http://android-review.googlesource.com/"
   data-category="Site-Wide Custom Events"
   data-label="Site header link">
  Go to code
</a>
        
              </div>    </div>  </div>
  <div class="devsite-collapsible-section
    ">
    <div class="devsite-header-background">
                        <div class="devsite-product-id-row">
            <div class="devsite-product-description-row">
                              <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../tech.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Lower Header"
              data-value="1"
          >
            Configure
      
  </a>
        </li>
  </ul>
                                        </div>
                                                                                    </div>
                                      <div class="devsite-doc-set-nav-row">
                              <devsite-tabs class="lower-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../tech.html"
   class="gc-analytics-event"
   title="Overview"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Overview"
   >
  Overview
</a>

        </tab>
                        <tab >
          <a href="../datausage.html"
   class="gc-analytics-event"
   title="Data"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Data"
   >
  Data
</a>

        </tab>
                        <tab >
          <a href="../admin.html"
   class="gc-analytics-event"
   title="Enterprise"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Enterprise"
   >
  Enterprise
</a>

        </tab>
                        <tab >
          <a href="../perf.html"
   class="gc-analytics-event"
   title="Performance"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Performance"
   >
  Performance
</a>

        </tab>
                        <tab active>
          <a href="../config.html"
   class="gc-analytics-event"
   title="Permissions"
   aria-label="Permissions, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Permissions"
   >
  Permissions
</a>

        </tab>
                        <tab >
          <a href="../power.html"
   class="gc-analytics-event"
   title="Power"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Power"
   >
  Power
</a>

        </tab>
                        <tab >
          <a href="../dalvik.html"
   class="gc-analytics-event"
   title="Runtime"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Runtime"
   >
  Runtime
</a>

        </tab>
                        <tab >
          <a href="../ota.html"
   class="gc-analytics-event"
   title="Updates"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Updates"
   >
  Updates
</a>

        </tab>
            </div>
</devsite-tabs>

        </div>
          </div>  </div></div>
  

  </devsite-header>      <devsite-book-nav scrollbars >
                  




<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">
  <a href="../../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
        <span class="devsite-product-name">
        <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
      </span>
    
</div>  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../../../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../../devices.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../tech.html"
          class="devsite-nav-title gc-analytics-event
            devsite-nav-active"
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                            <ul class="devsite-nav-responsive-tabs">
                                                                                                                      <li class="devsite-nav-item">
    <a href="../../tech.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview">
      <span class="devsite-nav-text" >Overview</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../datausage.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Data">
      <span class="devsite-nav-text" >Data</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../admin.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Enterprise">
      <span class="devsite-nav-text" >Enterprise</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../perf.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Performance">
      <span class="devsite-nav-text" >Performance</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../config.html"
     id="devsite-nav-forward"     class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Permissions">
      <span class="devsite-nav-text" menu="_book">Permissions</span>
        <span class="devsite-nav-icon material-icons" data-icon="forward" aria-hidden="true"
          menu="_book">
    </span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../power.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Power">
      <span class="devsite-nav-text" >Power</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../dalvik.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Runtime">
      <span class="devsite-nav-text" >Runtime</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../ota.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Updates">
      <span class="devsite-nav-text" >Updates</span>
        </a>
  </li>

                                  </ul>
                          </li>
                      <li class="devsite-nav-item">
                                <a href="../../../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
          <div class="devsite-mobile-nav-bottom">
                            <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item"><a href="../config.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li>
  <li class="devsite-nav-item"><a href="ambient.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Ambient Capabilities">Ambient Capabilities</span></a></li>
  <li class="devsite-nav-item"><a href="background-location-access.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Background Location Access Reminder">Background Location Access Reminder</span></a></li>
  <li class="devsite-nav-item"><a href="contacts-affinities.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Contacts Affinities Access">Contacts Affinities Access</span></a></li>
  <li class="devsite-nav-item"><a href="filesystem.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Discretionary Access Control">Discretionary Access Control</span></a></li>
  <li class="devsite-nav-item"><a href="immutable-device-ids.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Immutable Device IDs">Immutable Device IDs</span></a></li>
  <li class="devsite-nav-item"><a href="namespaces_libraries.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Library Namespaces">Library Namespaces</span></a></li>
  <li class="devsite-nav-item"><a href="perms-whitelist.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Privileged Permission Whitelist">Privileged Permission Whitelist</span></a></li>
  <li class="devsite-nav-item"><a href="restrict-opportunistic-locations.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Restrict Opportunistic Locations">Restrict Opportunistic Locations</span></a></li>
  <li class="devsite-nav-item"><a href="restricted-screen-reading.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Restricted Screen Reading">Restricted Screen Reading</span></a></li>
  <li class="devsite-nav-item"><a href="runtime_perms.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Runtime Permissions">Runtime Permissions</span></a></li>
  <li class="devsite-nav-item"><a href="tristate-perms.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Tristate Location Permissions">Tristate Location Permissions</span></a></li>
  <li class="devsite-nav-item"><a href="usb-hal.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="USB HAL">USB HAL</span></a></li>
          </ul>
                                                                                                                                                                            </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
            has-book-nav            has-toc>
          <devsite-toc class="devsite-nav"
            ></devsite-toc>
          <devsite-content>
                          

<article class="devsite-article">
  <article class="devsite-article-inner">        
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../../tech.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="2"
          >
            Configure
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../config.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="3"
          >
            Permissions
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

              <h1 class="devsite-page-title">Contacts Provider and Affinities Information</h1>
    
    <devsite-toc class="devsite-nav" devsite-toc-embedded >
    </devsite-toc>

    <div class="devsite-article-body clearfix
      ">

              
  <!--
      Copyright 2019 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->

<p> Starting in Android 10, contacts-affinity-related data,
managed by the <a
href="https://developer.android.google.cn/guide/topics/providers/contacts-provider.html" class="external">Contacts Provider</a> component (the source of data seen in a
device’s contacts app), is accessed differently than in Android 9 and lower.</p>

<p>Prior to Android 10, apps used the Contacts Provider
to access data and transfer it between a device and online services. Android 10 features changes regarding data accessibility to ensure
increased user privacy in all Android 10 devices that
use the Contacts Provider. For one, the underlying database doesn’t
contain contact affinities data. Therefore apps can’t write to or read from it.
Changes include the following: </p>

<ul>
  <li>The Contacts Provider doesn’t record contacts-affinity-related
data, such as the number of times a user was contacted, the last time of
contact, the app used, the person contacted, or any related historical data.</li>

  <li>The <code translate="no" dir="ltr"><a
href="https://developer.android.google.cn/reference/android/widget/MultiAutoCompleteTextView" class="external">MultiAutoCompleteTextView</a></code> class in the Contacts Provider
autocomplete API  doesn’t sort query results by interaction counter.</li>

  <li>The Android framework doesn’t provide implicit contacts ranking. (However,
  user-controlled, <em>explicit</em> contacts ranking (such as <em>starred</em>
  contacts) remains).</li>
</ul>

<p>
To implement these changes, do one of the following:
</p>

<ul>
  <li>Use the latest Contacts Provider.</li>

  <li>Update your version (if you’re using a forked version).</li>
</ul>

<p>In addition, update any apps that rely on the <a href="#fields">deprecated Contacts Provider
features</a>. API versions designed to be workarounds to the deprecated functions <strong>aren’t
allowed.</strong></p>

<p>
For Android 9 and lower, contact-interaction data from the Contacts Provider
hasn’t been removed. Instead, contact-interaction data is cleared periodically
(approximately once per day) to simulate the equivalent in Android 10. The Contacts Provider stores this information, but
only temporarily.
</p>

<h3 id="APIchanges">API changes</h3>

<p>
These changes are expected to have a large impact on APIs. For example,
autocomplete ranking won’t perform as well. Potential impacts on API behavior
include the following:
</p>

<ul>
  <li>The Contacts Provider won’t store a user's preferences for, or interactions
with, the contact in the <code translate="no" dir="ltr"><a
href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts.html" class="external">ContactsContract.Contacts</a></code> table columns.</li>
  <li>The autocomplete API won’t sort results by interaction counter.</li>
  <li>The <code translate="no" dir="ltr">TIMES_CONTACTED</code> / <code translate="no" dir="ltr">TIMES_USED</code> and
<code translate="no" dir="ltr">LAST_TIME_CONTACTED</code> / <code translate="no" dir="ltr">LAST_TIME_USED</code> columns won’t be
updated.</li>

<ul>
  <li>These clear (to either <code translate="no" dir="ltr">null</code> or set to 0, depending on
the affected columns) upon upgrade to Android 10.</li>
  <li>Ranking in the autocomplete query APIs returns results sorted
alphabetically, never by affinity information.</li>
  <li>API calls for frequent contacts (for example, using the filter string
<code translate="no" dir="ltr">CONTENT_FREQUENT_URI</code>) return no results.</li></ul></ul>

<p>
Generally, if any of the deprecated Contacts Provider API elements use counters,
those counters (when used in Android 10) contain 0, and
return 0 when queried. Update requests from affected APIs are ignored. For
example, the <code translate="no" dir="ltr"><a
href="https://developer.android.google.cn/reference/android/provider/ContactsContract.DataUsageFeedback.html" class="external">ContactsContract.DataUsageFeedback</a></code> class was
deprecated, so update and delete calls to this class are ignored.</p>

<h4 id="fields">Fields that impact APIs</h4>

<p>
These fields have changed in Android 10:
</p>

<ul>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.ContactOptionsColumns.html#TIMES_CONTACTED" class="external">ContactsContract.ContactOptionsColumns#TIMES_CONTACTED</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.ContactOptionsColumns.html#LAST_TIME_CONTACTED" class="external">ContactsContract.ContractOptionsColumns.LAST_TIME_CONTACTED</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.DataUsageStatColumns.html#TIMES_USED" class="external">ContactsContract.DataUsageStatColumns#TIMES_USED</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.DataUsageStatColumns.html#LAST_TIME_USED" class="external">ContactsContract.DataUsageStatColumns#LAST_TIME_USED</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts.html?hl=ro#CONTENT_STREQUENT_FILTER_URI" class="external">ContactsContract#CONTENT_STREQUENT_FILTER_URI</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts.html?hl=ro#CONTENT_STREQUENT_URI" class="external">ContactsContract.Contacts#CONTENT_STREQUENT_URI</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts.html?hl=ro#CONTENT_FREQUENT_URI" class="external">ContactsContract.Contacts#CONTENT_FREQUENT_URI</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts.html#ENTERPRISE_CONTENT_FILTER_URI" class="external">ContactsContract.Contacts#ENTERPRISE_CONTENT_FILTER_URI</a></code></li>
  <li><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts#CONTENT_FILTER_URI" class="external">ContactsContract.Contacts#CONTENT_FILTER_URI</a></code></li>
</ul>

<p> The affected fields in Android 10 may be present in different APIs, as
indicated in the table below. Deprecated API fields return behaviors as listed. Because one of these
deprecated fields may be used in several of your APIs, verify your use cases. </p>

<table>
  <tbody>
    <tr>
      <th>Class</th>
      <th>API fields</th>
      <th>10 returns</th>
    </tr>
    <tr>
      <td>
      <code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts" class="external">ContactsContract.Contacts</a></code><br>
      <code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.RawContacts" class="external">ContactsContract.RawContacts</a></code><br>
      <code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Data" class="external">ContactsContract.Data</a></code><br>
      <code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts.Entity" class="external">ContactsContract.Entity</a></code>
      </td>
      <td><code translate="no" dir="ltr">ContactOptionsColumns</code><br>
        <code translate="no" dir="ltr">TIMES_CONTACTED</code><br>
        <code translate="no" dir="ltr">LAST_TIME_CONTACTED</code>
      </td>
      <td>These columns always contain 0, regardless of how they’re used. Attempts to modify them are
       ignored.</td>
    </tr>
    <tr>
      <td><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts" class="external">Contacts</a></code>
      </td>
      <td><code translate="no" dir="ltr">markAsContacted()</code></td>
      <td>No operation.</td>
    </tr>
    <tr>
      <td><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.DataUsageFeedback" class="external">ContactsContract.DataUsageFeedback</a></code>
      </td>
      <td><p><code translate="no" dir="ltr">update</code><br>
        <code translate="no" dir="ltr">delete</code></p>
     </td>
      <td>No operation.</td>
    </tr>
    <tr>
      <td><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.Contacts" class="external">ContactsContract.Contacts</a></code>
      </td>
      <td>Strequent (<em>starred</em> + frequent)<br>
         <code translate="no" dir="ltr">CONTENT_STREQUENT_FILTER_URI</code><br>
         <code translate="no" dir="ltr">CONTENT_STREQUENT_URI</code><br>
         <code translate="no" dir="ltr">CONTENT_FREQUENT_URI</code>
      </td>
      <td>Returns <em>starred</em> contacts only. No frequent contacts returned.</td>
    </tr>
    <tr>
      <td><code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.CommonDataKinds.Email" class="external">ContactsContract.CommonDataKinds.Email</a></code><br>
      <code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.CommonDataKinds.Phone" class="external">ContactsContract.CommonDataKinds.Phone</a></code><br>
      <code translate="no" dir="ltr"><a href="https://developer.android.google.cn/reference/android/provider/ContactsContract.CommonDataKinds.Callable" class="external">ContactsContract.CommonDataKinds.Callable</a></code>
      </td>
      <td>Filter (also called autocomplete) APIs
        <p><code translate="no" dir="ltr">CONTENT_FILTER_URI</code><br>
        <code translate="no" dir="ltr">ENTERPRISE_CONTENT_FILTER_URI</code></p>
      </td>
      <td>Results not sorted by affinity. These are sorted by <em>starred</em> and <em>name</em>.</td>
    </tr>
  </tbody>
</table>

<h4 id="alternatives">Alternatives</h4>

<p>
There are no alternatives to the deprecated API fields. Workarounds designed to
circumvent these restrictions, whether in the form of new APIs or new fields,
aren’t allowed.
</p>

<h3 id="implementation">Implementation</h3>

<p> You don’t need to do anything to implement these changes. They’re part of the initiative to
increase user privacy on the Android OS platform. However, if your apps rely on deprecated features,
you may want to update your apps to compensate for any changes. Additionally, if you use a forked
version of the Contacts Provider, you must update your Contacts Provider.</p>

<h3 id="nocustomize">No customization</h3>

<p>
Don’t customize or work around the contacts affinity information changes.
They’re built into the framework, and making any changes takes you out of
compliance. Never alter the default settings or provide backdoor alternatives.
</p>

  
          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../../../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../../setup/build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../../setup/build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
                      
<div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../setup/community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
    <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>

  </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar                   ></devsite-snackbar>    <devsite-tooltip blocked-link></devsite-tooltip>
    <devsite-analytics>
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
        <script>
    (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/js/app_loader.js', '[7,"en",null,"../../../js/devsite_app.html","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource","https://androidsource-dot-google-developers.gonglchuangl.net/",null,null,["/_pwa/androidsource/manifest.json","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"]]')
  </script>  </body>

<!-- Mirrored from source.android.google.cn/devices/tech/config/contacts-affinities by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:58:12 GMT -->
</html>