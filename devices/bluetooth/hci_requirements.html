<!doctype html>
<html       lang="en"      dir="ltr">
  
<!-- Mirrored from source.android.google.cn/devices/bluetooth/hci_requirements by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 15:20:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../../_pwa/androidsource/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/rebrand-app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/touchicon-180.png"><link rel="canonical" href="hci_requirements.html">      
<title>HCI Requirements &nbsp;|&nbsp; Android Open Source Project</title>

<meta property="og:title" content="HCI Requirements &nbsp;|&nbsp; Android Open Source Project">


  <meta property="og:url" content="hci_requirements.html">

  <meta property="og:locale" content="en">




    
    
    
  
    </head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        block-apix        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header keep-tabs-visible>
      









<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../setup.html"
   class="gc-analytics-event"
   title="Set up"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab >
          <a href="../../compatibility.html"
   class="gc-analytics-event"
   title="Design"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab >
          <a href="../../security.html"
   class="gc-analytics-event"
   title="Secure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab active>
          <a href="../../devices.html"
   class="gc-analytics-event"
   title="Develop"
   aria-label="Develop, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab >
          <a href="../tech.html"
   class="gc-analytics-event"
   title="Configure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search
            enable-suggestions
              family-name="Android Open Source Project"    tenant-name="Android Open Source Project"            >
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results" method="GET">
    <div class="devsite-search-container">
      <div class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons" aria-hidden="true"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

        <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>


                  <a class="devsite-header-link devsite-top-button button gc-analytics-event"
   href="http://android-review.googlesource.com/"
   data-category="Site-Wide Custom Events"
   data-label="Site header link">
  Go to code
</a>
        
              </div>    </div>  </div>
  <div class="devsite-collapsible-section
    ">
    <div class="devsite-header-background">
                        <div class="devsite-product-id-row">
            <div class="devsite-product-description-row">
                              <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../devices.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Lower Header"
              data-value="1"
          >
            Develop
      
  </a>
        </li>
  </ul>
                                        </div>
                                                                                    </div>
                                      <div class="devsite-doc-set-nav-row">
                              <devsite-tabs class="lower-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../devices.html"
   class="gc-analytics-event"
   title="Overview"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Overview"
   >
  Overview
</a>

        </tab>
                        <tab >
          <a href="../audio.html"
   class="gc-analytics-event"
   title="Audio"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Audio"
   >
  Audio
</a>

        </tab>
                        <tab >
          <a href="../camera.html"
   class="gc-analytics-event"
   title="Camera"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Camera"
   >
  Camera
</a>

        </tab>
                        <tab active>
          <a href="../tech/connect.html"
   class="gc-analytics-event"
   title="Connectivity"
   aria-label="Connectivity, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Connectivity"
   >
  Connectivity
</a>

        </tab>
                        <tab >
          <a href="../graphics.html"
   class="gc-analytics-event"
   title="Graphics"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Graphics"
   >
  Graphics
</a>

        </tab>
                        <tab >
          <a href="../interaction.html"
   class="gc-analytics-event"
   title="Interaction"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Interaction"
   >
  Interaction
</a>

        </tab>
                        <tab >
          <a href="../media.html"
   class="gc-analytics-event"
   title="Media"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Media"
   >
  Media
</a>

        </tab>
                        <tab >
          <a href="../storage.html"
   class="gc-analytics-event"
   title="Storage"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Storage"
   >
  Storage
</a>

        </tab>
            </div>
</devsite-tabs>

        </div>
          </div>  </div></div>
  

  </devsite-header>      <devsite-book-nav scrollbars >
                  




<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
        <span class="devsite-product-name">
        <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
      </span>
    
</div>  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices.html"
          class="devsite-nav-title gc-analytics-event
            devsite-nav-active"
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                            <ul class="devsite-nav-responsive-tabs">
                                                                                                                      <li class="devsite-nav-item">
    <a href="../../devices.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview">
      <span class="devsite-nav-text" >Overview</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../audio.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Audio">
      <span class="devsite-nav-text" >Audio</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../camera.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Camera">
      <span class="devsite-nav-text" >Camera</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../tech/connect.html"
     id="devsite-nav-forward"     class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Connectivity">
      <span class="devsite-nav-text" menu="_book">Connectivity</span>
        <span class="devsite-nav-icon material-icons" data-icon="forward" aria-hidden="true"
          menu="_book">
    </span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../graphics.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Graphics">
      <span class="devsite-nav-text" >Graphics</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../interaction.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Interaction">
      <span class="devsite-nav-text" >Interaction</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../media.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Media">
      <span class="devsite-nav-text" >Media</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../storage.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Storage">
      <span class="devsite-nav-text" >Storage</span>
        </a>
  </li>

                                  </ul>
                          </li>
                      <li class="devsite-nav-item">
                                <a href="../tech.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
          <div class="devsite-mobile-nav-bottom">
                            <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item"><a href="../tech/connect.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Bluetooth and NFC">Bluetooth and NFC</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../bluetooth.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="services.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Bluetooth Services">Bluetooth Services</span></a></li><li class="devsite-nav-item"><a href="ble.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Bluetooth Low Energy">Bluetooth Low Energy</span></a></li><li class="devsite-nav-item"><a href="asha.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Hearing Aids over BLE">Hearing Aids over BLE</span></a></li><li class="devsite-nav-item"><a href="ble_advertising.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="BLE Advertising">BLE Advertising</span></a></li><li class="devsite-nav-item"><a href="verifying_debugging.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Verifying and Debugging Bluetooth">Verifying and Debugging Bluetooth</span></a></li><li class="devsite-nav-item"><a href="hci_requirements.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Bluetooth HCI Requirements">Bluetooth HCI Requirements</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/felica.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="NFC Host Card Emulation of FeliCa">NFC Host Card Emulation of FeliCa</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/secure-nfc.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Secure NFC">Secure NFC</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Calling and Messaging">Calling and Messaging</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../tech/connect/5g-nsa.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="5G Non-Standalone (NSA)">5G Non-Standalone (NSA)</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/block-numbers.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Block Phone Numbers">Block Phone Numbers</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/call-notification.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Call Notifications">Call Notifications</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/emergency-affordance.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Emergency Affordance">Emergency Affordance</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/emergency-call.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Emergency Numbers and Emergency Calling">Emergency Numbers and Emergency Calling</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/ims.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="IP Multimedia Subsystem (IMS)">IP Multimedia Subsystem (IMS)</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/phone-account-suggestion.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Phone Account Suggestion">Phone Account Suggestion</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/rtt.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Real-Time Text (RTT)">Real-Time Text (RTT)</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/third-party-call-apps.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Third-Party Calling Apps">Third-Party Calling Apps</span></a></li><li class="devsite-nav-item"><a href="../tech/config/voicemail.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Visual Voicemail">Visual Voicemail</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Carrier">Carrier</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../tech/config/carrier.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../tech/config/update.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="APN and CarrierConfig">APN and CarrierConfig</span></a></li><li class="devsite-nav-item"><a href="../tech/config/carrierid.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Carrier Identification">Carrier Identification</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/data-plans.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Data Plans">Data Plans</span></a></li><li class="devsite-nav-item"><a href="../tech/config/device-identifiers.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Device identifiers">Device identifiers</span></a></li><li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="eSIM">eSIM</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../tech/connect/esim-overview.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Implementing eSIM">Implementing eSIM</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/esim-modem-requirements.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Modem Requirements">Modem Requirements</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/esim-euicc-api.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="eUICC APIs">eUICC APIs</span></a></li></ul></devsite-expandable-nav></li><li class="devsite-nav-item"><a href="../tech/connect/oob-users.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Out-of-Balance Users">Out-of-Balance Users</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/ril.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Radio Interface Layer (RIL)">Radio Interface Layer (RIL)</span></a></li><li class="devsite-nav-item"><a href="../tech/config/uicc.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="UICC">UICC</span></a></li></ul></devsite-expandable-nav></li>
  <li class="devsite-nav-item           devsite-nav-expandable"><devsite-expandable-nav collapsed>
    <a class="devsite-nav-toggle" aria-hidden="true"></a><div class="devsite-nav-title devsite-nav-title-no-path" tabindex="0"><span class="devsite-nav-text" title="Wi-Fi">Wi-Fi</span></div><ul class="devsite-nav-section"><li class="devsite-nav-item"><a href="../tech/connect/wifi-overview.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-hal.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi HAL">Wi-Fi HAL</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-infrastructure.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Infrastructure Features">Wi-Fi Infrastructure Features</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-debug.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Testing, Debugging, and Tuning Wi-Fi">Testing, Debugging, and Tuning Wi-Fi</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/carrier-wifi.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Carrier Wi-Fi">Carrier Wi-Fi</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-mac-randomization.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="MAC Randomization">MAC Randomization</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-passpoint.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Passpoint (Hotspot 2.0)">Passpoint (Hotspot 2.0)</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-sta-ap-concurrency.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="STA/AP Concurrency">STA/AP Concurrency</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-aware.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Aware">Wi-Fi Aware</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-direct.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Direct">Wi-Fi Direct</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-easy-connect.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Easy Connect">Wi-Fi Easy Connect</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-low-latency.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Low Latency Mode">Wi-Fi Low Latency Mode</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-network-selection.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Network Selection">Wi-Fi Network Selection</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-scan.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Preferred Network Offload Scanning">Wi-Fi Preferred Network Offload Scanning</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-rtt.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Wi-Fi Round Trip Time (RTT)">Wi-Fi Round Trip Time (RTT)</span></a></li><li class="devsite-nav-item"><a href="../tech/connect/wifi-wpa3-owe.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="WPA3 and Wi-Fi Enhanced Open">WPA3 and Wi-Fi Enhanced Open</span></a></li></ul></devsite-expandable-nav></li>
          </ul>
                                                                                                                                                                            </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
            has-book-nav            has-toc>
          <devsite-toc class="devsite-nav"
            ></devsite-toc>
          <devsite-content>
                          

<article class="devsite-article">
  <article class="devsite-article-inner">        
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../../devices.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="2"
          >
            Develop
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../tech/connect.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="3"
          >
            Connectivity
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

              <h1 class="devsite-page-title">HCI Requirements</h1>
    
    <devsite-toc class="devsite-nav" devsite-toc-embedded >
    </devsite-toc>

    <div class="devsite-article-body clearfix
      ">

              
  <!--
     Copyright 2017 The Android Open Source Project

      Licensed under the Apache License, Version 2.0 (the "License"); you may
      not use this file except in compliance with the License.  You may obtain a
      copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
      WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
      License for the specific language governing permissions and limitations
      under the License.
  -->

      <p>The Host Controller Interface (HCI) is used for interacting with a
      Bluetooth controller.</p>

      <p>This document provides a list of Bluetooth (BT) and Bluetooth Low
      Energy (BLE) HCI requirements. The aim is for Host BT stack vendors and
      BT controller vendors to conform to these platform requirements in order
      to use the feature set described below.</p>

      <p>This document refers to the Bluetooth Core 5.1 Specification as the
        "spec." The Bluetooth Core 5.1 Specification is available on the
        <a href="https://www.bluetooth.org/en-us/specification/adopted-specifications">
      Bluetooth SIG website</a> along with other adopted documents.</p>

      <h2
    id="general-design-overview">General design overview</h2>

        <h3
  id="chip-capabilities-and-configuration">Chip capabilities and
  configuration</h3>

          <p>As an open platform, Android has a matrix of software
          releases, OEMs, vendors, and platform and chip capabilities.</p>

          <p>To manage the varying landscape and to manage migrations, a design
          philosophy of allowing BT controllers to expose their capabilities
          (beyond the standard Bluetooth Core 5.1 Specification) is described
          in this document. The host BT stack can then use these capabilities
          to determine which features to enable.</p>

        <h3 id="supporting-open-standards">Supporting open standards</h3>
          <p> One goal of Android is to support open standards after
          ratification in a Bluetooth specification. If a feature described
          below becomes available in standard HCI methods in a future Bluetooth
          specification, we will lean towards making that approach the default.</p>

      <h2 id="vendor-specific-capabilities">Vendor-specific capabilities</h2>
        <p>Vendor-specific command:
        <code translate="no" dir="ltr">LE_Get_Vendor_Capabilities_Command</code></p>

        <p>OpCode Command Field (OCF): 0x153</p>
        <table>
          <tr>
            <th>Command parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td></td>
            <td>NA</td>
            <td>Empty Command parameter list</td>
          </tr>
        </table>

        <p> A Command Complete event will be generated for this command.</p>

        <table>
          <tr>
            <th>Return parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">Status</code></td>
            <td>1 octet</td>
            <td>Command Complete status</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">max_advt_instances</code><br />
            <strong>(Deprecated)</strong></td>
            <td>1 octet</td>
            <td>Number of advertisement instances supported.<br /><br />
            <strong>This parameter is deprecated in the Google feature spec v0.98
              and higher in favor of the <em>LE Extended Advertising</em> available
              in the BT spec version 5.0 and higher.</strong></td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">offloaded_resolution_of_private-address</code><br />
            <strong>(Deprecated)</strong></td>
            <td>1 octet</td>
            <td>BT chip capability of RPA.<br/>
              If supported by a chip, it needs enablement by the host.<br/>
              0 = Not capable<br/>
              1 = Capable<br /><br />
              <strong>This parameter is deprecated in the Google feature spec v0.98
              and higher in favor of the <em>Privacy feature</em> available
                in the BT spec version 4.2 and higher.</strong></td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">total_scan_results_storage</code></td>
            <td>2 octets</td>
            <td>Storage for scan results in bytes</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">max_irk_list_sz</code></td>
            <td>1 octet</td>
            <td>Number of IRK entries supported in the firmware</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">filtering_support</code></td>
            <td>1 octet</td>
            <td>Support for filtering in the controller<br/>
              0 = Not supported<br/>
              1 = Supported</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">max_filter</code></td>
            <td>1 octet</td>
            <td>Number of filters supported</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">activity_energy_info_support</code></td>
            <td>1 octet</td>
            <td>Supports reporting of activity and energy information<br/>
              0 = Not capable<br/>
              1 = Capable</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">version_supported</code></td>
            <td>2 octets</td>
            <td>Specifies the version of the Google feature spec supported<br/>
              byte[0] = Major number<br/>
              byte[1] = Minor number<br /><br />
              <strong>v0.98</strong><br />
              byte[0] = 0x00<br />
              byte[1] = 0x62</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">total_num_of_advt_tracked</code></td>
            <td>2 octets</td>
            <td>Total number of advertisers tracked for
              <code translate="no" dir="ltr">OnLost</code>/<code translate="no" dir="ltr">OnFound</code> purposes</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">extended_scan_support</code></td>
            <td>1 octet</td>
            <td>Supports extended scan window and interval</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">debug_logging_supported</code></td>
            <td>1 octet</td>
            <td>Supports logging of binary debug information from controller</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">LE_address_generation_offloading_support</code><br />
            <strong>(Deprecated)</strong></td>
            <td>1 octet</td>
            <td>0 = Not supported<br/>
              1 = Supported<br /><br />
            <strong>This parameter is deprecated in the Google feature spec v0.98
              and higher in favor of the <em>Privacy feature</em> available
              in the BT spec version 4.2 and higher.</strong></td>
          </tr>
          <tr>
            <td>A2DP_source_offload_capability_mask</td>
            <td>4 Octets</td>
            <td>Bit masks for codec types supported<br />
              Bit 0 - SBC<br />
              Bit 1 - AAC<br />
              Bit 2 - APTX<br />
              Bit 3 - APTX HD<br />
              Bit 4 - LDAC<br />
              Bit 5-31 are reserved
            </td>
          </tr>
          <tr>
            <td>bluetooth_quality_report_support</td>
            <td>1 octet</td>
            <td>Supports reporting of Bluetooth Quality events<br />
              0 = Not capable<br />
              1 = Capable
            </td>
          </tr>
        </table>

      <h2 id="batching-of-scan-results">Batching of scan results</h2>
        <p>A design goal is to enhance how the Bluetooth LE Scan Response event
        notifications are delivered to the host, in order to save power in the
        host.</p>

        <p>By reducing how often the controller notifies the host application
        processor to scan results, the host application processor can stay in
        idle/sleep longer. This reduces power consumption in the host. The
        return parameter <code translate="no" dir="ltr">total_scan_results_storage</code> of
        <code translate="no" dir="ltr">LE_Get_Vendor_Capabilities_Command</code> indicates the chip
        capability for storage of scan results.</p>

        <p>This feature focuses on the management and configuration of the LE
        Scan Results storage facility in the Bluetooth controller. The storage
        is used to temporarily batch advertisement data and scan data and
        metadata that are received by the controller for later delivery to the
        host.</p>

        <p>Firmware shall support two types of batching, which can be engaged
        simultaneously:</p>

        <ul>
          <li>Truncated. Contains the following information elements: {MAC,
            TX Power, RSSI, Timestamp}</li>
          <li>Full. Contains the following information elements:
            {MAC, TX Power, RSSI, Timestamp, Adv Data, Scan Response}</li>
        </ul>

        <h3 id="le_batch_scan_command">LE_Batch_Scan_Command</h3>
          <p>OCF: 0x156</p>

          <table>
            <tr>
              <th>Command parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Batch_Scan_opcode</code></td>
              <td>1 octet</td>
              <td>0x1 - Enable customer-specific feature<br/>
                0x2 - Set Batch Scan Storage parameters<br/>
                0x3 - Set Batch Scan parameters<br/>
                0x4 - Read Batch Scan Result parameters</td>
            </tr>
          </table>

          <p>A Command Complete event will be generated for this command.
          Enabling the customer-specific feature does not start the scan.</p>

          <table>
            <tr>
              <th>Return parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Status</code></td>
              <td>1 octet</td>
              <td>Command Complete status</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Batch_Scan_opcode</code></td>
              <td>1 octet</td>
              <td>0x1 - Enable customer-specific feature<br/>
                0x2 - Set Batch Scan Storage parameters<br/>
                0x3 - Set Batch Scan parameters<br/>
                0x4 - Read Batch Scan Result parameters</td>
            </tr>
          </table>

          <h4
            id="le_batch_scan_command-enable-customer-specific-feature">
            LE_Batch_Scan_Command: Enable Customer Specific feature</h4>
            <p>Sub OCF: 0x01</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">enable_customer_specific_feature_set</code></td>
                <td>1 octet</td>
                <td>0x01 - Enable Batch Scan feature<br/>
                  0x00 - Disable Batch Scan feature</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_Scan_opcode</code></td>
                <td>1 octet</td>
                <td>0x1 - Enable customer-specific feature<br/>
                  0x2 - Set Batch Scan Storage parameters<br/>
                  0x3 - Set Batch Scan parameters<br/>
                  0x4 - Read Batch Scan Result parameters</td>
              </tr>
            </table>

          <h4
            id="le_batch_scan_command-set-batch-scan-storage-param-subcommand">
            LE_Batch_Scan_Command: Set Batch Scan Storage Param subcommand</h4>
            <p>Sub OCF: 0x02</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_Scan_Full_Max</code></td>
                <td>1 octet</td>
                <td>Max storage space (in %) allocated to full style<br/>
                  [Range: 0-100]</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_Scan_Truncated_Max</code></td>
                <td>1 octet</td>
                <td>Max storage space (in %) allocated to truncated style<br/>
                [Range: 0-100]</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_Scan_Notify_Threshold</code></td>
                <td>1 octet</td>
                <td>Setup notification level (in %) for individual storage pool
                <br/>[Range: 0-100]<br/>
                Setting to 0 will disable notification.
                Vendor-specific HCI event is generated (Storage threshold breach
                subevent)</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_scan_opcode</code></td>
                <td>1 octet</td>
                <td>0x02 [Set Batch Scan parameters]</td>
              </tr>
            </table>

          <h4
            id="le_batch_scan_command-set-batch-scan-param-subcommand">
            LE_Batch_Scan_Command: Set Batch Scan Param subcommand</h4>
            <p>Sub OCF: 0x03</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_Scan_Mode</code></td>
                <td>1 octet</td>
                <td>0x00 – Batch scan is disabled<br/>
                  0x01 – Truncated mode is enabled<br/>
                  0x02 – Full mode is enabled<br/>
                  0x03 – Truncated and Full mode are enabled</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Duty_cycle_scan_window</code></td>
                <td>4 octets</td>
                <td>Batch Scan scan time (# of slot)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Duty_cyle_scan_interval</code></td>
                <td>4 octets</td>
                <td>Batch Scan interval period (# of slot)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">own_address_type</code></td>
                <td>1 octet</td>
                <td>0x00 - Public device address<br/>
                  0x01 - Random device address</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_scan_Discard_Rule</code></td>
                <td>1 octet</td>
                <td>0 - Discard oldest advertisement<br/>
                  1 - Discard advertisement with weakest RSSI</td>
              </tr>
            </table>

            <p> This sub-command will start batch scanning, if enabled. In
            Truncated scanning, results are stored in truncated form where the
            unique key for Truncated style = {<code translate="no" dir="ltr">BD_ADDR,</code>
            scan_interval}. This means only one <code translate="no" dir="ltr">BD_ADDR will</code> be
            recorded for each scan interval. The record to keep for Truncated
            mode is the following: {<code translate="no" dir="ltr">BD_ADDR</code>, Tx Power, RSSI,
            Timestamp} </p>

            <p> When Full mode is enabled, active scanning will be used and Scan
            Responses will be recorded. The Full style unique key = {MAC, Ad
            packet}, irrespective of scan interval. The record to keep for Full
            mode is {<code translate="no" dir="ltr">BD_ADDR</code>, Tx Power, RSSI, Timestamp, Ad
            packet, Scan Response}. In Full style, the same AD packet, when
            seen multiple times across different scan intervals, is recorded
            only once. However, in Truncated mode, it is the visibility of
            <code translate="no" dir="ltr">BA_ADDR</code> across different scan intervals that is of
            interest (once per scan interval). The RSSI is the averaged value
            of all duplicates of a unique advertisement within a scan interval.
            </p>

            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_scan_opcode</code></td>
                <td>1 octet</td>
                <td>0x03 [Set Batch Scan Parameters]</td>
              </tr>
            </table>

          <h4 id="le_batch_scan_command-read-batch-scan-results-sub-command">
            LE_Batch_Scan_Command: Read Batch Scan Results sub-command</h4>
            <p>Sub OCF: 0x04</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_Scan_Data_read</code></td>
                <td>1 octet</td>
                <td>0x01 – Truncated mode data<br/>
                  0x02 – Full mode data</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.
            When the host issues this command, all the results in the
            controller may not fit in one Command Complete event. The host
            will iterate issuing this command until the corresponding results
            in the Command Complete event indicate 0 in the number of records,
            which indicates the controller has no more records to communicate
            to the host. Each Command Complete event could contain multiple
            records of only one type of data (Full or Truncated).</p>

            <p>Controller and host time references are not synchronized. The
              unit of the timestamp is 50ms. The value of the timestamp is
              based off when the <code translate="no" dir="ltr">Read_Batch_Scan_Results_Sub_cmd</code>
              is given by the host. If a command arrival time is
              <code translate="no" dir="ltr">T_c</code> in the firmware, then the actual time the
              timestamp was taken in the firmware is <code translate="no" dir="ltr">T_fw</code>. The
              reporting time will be: (<code translate="no" dir="ltr">T_c</code> - <code translate="no" dir="ltr">T_fw</code>).
              <code translate="no" dir="ltr">T_c</code> and <code translate="no" dir="ltr">T_fw </code>are in the firmware time
              domain. This lets the host compute how long ago the event
              happened.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_scan_opcode</code></td>
                <td>1 octet</td>
                <td>0x03 [Set Batch Scan parameters]</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Batch_Scan_data_read</code></td>
                <td>1 octet</td>
                <td>Identifies the format (Truncated or Full)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">num_of_records</code></td>
                <td>1 octet</td>
                <td>Number of records of <code translate="no" dir="ltr">Batch_Scan_data_read</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">format_of_data</code></td>
                <td>Variable</td>
                <td><span style="text-decoration:underline;">Truncated
                    Mode:</span><br/>
                  Address[0]: 6 octets<br/>
                  Address_Type[0]: 1 octet<br/>
                  Tx_Pwr[0]: 1 octet<br/>
                  RSSI[0] : 1 octet<br/>
                  Timestamp[0]: 2 octets<br/>
                  [multiple records (<code translate="no" dir="ltr">num_of_records</code>)
                  with above format]<br/>
                  <br/>
                  <span style="text-decoration:underline;">Full
                    Mode:</span><br/>
                  Address[0]: 6 octets<br/>
                  Address_Type[0]: 1 octet<br/>
                  Tx_Pwr[0]: 1 octet<br/>
                  RSSI[0]: 1 octet<br/>
                  Timestamp[0]: 2 octets<br/>
                  Adv packet_len[0]: 1 octet<br/>
                  Adv_packet[0]: Adv_packet_len octets<br/>
                  Scan_data_resp_len[0]: 1 octet<br/>
                  Scan_data_resp[0]: <code translate="no" dir="ltr">Scan_data_resp </code>octets<br/>
                  [multiple records with above format
                  (<code translate="no" dir="ltr">num_of_records</code>)]</td>
              </tr>
            </table>

      <h2 id="advertising-packet-content-filter">Advertising Packet Content
        Filter</h2>
        <p>Use this to enable/disable/setup the
        Advertising Packet Content Filter (APCF) in the controller.</p>

        <h3 id="le_apcf_command">LE_APCF_Command</h3>
          <p>OCF: 0x157</p>
          <table>
            <tr>
              <th>Command parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">APCF_opcode</code></td>
              <td>1 octet</td>
              <td>0x00 - APCF Enable<br/>
                0x01 - APCF Set Filtering parameters<br/>
                0x02 - APCF Broadcaster Address<br/>
                0x03 - APCF Service UUID<br/>
                0x04 - APCF Service Solicitation UUID<br/>
                0x05 - APCF Local Name<br/>
                0x06 - APCF Manufacturer Data<br/>
                0x07 - APCF Service Data</td>
            </tr>
          </table>
          <p>A Command Complete event will be generated for this command.</p>
          <table>
            <tr>
              <th>Return parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Status</code></td>
              <td>1 octet</td>
              <td>Return status</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">APCF_opcode</code></td>
              <td>1 octet</td>
              <td>0x00 - APCF Enable<br/>
                0x01 - APCF Set Filtering parameters<br/>
                0x02 - APCF Broadcaster Address<br/>
                0x03 - APCF Service UUID<br/>
                0x04 - APCF Service Solicitation UUID<br/>
                0x05 - APCF Local Name<br/>
                0x06 - APCF Manufacturer Data<br/>
                0x07 - APCF Service Data</td>
            </tr>
          </table>

          <h4 id="le_apcf_command-enable_sub_cmd"> LE_APCF_Command:
            Enable_sub_cmd</h4>
            <p>Sub OCF: 0x00</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_enable</code></td>
                <td>1 octet</td>
                <td>0x01 - Enable APCF feature<br/>
                  0x00 - Disable APCF feature</td>
              </tr>
            </table>
            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x0 - APCF Enable</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Enable</code></td>
                <td>1 octet</td>
                <td>Enable/disable is set via <code translate="no" dir="ltr">APCF_enable</code></td>
              </tr>
            </table>

          <h4
              id="le_apcf_command-set_filtering_parameters_sub_cmd">
              LE_APCF_Command: set_filtering_parameters_sub_cmd</h4>
            <p>This subcommand is used to add or delete a filter specification
            or clear a filter list for on-chip filtering.</p>
            <p>Sub OCF: 0x01</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>0x00 - Add<br/>
                  0x01 - Delete<br/>
                  0x02 - Clear<br/> Delete will clear the specific filter
                  along with associated feature entries in other tables.<br/>
                  Clear will clear all the filters and associated entries
                  in other tables.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
                <td>1 octet</td>
                <td>Filter index (0, <code translate="no" dir="ltr">max_filter-1</code>)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Feature_Selection</code></td>
                <td>2 octets</td>
                <td>Bit masks for the selected features:<br/>
                  Bit 0: Set to enable Broadcast Address filter<br/>
                  Bit 1: Set to enable Service Data Change filter<br/>
                  Bit 2: Set to enable Service UUID check<br/>
                  Bit 3: Set to enable Service Solicitation UUID check<br/>
                  Bit 4: Set to enable Local Name check<br/>
                  Bit 5: Set to enable Manufacturer Data Check<br/>
                  Bit 6: Set to enable Service Data Check</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_List_Logic_Type</code></td>
                <td>2 octets</td>
                <td>Logic operation for each feature selection (per-bit
                  position) specified in <code translate="no" dir="ltr">APCF_Feature_Selection</code>.
                  <br/>
                  Valid only when a feature is enabled.<br/>
                  Bit position value:<br/>
                  0: OR<br/>
                  1: AND<br/>
                  If "AND" logic is selected, an ADV packet will pass
                  the filter only if it contains ALL of the entries in the
                  list.<br/>
                  If "OR" logic is selected, an ADV packet will pass the
                  filter if it contains any of the entries in the list.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Logic_Type</code></td>
                <td>1 octet</td>
                <td>0x00: OR<br/>
                  0x01: AND<br/>
                  Note: The logic type is N/A for the first three fields
                  of <code translate="no" dir="ltr">APCF_Feature_Selection</code>, which is always "AND"
                  logic. They are only applicable for (Bit 3 - ­Bit 6)
                  four fields of <code translate="no" dir="ltr">APCF_Feature_Selection</code>.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">rssi_high_thresh</code></td>
                <td>1 octet</td>
                <td>[in dBm]<br/>
                  The advertiser is considered seen only if the
                  signal is higher than the RSSI high threshold. Otherwise,
                  the firmware must behave as if it never saw it.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">delivery_mode</code></td>
                <td>1 octet</td>
                <td>0x00 - <code translate="no" dir="ltr">immediate</code><br/>
                  0x01 - <code translate="no" dir="ltr">on_found</code><br/>
                  0x02 - <code translate="no" dir="ltr">batched</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">onfound_timeout</code></td>
                <td>2 octets</td>
                <td>Valid only if <code translate="no" dir="ltr">delivery_mode</code> is
                  <code translate="no" dir="ltr">on_found</code>.<br/>
                  [in milliseconds]<br/>
                  Time for firmware to linger and collect additional
                  advertisements before reporting.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">onfound_timeout_cnt</code></td>
                <td>1 octet</td>
                <td>Valid only if <code translate="no" dir="ltr">delivery_mode</code> is
                  <code translate="no" dir="ltr">on_found</code>.<br/>
                  [count]<br/>
                  If an advertisement in <code translate="no" dir="ltr">onFound</code> lingers in
                  firmware for the <code translate="no" dir="ltr">onfound_timeout</code> duration,
                  it will collect a few advertisements and the count is checked.
                  If the count exceeds <code translate="no" dir="ltr">onfound_timeout_cnt</code>,
                  it's reported <code translate="no" dir="ltr">OnFound</code>
                  immediately thereafter.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">rssi_low_thresh</code></td>
                <td>1 octet</td> <td>Valid only if <code translate="no" dir="ltr">delivery_mode</code>
                  is <code translate="no" dir="ltr">on_found</code>.<br/>
                  [in dBm]<br/>
                  The advertiser packet is considered as not seen if the RSSI
                  of the received packet is not above the RSSI
                  low threshold.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">onlost_timeout</code></td>
                <td>2 octets</td>
                <td>Valid only if <code translate="no" dir="ltr">delivery_mode</code> is
                  <code translate="no" dir="ltr">on_found</code>.<br/>
                  [in milliseconds]<br/>
                  If an advertisement, after being found, is not seen
                  contiguously for the <code translate="no" dir="ltr">lost_timeout</code> period,
                  it will immediately be reported lost.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">num_of_tracking_entries</code></td>
                <td>2 octets</td>
                <td>Valid only if <code translate="no" dir="ltr">delivery_mode</code> is
                  <code translate="no" dir="ltr">on_found</code>.<br/>
                  [count]<br/>
                  Total number of advertisers to track per filter.</td>
              </tr>
            </table>

            <p> RSSI values must use 2's complement to represent negative
            values.  </p>

            <p>Host shall be able to configure multiple filters with
            <code translate="no" dir="ltr">APCF_Application_Address_type</code> set to 0x02 (for all
            broadcaster addresses) to manage various filter combinations.  </p>

            <p> Filtering, batching and reporting are inter-related concepts.
            Every advertisement and related scan response will have to go
            through all the filters, one after the other. Thus, resulting
            actions (<code translate="no" dir="ltr">delivery_mode</code>) are closely tied to filtering.
            The delivery modes are the following:
            <code translate="no" dir="ltr">report_immediately</code>, <code translate="no" dir="ltr">batch</code>, and
            <code translate="no" dir="ltr">onFound</code>. The <code translate="no" dir="ltr">OnLost</code> value is related to
            <code translate="no" dir="ltr">OnFound</code> in the sense that it will come after
            <code translate="no" dir="ltr">OnFound</code> when lost.</p>

            <p> This processing flow depicts the conceptual model:</p>
            <img src="images/bt_filter_batch_report.png">
            <p> When an advertisement (or scan response) frame is received, it
            is applied to all the filters in serial order. It's possible that
            an advertisement can cause immediate reporting based on one filter
            and batching of the same due to a different filter action.</p>

            <p> RSSI level thresholds (high and low) give the ability to
              control when the frame is visible for filter processing, even
              when a valid packet is received by the controller. In case of
              delivery mode being set to immediate or batched, the RSSI of a
              frame is considered for further controller processing. Different
              apps need different reporting and batching behavior. This allows
              multiple apps to have direct reporting and/or batching of
              results in firmware, concurrently. An example is a case when a
              batch scan is active from one app and later a regular LE scan is
              issued by another app. Before a batch scan is issued, the
              framework/app sets appropriate filters. Later, when the second
              app issues a regular scan, previous batching continues. However,
              due to the regular scan, it is akin to conceptually adding a
              null filter (along with all the existing filters) along with the
              LE scan command. The LE scan command parameters take precedence
              when active. When the regular LE scan is disabled, the controller
              will revert back to a previous batch scan, if it existed.</p>

            <p> The <code translate="no" dir="ltr">OnFound</code> delivery mode is based on configured
            filters. A combination that triggers a filter's action to succeed
            is considered the entity to track for <code translate="no" dir="ltr">onLost</code>. The
            corresponding event is the LE Advt tracking subevent.</p>

            <p> The <code translate="no" dir="ltr">OnFound/OnLost</code> transition for a filter (if
            enabled) will look like the following: </p>
            <img src="images/bt_onfound_onlost.png">

            <p>
            A Command Complete event will be generated for this command.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x02 - APCF Set Filtering Parameters</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>Echo back command's <code translate="no" dir="ltr">APCF_Action</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Number of available entries in the filters table</td>
              </tr>
            </table>

          <h4 id="le_apcf_command-broadcast_address_sub_cmd">LE_APCF_Command:
            broadcast_address_sub_cmd</h4>

            <p>This subcommand is used to add or delete an advertiser address
            or to clear the advertiser address list for on-chip filtering.</p>

            <p>Sub OCF: 0x02</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>0x00 - Add<br/>
                  0x01 - Delete<br/>
                  0x02 - Clear<br/>
                  Delete will delete the specified broadcaster address in
                  the specified filter.<br/>
                  Clear will clear all the broadcaster addresses in the
                  specified filter.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
                <td>1 octet</td>
                <td>Filter index (0, <code translate="no" dir="ltr">max_filter-1</code>)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Broadcaster_Address</code></td>
                <td>6 octet</td>
                <td>6-byte device address to add to or delete from the
                broadcaster address list</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Application_Address_type</code></td>
                <td>1 octet</td>
                <td>0x00: Public<br/>
                  0x01: Random<br/>
                  0x02: NA (addresses type not applicable)</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x02 - APCF Broadcaster Address</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>Echo back command's <code translate="no" dir="ltr">APCF_Action</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Number of free entries still available in the Broadcast
                Address table</td>
              </tr>
            </table>

          <h4 id="le_apcf_command-service_uuid_sub_cmd">LE_APCF_Command:
            service_uuid_sub_cmd</h4>
            <p>This subcommand is used to add or delete a service UUID or to
            clear a service UUID list for on-chip filtering.</p>
            <p>Sub OCF: 0x03</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>0x00 - Add<br/>
                  0x01 - Delete<br/>
                  0x02 - Clear<br/>
                  Delete will delete the specified service UUID
                  address in the specified filter.<br/>
                  Clear will clear all the
                  service UUIDs in the specified filter.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
                <td>1 octet</td>
                <td>Filter index (0, <code translate="no" dir="ltr">max_filter</code>-1)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_UUID</code></td>
                <td>2,4,16 octet</td>
                <td>The Service UUID (16-bit, 32-bit, or 128-bit) for adding
                  to, or deleting from, the list.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_UUID_MASK</code></td>
                <td>2,4,16 octet</td>
                <td>The Service UUID Mask (16-bit, 32-bit, or 128-bit) to add
                  to the list. It should have the same length as
                  <code translate="no" dir="ltr">APCF_UUID.</code></td>
              </tr>
            </table>

          <p> A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x03 - APCF Service UUID</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>Echo back command's <code translate="no" dir="ltr">APCF_Action</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Number of free entries still available in the Service UUID
                table</td>
              </tr>
            </table>

          <h4 id="le_apcf_command-solicitation_uuid_sub_cmd">LE_APCF_Command:
            solicitation_uuid_sub_cmd</h4>
          <p>This subcommand is used to add or delete a solicitation UUID or
          to clear a solicitation UUID list for on-chip filtering.</p>
            <p>Sub OCF: 0x04</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>0x00 - Add<br/>
                  0x01 - Delete<br/>
                  0x02 - Clear<br/>
                  Delete will delete the solicitation UUID address in
                  the specified filter.<br/>
                  Clear will clear all the
                  solicitation UUIDs in the specified filter.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
                <td>1 octet</td>
                <td>Filter index (0, <code translate="no" dir="ltr">max_filter</code>-1)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_UUID</code></td>
                <td>2,4,16 octet</td>
                <td>The Solicitation UUID (16-bit, 32-bit, or 128-bit) to
                  add to or delete from the list.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_UUID_MASK</code></td>
                <td>2,4,16 octet</td>
                <td>The Solicitation UUID Mask (16-bit, 32-bit,
                  or 128-bit) to add to the list. It should have the same
                  length as the <code translate="no" dir="ltr">APCF_UUID</code>.</td>
              </tr>
            </table>
            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x04 - APCF Solicitation UUID</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>Echo back command's <code translate="no" dir="ltr">APCF_Action</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Number of free entries still available in the Solicitation
                UUID table</td>
              </tr>
            </table>

          <h4 id="le_apcf_command-local_name_sub_cmd">LE_APCF_Command:
            local_name_sub_cmd</h4>
            <p>This sub-command is used to add or delete a local name string or
            to clear the local name string list for on-chip filtering.</p>
            <p>Sub OCF: 0x05</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>0x00 - Add<br/>
                  0x01 - Delete<br/>
                  0x02 - Clear<br/>
                  Delete will delete the specified local name string
                  in the specified filter.<br/>
                  Clear will clear all the local name strings in the
                  specified filter.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
                <td>1 octet</td>
                <td>Filter index (0, <code translate="no" dir="ltr">max_filter</code>-1)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_LocName_Mandata_or_SerData</code></td>
                <td>Variable size</td>
                <td>A character string for local name.<br/>
                  <br/>
                  Notes:<br/>
                  <ul>
                    <li>Currently the max number of characters in a local name
                    string is 29</li>
                    <li>Not applicable when action is "Clear" (0x2)</li>
                  </ul>
                </td>
              </tr>
            </table>
            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x05 - APCF Local Name</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>Echo back command's <code translate="no" dir="ltr">APCF_Action</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Number of free entries still available in the Local name
                table</td>
              </tr>
            </table>

          <h4 id="le_apcf_command-manf_data_sub_cmd">LE_APCF_Command:
            manf_data_sub_cmd</h4>
            <p>This subcommand is used to add or delete a manufacturer data
            string or to clear the manufacturer data string list for on-chip
            filtering.</p>
            <p>Sub OCF: 0x06</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>0x00 - Add<br/>
                  0x01 - Delete<br/>
                  0x02 - Clear<br/>
                  Delete will delete the specified manufacturer data
                  string in the specified filter.<br/>
                  Clear will clear all the manufacturer data strings in the
                  specified filter.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
                <td>1 octet</td>
                <td>Filter Index (0, <code translate="no" dir="ltr">max_filter</code>-1)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_LocName_Mandata_or_SerData</code></td>
                <td>Variable size</td>
                <td>A character string for manufacturer data.<br/>
                  <br/>
                  Notes:<br/>
                  <ul>
                    <li>Currently the max number of characters in a local name
                    string is 29</li>
                    <li>Not applicable when action is "Clear" (0x2)</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_ManData_Mask</code></td>
                <td>Variable size</td>
                <td>The manufacture data mask to add to the list. It should
                  have the same length as
                  <code translate="no" dir="ltr">APCF_LocName_or_ManData_or_SerData</code>.</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x06 - APCF Manufacturer Data</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>Echo back command's <code translate="no" dir="ltr">APCF_Action</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Number of free entries still available in the Manufacturer
                  Data table</td>
              </tr>
            </table>

          <h4 id="le_apcf_command-service_data_sub_cmd">LE_APCF_Command:
            service_data_sub_cmd</h4>
            <p>This subcommand is used to add or delete a service data string
            or to clear the service data string list for on-chip filtering.</p>
            <p>Sub OCF: 0x07</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>0x00 - Add<br/>
                  0x01 - Delete<br/>
                  0x02 - Clear<br/>
                  Delete will delete the specified service data string in the
                  specified filter.<br/>
                  Clear will clear all the service data strings in the specified
                  filter.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
                <td>1 octet</td>
                <td>Filter Index (0, <code translate="no" dir="ltr">max_filter</code>-1)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_LocName_Mandata_or_SerData</code></td>
                <td>Variable size</td>
                <td>A character string for service data.<br/>
                  <br/>
                  Notes:<br/>
                  <ul>
                    <li>Currently the max number of characters in a local name
                    string is 29</li>
                    <li>Not applicable when action is "Clear" (0x2)</li>
                  </ul>
                </td>
              </tr>
              <tr>
                  <td><code translate="no" dir="ltr">APCF_LocName_Mandata_or_SerData_Mask</code></td>
                  <td>Variable size</td>
                  <td>The service data mask to add to the list. It should have
                    the same length as
                    <code translate="no" dir="ltr">APCF_LocName_or_ManData_or_SerData.</code></td>
              </tr>
            </table>
            <p>A Command Complete event will be generated for this command.</p>
            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_opcode</code></td>
                <td>1 octet</td>
                <td>0x07 - APCF Service Data</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_Action</code></td>
                <td>1 octet</td>
                <td>Echo back command's <code translate="no" dir="ltr">APCF_Action</code></td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">APCF_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Number of free entries still available for Service Data
                table</td>
              </tr>
            </table>

      <h2 id="controller-activity-and-energy-information-command">Controller
        activity and energy information command</h2>
        <p>The objective of this information is for higher host system
        functions to analyze the total activities of all components, including
        the BT controller and its macro state, in conjunction with what is
        happening in the apps and framework. To do this, the following
        information is required from the BT stack and the controller: </p>
        <ul>
          <li>BT stack: Reporting the current macro-operational state of the
            controller</li>
          <li>Firmware: Reporting aggregate activity and
            energy information</li>
        </ul>
        <p>BT host stack macro states, as determined at the user level:</p>
        <ul>
          <li>Idle: [page scan, LE advt, inquiry scan]</li>
          <li>Scan: [paging/inquiry/trying to connect]</li>
          <li>Active: [ACL link on, SCO link ongoing, sniff mode]</li>
        </ul>
        <p>The activities that the controller keeps track of over its life are
        Tx time, Rx time, idle time, and total energy consumed. They are
        cleared when read from the host.</p>

        <h3 id="le_get_controller_activity_energy_info">
        LE_Get_Controller_Activity_Energy_Info</h3>
        <p>This is a vendor-specific command.</p>
        <p>OCF: 0x159</p>
        <table>
          <tr>
            <th>Sub-command parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td></td>
            <td> NA</td>
            <td>Empty command params</td>
          </tr>
        </table>
        <p>A Command Complete event will be generated for this command.</p>
        <table>
          <tr>
            <th>Return parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">Status</code></td>
            <td>1 octet</td>
            <td>Command Complete status</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">total_tx_time_ms</code></td>
            <td>4 octets</td>
            <td>Total time performing Tx</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">total_rx_time_ms</code></td>
            <td>4 octets</td>
            <td>Total time performing Rx</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">total_idle_time_ms</code></td>
            <td>4 octets</td>
            <td>Total time in idle (non-sleep low power states)</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">total_energy_used</code></td>
            <td>4 octets</td>
            <td>Total energy used [product of current (mA), voltage (V) and
              time (ms)]</td>
          </tr>
        </table>

      <h2 id="le-extended-set-scan-parameters-command">LE extended set scan
        parameters command</h2>
        <p>This command can be used to enable a larger scan window and interval
        in the controller. Per the BT Core 5.1 Specification, a scan window and
        interval have an upper bound limit of 10.24 seconds, which hampers
        applications' longer scan intervals beyond 10.24 seconds.</p>
        <p>Base reference: BT Core 5.1 Specification, page 1331 (LE Set Scan
        Parameters Command)</p>
        <p>OCF: 0x15A</p>
        <table>
          <tr>
            <th>Command Parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">LE_Ex_Scan_Type</code></td>
            <td>1 octet</td>
            <td>0x00 - Passive scanning. No <code translate="no" dir="ltr">SCAN_REQ</code> packets shall
              be sent (default).<br/>
              0x01 - Active scanning.
              <code translate="no" dir="ltr">SCAN_REQ</code> packets may be sent.</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">LE_Ex_Scan_Interval</code></td>
            <td>4 octets</td>
            <td>Defined as the time interval from when the Controller started
              its last LE scan until it began the subsequent LE scan.<br/>
              Range: 0x0004 to 0x00FFFFFF<br/>
              Default: 0x0010 (10 ms)<br/>
              Time = N * 0.625 ms<br/>
              Time range: 2.5 ms to 10442.25 seconds</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">LE_Ex_Scan_Window</code></td>
            <td>4 octets</td>
            <td>The duration of the LE scan. <code translate="no" dir="ltr">LE_Scan_Window</code>
              shall be less than or equal to <code translate="no" dir="ltr">LE_Scan_Interval</code>.
              <br/>
              Range: 0x0004 to 0xFFFF<br/>
              Default: 0x0010 (10 ms)<br/>
              Time = N * 0.625 ms<br/>
              Time Range: 2.5 ms to 40.95 seconds</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">Own_Address_Type</code></td>
            <td>1 octet</td>
            <td>0x00 - Public Device Address (default)<br/>
              0x01 - Random Device Address</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">LE_Ex_Scan_Filter_Policy</code></td>
            <td></td>
            <td>0x00 - Accept all advertisement packets (default).
              Directed advertising packets which are not addressed for this
              device shall be ignored.<br/>
              0x01 - Ignore advertisement packets from devices not
              in the White List Only list. Directed advertising packets which
              are not addressed for this device shall be ignored.</td>
          </tr>
        </table>
        <p>A Command Complete event will be generated for this command.</p>
        <table>
          <tr>
            <th>Return parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">Status</code></td>
            <td>1 octet</td>
            <td>Command Complete status</td>
          </tr>
        </table>

      <h2 id="get-controller-debug-info-command">
        Get controller debug info command
      </h2>

        <p>
          The objective of this information element is to acquire controller
          debug information by a host, in binary form, for post-processing and
          analysis. This helps debug on-field issues and provides engineers with
          a toolkit to log information for analysis. A Controller can provide the
          information when requested by a host via the event (Controller Debug
          Info sub-event) or autonomously when desired by the controller.
          Example uses could be to report firmware state information, crash dump
          information, logging information, etc.
        </p>

        <p>OCF: 0x15B</p>

        <table>
          <tr>
            <th>Command parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td></td>
            <td>N/A</td>
            <td>Empty command parameter list</td>
          </tr>
        </table>
        <p>A Command Complete event will be generated for this command.</p>
        <table>
          <tr>
            <th>Return parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td>Status</td>
            <td>1 octet</td>
            <td>Command Complete status</td>
          </tr>
        </table>

    <h2 id="a2dp-hardware-offload-support">A2DP Hardware Offload Support</h2>

      <p>
        The A2DP Offload feature supports the offload of the A2DP audio
        encoding process to an audio processor attached to the BT Controller.
        The encoded audio data stream passes directly from the Audio processor
        to the BT Controller without the BT host’s involvement. The BT Host is
        still responsible for the configuration and control of the A2DP session.
      </p>

      <p>
        OCF: 0x15D
      </p>

      <h3 id="start-a2dp-offload">Start A2DP Offload</h3>

        <p>Sub OCF: 0x01</p>

        <p>
          Use this command both to configure the A2DP Offload process and to
          start the A2DP stream.
        </p>

        <table>
          <tr>
            <th>Command parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td>Codec</td>
            <td>4 octets</td>
            <td>Specifies Codec type<br />
              0x01 - SBC<br />
              0x02 - AAC<br />
              0x04 - APTX<br />
              0x08 - APTX HD<br />
              0x10 - LDAC
            </td>
          </tr>
          <tr>
            <td>Max_Latency</td>
            <td>2 octets</td>
            <td>Max Latency Allowed (in ms). A value of zero disables flush.</td>
          </tr>
          <tr>
            <td>SCMS-T_Enable</td>
            <td>2 octets</td>
            <td>Octet 0: Flag that enables addition of SCMS-T header.
              <ul>
                <li>0x00 - SCMS-T Header not included.</li>
                <li>0x01 - SCMS-T Header included.</li>
              </ul>
              <p>
                Octet 1: Value for the SCMS-T header, when it’s enabled.
              </p>
            </td>
          </tr>
          <tr>
            <td>Sampling_Frequency</td>
            <td>4 octets</td>
            <td>0x01 - 44100 Hz<br />
              0x02 - 48000 Hz<br />
              0x04 - 88200 Hz<br />
              0x08 - 96000 Hz
            </td>
          </tr>
          <tr>
            <td>Bits_Per_Sample</td>
            <td>1 octet
            </td>
            <td>0x01 - 16 bits per sample<br />
              0x02 - 24 bits per sample<br />
              0x04 - 32 bits per sample
            </td>
          </tr>
          <tr>
            <td>Channel_Mode</td>
            <td>1 octet</td>
            <td>0x01 - Mono<br />
              0x02 - Stereo
            </td>
          </tr>
          <tr>
            <td>Encoded_Audio_Bitrate</td>
            <td>4 octets</td>
            <td>The encoded audio bitrate in bits per second second.<br />
              0x00000000 - The audio bitrate is not
              specified&hairsp;/&hairsp;unused.<br />
              0x00000001 - 0x00FFFFFF - Encoded audio bitrate in
              bits per second.<br />
              0x01000000 - 0xFFFFFFFF - Reserved.
            </td>
          </tr>
          <tr>
            <td>Connection_Handle</td>
            <td>2 octets</td>
            <td>Connection Handle of A2DP connection being configured</td>
          </tr>
          <tr>
            <td>L2CAP_Channel_ID</td>
            <td>2 octets</td>
            <td>L2CAP Channel ID to be used for this A2DP connection</td>
          </tr>
          <tr>
            <td>L2CAP_MTU_Size</td>
            <td>2 octets</td>
            <td>Maximum size of L2CAP MTU containing encoded audio packets</td>
          </tr>
          <tr>
            <td>Codec_Information</td>
            <td>32 octets</td>
            <td>Codec-specific Information.
              <p><strong>SBC Codec:</strong></p>
              <p>
                Refer to SBC Codec specific information elements in A2DP v1.3.<br />
                Octet 0: Block length | Subbands | Allocation Method<br />
                Octet 1: Minimum Bitpool value<br />
                Octet 2: Maximum Bitpool value<br />
                Octet 3: Sampling Frequency | Channel Mode<br />
                Octet 4-31: reserved
              </p>
              <p><strong>AAC Codec:</strong></p>
              <p>
                Refer to AAC Codec specific information elements in A2DP v1.3<br />
                Octet 0: Object Type<br />
                Octet 1; b7: VBR<br />
                Octet 2-31: reserved
              </p>
              <p>
                <strong>LDAC Codec:</strong>
              </p>
              <p>
                Octet 0-3: Vendor ID<br />
                0x0000012D
              </p>
              <p>
                Octet 4-5: Codec ID<br />
                0x00AA - LDAC<br />
                All other values are reserved
              </p>
              <p>
                Octet 6: Bitrate Index:<br />
                0x00 - High<br />
                0x01 - Mid<br />
                0x02 - Low<br />
                0x03 - 0x7E - Reserved<br />
                0x7F - ABR (Adaptive Bit Rate)<br />
                0x80 - 0xFF - Reserved
              </p>
              <p>
                Octet 7: L2DC Channel Mode<br />
                0x01 - Stereo<br />
                0x02 - Dual<br />
                0x04 - Mono<br />
                Others are reserved
              </p>
              <p>
                Octet 8-31: reserved
              </p>
              <p>
                <strong>All other codecs:</strong>
              </p>
              <p>
                Octet 0-31: reserved
              </p>
            </td>
          </tr>
        </table>

        <p>
          A Command Complete event will be generated for this command.
        </p>

        <table>
          <tr>
            <th>Return parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td>Status</td>
            <td>1 octet</td>
            <td>Command Complete status</td>
          </tr>
          <tr>
            <td>Sub_Opcode</td>
            <td>1 octet</td>
            <td>0x0­- Start A2DP Offload</td>
          </tr>
        </table>

      <h3 id="stop-a2dp-offload">Stop A2DP Offload</h3>

        <p>Sub OCF: 0x02</p>

        <p>This command is used to stop the A2DP Offload stream.</p>

        <table>
          <tr>
            <th>Command parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td></td>
            <td>N/A</td>
            <td>Empty command parameter list.</td>
          </tr>
        </table>

        <p>No parameters are defined for this command.</p>

        <p>A Command Complete event will be generated for this command.</p>

        <table>
          <tr>
            <th>Return parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td>Status</td>
            <td>1 octet</td>
            <td>Command Complete status</td>
          </tr>
          <tr>
            <td>Sub_Opcode</td>
            <td>1 octet</td>
            <td>0x02 - Stop A2DP Offload</td>
          </tr>
        </table>

    <h2 id="bluetooth-quality-report-command">Bluetooth Quality Report command</h2>

      <p>
        The BT Quality Report command feature starts the mechanism in the Bluetooth
        controller to report Bluetooth Quality events to the host. You can enable
        four options:
      </p>

      <ul>
        <li>
          Quality Monitoring Mode: The controller periodically sends a BT Quality
          Report sub-event to the host.
        </li>
        <li>
          Approaching LSTO: If no packets are received from the connected BT device
          for longer than half of the Link Supervision TimeOut (LSTO) value, the
          controller reports an Approaching LSTO event to the host.
        </li>
        <li>
          A2DP Audio Choppy: When the controller detects factors that cause choppy
          audio, the controller reports an A2DP Audio Choppy event to the host.
        </li>
        <li>
          (e)SCO Voice Choppy: When the controller detects factors that cause choppy
          voice, the controller reports an (e)SCO Voice Choppy event to the host.
        </li>
      </ul>

      <p>OCF: 0x15E</p>

      <table>
        <tr>
          <th>Command parameter</th>
          <th>Size</th>
          <th>Purpose</th>
        </tr>
        <tr>
          <td>BQR_Report_Action</td>
          <td>1 octet</td>
          <td>
            Action to add / delete reporting of quality event(s) set in
            BQR_Quality_Event_Mask parameter, or clear all.
            <p>
              0x00 - Add<br />
              0x01 - Delete<br />
              0x02 - Clear
            </p>
            <p>
              Delete will clear specific quality event(s) reporting.<br />
              Clear will clear all quality events reporting
              (BQR_Quality_Event_Mask parameter can be ignored).
            </p>
          </td>
        </tr>
        <tr>
          <td>BQR_Quality_Event_Mask</td>
          <td>4 octets</td>
          <td>Bit masks for the selected quality event reporting.
            <p>
              Bit 0: Set to enable quality monitoring mode.<br />
              Bit 1: Set to enable Approaching LSTO event.<br />
              Bit 2: Set to enable A2DP Audio Choppy event.<br />
              Bit 3: Set to enable (e)SCO Voice Choppy event.<br />
              Bit 4 ~ 31: Reserved.
            </p>
          </td>
        </tr>
        <tr>
          <td>BQR_Minimum_Report_Interval</td>
          <td>2 octets</td>
          <td>
            Define the minimum time interval of quality event reporting for the
            selected quality event(s). The controller Firmware should not report
            the next event within the defined time interval. The interval setting
            shall be respective and dedicated for the quality event(s) which are
            being added.
            <p>
              Unit: ms<br />
              Default: 0 (No limitation for the interval.)<br />
              Range: 0 ~ 65535 ms
          </td>
        </tr>
      </table>

      <p>
        A Command Complete event will be generated for this command.
      </p>

      <table>
        <tr>
          <th>Return parameter</th>
          <th>Size</th>
          <th>Purpose</th>
        </tr>
        <tr>
          <td>Status</td>
          <td>1 octet</td>
          <td>Command Complete status</td>
        </tr>
        <tr>
          <td>Current_Quality_Event_Mask</td>
          <td>4 octets</td>
          <td>Indicates current bit mask setting.<br />
            Bit 0: Quality monitoring mode is enabled.<br />
            Bit 1: Approaching LSTO event reporting is enabled.<br />
            Bit 2: A2DP Audio Choppy event reporting is enabled.<br />
            Bit 3: (e)SCO Voice Choppy event reporting is enabled.<br />
            Bit 4 ~ 31: Reserved.
          </td>
        </tr>
      </table>


    <h2 id="hci-event-vendor-specific">HCI event (vendor-specific)</h2>
        <p>Vendor-specific HCI events are required in some cases. Refer to
        Figure 5.4 on page 776 of the BT Core 5.1 Specification. Event
        parameter 0 will always contain the first sub-event code, based on
        which the rest of the HCI event is decoded.</p>
        <table>
          <tr>
            <th>Event Parameter</th>
            <th>Size</th>
            <th>Purpose</th>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">HCI_vendor_specific_event_code</code></td>
            <td>1 octet</td>
            <td>0xFF</td>
          </tr>
          <tr>
            <td><code translate="no" dir="ltr">sub_event_code</code></td>
            <td>1 octet</td>
            <td>A sub-event code will be 1 octet in size, the byte immediately
              following Parameter Length in the HCI event packet.</td>
          </tr>
        </table>

        <h3 id="storage-threshold-breach-subevent">Storage threshold breach
          sub-event</h3>
          <p>This event indicates that the storage threshold has been breached.
          </p>
          <p>Sub-event code = 0x54</p>
          <table>
            <tr>
              <th>Sub-event Parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td>None</td>
              <td></td>
              <td></td>
            </tr> </table>

        <h3 id="le-multi-advertising-state-change-sub-event">LE
          multi-advertising state change sub-event</h3>

          <p>This event indicates that an advertising instance has changed its
          state. At this time, this event is only used to indicate which
          advertising instance was stopped as a result of a connection.</p>
          <p>Sub-event code = 0x55</p>
          <table>
            <tr>
              <th>Sub-event parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Advertising_instance</code></td>
              <td>1 octet</td>
              <td>Identifies the specific advertising instance<br/>
                Valid values are 0 through <code translate="no" dir="ltr">max_advt_instances</code>-1
              </td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">State_Change_Reason</code></td>
              <td>1 octet</td>
              <td>0x00: Connection received</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Connection_handle</code></td>
              <td>2 octets</td>
              <td>Identifies the connection that caused the <code translate="no" dir="ltr">advt</code>
                instance to be disabled (0xFFFF if invalid)</td>
            </tr>
          </table>

        <h3 id="le-advertisement-tracking-sub-event">LE advertisement tracking
          sub-event</h3>
          <p>This event indicates when an advertiser is found or lost.</p>
          <p>Sub event code = 0x56</p>
          <table>
            <tr>
              <th>Sub-event Parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">APCF_Filter_Index</code></td>
              <td>1 octet</td>
              <td>Filter Index (0, <code translate="no" dir="ltr">max_filter</code>-1)</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Advertiser_State</code></td>
              <td>1 octet</td>
              <td>0x00: Advertiser found<br/>
                0x01: Advertiser lost</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Advt_Info_Present</code></td>
              <td>1 octet</td>
              <td>0x00: Advertiser information (<code translate="no" dir="ltr">Advt_Info</code>)
                present<br/>
                0x01: Advertiser information (<code translate="no" dir="ltr">Advt_Info</code>) not
                present</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Advertiser_Address</code></td>
              <td>6 octets</td>
              <td>Public or random address</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Advertiser_Address_Type </code></td>
              <td>1 octet</td>
              <td>0x00: Public address<br/>
                0x01: Random address</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Advt_Info</code></td>
              <td></td>
              <td><code translate="no" dir="ltr">Tx_Pwr[0]</code>: 1 octet<br/>
                <code translate="no" dir="ltr">RSSI[0]</code>: 1 octet<br/>
                <code translate="no" dir="ltr">Timestamp[0]</code>: 2 octets<br/>
                <code translate="no" dir="ltr">Adv packet_len[0]</code>: 1 octet<br/>
                <code translate="no" dir="ltr">Adv_packet[0]</code>:
                <code translate="no" dir="ltr">Adv_packet_len</code> octets<br/>
                <code translate="no" dir="ltr">Scan_data_resp_len[0]</code>: 1 octet<br/>
                <code translate="no" dir="ltr">Scan_data_resp[0]</code>:
                <code translate="no" dir="ltr">Scan_data_resp</code> octets</td>
            </tr>
          </table>

        <h3 id="controller-debug-info-sub-event">Controller debug info
          sub-event</h3>
          <p>This event is used by a Controller to provide binary debug
          information to a host.</p>
          <p>Sub-event code = 0x57</p>
          <table>
            <tr>
              <th>Sub-event Parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">debug_block_byte_offset_start</code></td>
              <td>2 octets</td>
              <td>Debug block byte offset from the start</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">last_block</code></td>
              <td>1 octet</td>
              <td>0x00: More debug data present<br/>
                0x01: Last binary block; no more debug data</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">cur_pay_load_sz</code></td>
              <td>2 octets</td>
              <td>Binary block size in a current event</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Debug_Data</code></td>
              <td>Variable</td>
              <td>Debug data of <code translate="no" dir="ltr">cur_payload_sz</code></td>
            </tr>
          </table>

        <h3 id="bluetooth-quality-report-sub-event">
          Bluetooth Quality Report sub-event
        </h3>

          <p>
            This event indicates that a Bluetooth
            audio&hairsp;/&hairsp;voice&hairsp;/&hairsp;link quality event happened.
          </p>

          <p>Sub-event code = 0x58</p>

          <table>
            <tr>
              <th>Sub-event Parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td>Quality_Report_Id</td>
              <td>1 octet</td>
              <td>
                0x01: Quality reporting on the monitoring mode.<br />
                0x02: Approaching LSTO.<br />
                0x03: A2DP Audio Choppy.<br />
                0x04: (e)SCO Voice Choppy.<br />
                0x05 ~ 0xFF: Reserved.
              </td>
            </tr>
            <tr>
              <td>Packet_Types</td>
              <td>1 octet</td>
              <td>
                0x01: ID<br />
                0x02: NULL<br />
                0x03: POLL<br />
                0x04: FHS<br />
                0x05: HV1<br />
                0x06: HV2<br />
                0x07: HV3<br />
                0x08: DV<br />
                0x09: EV3<br />
                0x0A: EV4<br />
                0x0B: EV5<br />
                0x0C: 2-EV3<br />
                0x0D: 2-EV5<br />
                0x0E: 3-EV3<br />
                0x0F: 3-EV5<br />
                0x11: DH1<br />
                0x12: DM3<br />
                0x13: DH3<br />
                0x14: DM5<br />
                0x15: DH5<br />
                0x16: AUX1<br />
                0x17: 2-DH1<br />
                0x18: 2-DH3<br />
                0x19: 2-DH5<br />
                0x1A: 3-DH1<br />
                0x1B: 3-DH3<br />
                0x1C: 3-DH5<br />
                0x1D ~ 0xFF: Reserved.
              </td>
            </tr>
            <tr>
              <td>Connection_Handle</td>
              <td>2 octets</td>
              <td>Connection Handle.</td>
            </tr>
            <tr>
              <td>Connection_Role</td>
              <td>1 octet</td>
              <td>Performing Role for the connection.<br />
                0x00: Master<br />
                0x01: Follower<br />
                0x02 ~ 0xFF: Reserved.
              </td>
            </tr>
            <tr>
              <td>TX_Power_Level</td>
              <td>1 octet</td>
              <td>Current transmit power level for the specified Connection_Handle.
                <p>This value shall be the same as the controller's responding to
                  the HCI_Read_Transmit_Power_Level HCI command.</p>
              </td>
            </tr>
            <tr>
              <td>RSSI</td>
              <td>1 octet</td>
              <td>[in dBm]
                <p>
                  Received Signal Strength Indication (RSSI) value for the
                  specified Connection_Handle.<br />
                  This value shall be an absolute receiver signal strength value.<br />
                  Range: -127 to +20
                </p>
              </td>
            </tr>
            <tr>
              <td>SNR</td>
              <td>1 octet</td>
              <td>[in dB]
                <p>
                  Signal-to-Noise Ratio (SNR) value for the specified
                  Connection_Handle.<br />
                  The controller shall provide the average SNR of all the
                  channels currently used by the link currently.
                </p>
              </td>
            </tr>
            <tr>
              <td>Unused_AFH_Channel_Count</td>
              <td>1 octet</td>
              <td>Indicates the number of unused channels in AFH_channel_map.<br />
                0x4F ~ 0xFF: Reserved.
              </td>
            </tr>
            <tr>
              <td>AFH_Select_Unideal_Channel_Count</td>
              <td>1 octet</td>
              <td>
                Indicates the number of the channels which are interfered and have
                bad quality, but they are still selected for AFH.<br />
                The minimum number of channels allowed by the Bluetooth specification
                is 20, so even if all 79 channels are interfered and have bad quality,
                the controller still needs to choose at least 20 channels for AFH.
              </td>
            </tr>
            <tr>
              <td>LSTO</td>
              <td>2 octets</td>
              <td>Current Link Supervision Timeout Setting.<br />
                Time = N * 0.625 ms<br />
                Time Range: 0.625 ms to 40.9 s
              </td>
            </tr>
            <tr>
              <td>Connection_Piconet_Clock</td>
              <td>4 octets</td>
              <td>Piconet Clock for the specified Connection_Handle.<br />
                This value shall be the same as the controller's responding to
                HCI_Read_Clock HCI command with parameter "Which_Clock" of 0x01
                (Piconet Clock).<br />
                Unit: N * 0.3125 ms (1 Bluetooth Clock)
              </td>
            </tr>
            <tr>
              <td>Retransmission_Count</td>
              <td>4 octets</td>
              <td>The number of retransmissions since the last event.<br />
                This count shall be reset after reporting to the host.
              </td>
            </tr>
            <tr>
              <td>No_RX_Count</td>
              <td>4 octets</td>
              <td>No RX count since the last event.<br />
                The count increases when no packet is received at the scheduled
                time slot or the received packet is corrupted.<br />
                This count shall be reset after reporting to the host.
              </td>
            </tr>
            <tr>
              <td>NAK_Count</td>
              <td>4 octets</td>
              <td>NAK (Negative Acknowledge) count since the last event.<br />
                This count shall be reset after reporting to the host.
              </td>
            </tr>
            <tr>
              <td>Last_TX_ACK_Timestamp</td>
              <td>4 octets</td>
              <td>Timestamp of last TX ACK. It is based on the Bluetooth Clock
                of the piconet master (CLK).<br />
                Unit: N * 0.3125 ms (1 Bluetooth Clock)
              </td>
            </tr>
            <tr>
              <td>Flow_Off_Count</td>
              <td>4 octets</td>
              <td>The number of times the controller receives Flow-off (STOP)
                since the last event.<br />
                This count shall be reset after reporting to the host.
              </td>
            </tr>
            <tr>
              <td>Last_Flow_On_Timestamp</td>
              <td>4 octets</td>
              <td>Timestamp of last Flow-on (GO). It is based on the Bluetooth Clock
                of the piconet master (CLK).<br />
                Unit: N * 0.3125 ms (1 Bluetooth Clock)
              </td>
            </tr>
            <tr>
              <td>Buffer_Overflow_Bytes</td>
              <td>4 octets</td>
              <td>[in Byte]
                <p>Buffer overflow count since the last event.<br />
                  The controller counts how many bytes of data are dropped.<br />
                  This count shall be reset after reporting to host.
                </p>
              </td>
            </tr>
            <tr>
              <td>Buffer_Underflow_Bytes</td>
              <td>4 octets</td>
              <td>[in Byte]
                <p>
                  Buffer underflow count since the last event.<br />
                  This count shall be reset after reporting to host.
                </p>
              </td>
            </tr>
            <tr>
              <td>Vendor Specific Parameter</td>
              <td>(Parameter Total Length - 48) * octets</td>
              <td>For the controller vendor to obtain more vendor specific parameters.</td>
            </tr>
          </table>

    <h2 id="multi-advertiser-support">Multi-advertiser support</h2>

      <aside class="warning">
        <strong>Warning:</strong> The
        <a href="#multi-advertiser-support">Multi-advertiser support</a> content
        is deprecated in the Google feature spec v0.98 and higher. Use the
        standard in the Bluetooth Core 5.0 Specification instead.
      </aside>

        <p>The objectives of multi-advertiser support are the following:</p>

        <ul>
          <li>Ability to support multiple advertisements
            (<code translate="no" dir="ltr">max_advt_instances</code>)</li> <li>Different transmit powers
            to allow for a varying range</li> <li>Different advertising
            content</li>
          <li>An individualized response for each advertiser</li>
          <li>Privacy (non-trackable) for each advertiser</li>
          <li>Connectable</li>
        </ul>

        <p>To keep this specification close to existing standards, the
        following vendor-specific commands are provided. They are derived from
        the Bluetooth Core 4.1 Specification.</p>

        <h3 id="le_multi_advt_command">LE_Multi_Advt_Command</h3>
          <p>OCF: 0x154</p>

          <table>
            <tr>
              <th>Command parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Multi_advt_opcode</code></td>
              <td>1 octet</td>
              <td>0x01 - <code translate="no" dir="ltr">Set_Advt_Param_Multi_Sub_Cmd</code><br/>
                0x02 - <code translate="no" dir="ltr">Set_Advt_Data_Multi_Sub_Cmd</code><br/>
                0x03 - <code translate="no" dir="ltr">Set_Scan_Resp_Data_Multi_Sub_Cmd</code><br/>
                0x04 - <code translate="no" dir="ltr">Set_Random_Addr_Multi_Sub_Cmd</code><br/>
                0x05 - <code translate="no" dir="ltr">Set_Advt_Enable_Multi_Sub_Cmd</code></td>
            </tr>
          </table>

          <p>A Command Complete event will be generated for this command.</p>

          <table>
            <tr>
              <th>Return parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Status</code></td>
              <td>1 octet</td>
              <td>Command Complete status</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Multi_advt_opcode</code></td>
              <td>1 octet</td>
              <td>0x01 - <code translate="no" dir="ltr">Set_Advt_Param_Multi_Command</code><br/>
                0x02 - <code translate="no" dir="ltr">Set_Advt_Data_Multi_Command</code><br/>
                0x03 - <code translate="no" dir="ltr">Set_Scan_Resp_Data_Multi_Command</code><br/>
                0x04 - <code translate="no" dir="ltr">Set_Random_Addr_Multi_Command</code><br/>
                0x05 - <code translate="no" dir="ltr">Set_Advt_Enable_Multi_Command</code></td>
            </tr>
          </table>

          <h4
            id="le_multi_advt_command-set_advt_param_multi_sub_cmd">
            LE_Multi_Advt_Command: Set_Advt_Param_Multi_Sub_Cmd</h4>

            <p>Base reference:
            Bluetooth Core 4.1 Specification, page 964 (LE Set Advertising
            Parameter Command)</p>

            <p>Sub OCF: 0x01</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Interval_Min</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Interval_Max</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Type</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Own_Address_Type</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Own_Address</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Direct_Address_Type</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Direct_Address</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Channel_Map</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Adverstising_Filter_Policy</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Instance</code></td>
                <td>1 octet</td>
                <td>Specifies the applicability of the above parameters to an
                  instance</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Tx_power</code></td>
                <td>1 octet</td>
                <td>Transmit_Power<br/>
                  Unit - in dBm (signed integer)<br/>
                  Range (-70 to +20)</td>
              </tr>
            </table>

            <p>The <code translate="no" dir="ltr">Own_Address</code> parameter could be a
            host-configured address at the time of setting up this
            multi-advertisement instance. This provides the ability to  have a
            resolvable private address at the time of the transmit of the first
            beacon. Advertisement on an instance will continue irrespective of
            the connection. The host BT stack could issue a command to start
            advertisement on an instance, post connection.</p>

            <p> A Command Complete event will be generated for this command as
            specified in the Bluetooth Core 4.1 Specification, per the above
            command. The controller will respond with a non-success (invalid
            parameter) code if the advertising instance or <code translate="no" dir="ltr">Tx_Power</code>
            parameters are invalid.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Multi_advt_opcode</code></td>
                <td>1 octet</td>
                <td>0x01 [<code translate="no" dir="ltr">Set_Advt_Param_Multi_Sub_Cmd]</code></td>
              </tr>
            </table>

          <h4
            id="le_multi_advt_command-set_advt_data_multi_sub_cmd">LE_Multi_Advt_Command:
            Set_Advt_Data_Multi_Sub_Cmd</h4>

            <p>Base reference: Bluetooth Core 4.1 Specification, page 969
              (LE Set Advertising Data Command)</p>

            <p>Sub OCF: 0x02</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Data_Length</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Data</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Instance</code></td>
                <td>1 octet</td>
                <td>Specifies the applicability of the above parameters to an
                  instance</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command as
            specified in the Bluetooth Core 4.1 Specification, per the above
            command. The controller will respond with a non-success code if the
            advertising instance or <code translate="no" dir="ltr">Tx_Power</code> parameters are
            invalid.  </p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Multi_advt_opcode</code></td>
                <td>1 octet</td>
                <td>0x02 [<code translate="no" dir="ltr">Set_Advt_Data_Multi_Sub_Cmd]</code></td>
              </tr>
            </table>

          <h4
            id="le_multi_advt_command-set_scan_resp_data_multi_sub_cmd">LE_Multi_Advt_Command:
            Set_Scan_Resp_Data_Multi_Sub_Cmd</h4>

            <p>Base reference: Bluetooth Core 4.1 Specification, page 970
            (LE Set Scan Response Data Command)</p>

            <p>Sub OCF: 0x03</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Scan_Response_Data_Length</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Scan_Response_Data</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Instance</code></td>
                <td>1 octet</td>
                <td>Specifies the applicability of the above
                parameters to an instance</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command as
            specified in the Bluetooth Core 4.1 Specification, per the above
            command. The controller will respond with a non-success code
            (invalid parameter) if the advertising instance or
            <code translate="no" dir="ltr">Tx_Power</code> parameters are invalid.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Multi_advt_opcode</code></td>
                <td>1 octet</td>
                <td>0x03 [<code translate="no" dir="ltr">Set_Scan_Resp_Data_Multi_Sub_Cmd]</code></td>
              </tr>
            </table>

          <h4
            id="le_multi_advt_command-set_random_addr_multi_sub_cmd">LE_Multi_Advt_Command:
            Set_Random_Addr_Multi_Sub_Cmd</h4>
            <p>Base reference: Bluetooth Core 4.1 Specification, page 963
              (LE Set Random Address Command)</p>

            <p>Sub OCF: 0x04</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Random Address</code></td>
                <td>Per spec</td>
                <td>Per spec</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Instance</code></td>
                <td>1 octet</td>
                <td>Specifies the applicability of the above parameters to an
                instance</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Multi_advt_opcode</code></td>
                <td>1 octet</td>
                <td>0x04 [<code translate="no" dir="ltr">Set_Random_Addr_Multi_Sub_Cmd]</code></td>
              </tr>
            </table>

          <h4
            id="le_multi_advt_command-set_advt_enable_multi_sub_cmd">LE_Multi_Advt_Command:
            Set_Advt_Enable_Multi_Sub_Cmd</h4>
            <p>Base reference: Bluetooth Core 4.1 Specification, page 971
              (LE Set Advertise Enable Command in that core specification)</p>

            <p>OCF: 0x05</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Enable</code></td>
                <td>1 octet</td>
                <td>A value of 1 means enable. Any other value means disable.</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Advertising_Instance</code></td>
                <td>1 octet</td>
                <td>Specifies the applicability of the above
                  parameters to an instance. Instance 0 means a standard HCI
                  instance.</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Multi_advt_opcode</code></td>
                <td>1 octet</td>
                <td>0x05 [<code translate="no" dir="ltr">Set_Advt_Enable_Multi_Sub_Cmd]</code></td>
              </tr>
            </table>

      <h2 id="offloaded-resolution-of-private-address">
        Offloaded resolution of private address
      </h2>

        <aside class="warning">
          <strong>Warning:</strong> The
          <a href="#offloaded-resolution-of-private-address">Offloaded
          resolution of private address</a> content is deprecated in the Google feature spec v0.98
          and higher. Use the standard in the Bluetooth Core 4.2 Specification instead.
        </aside>

        <p> This feature resolves a private address in the controller firmware
          or hardware, which provides the following benefits:
        </p>

        <ul>
          <li>Latency involved with the host in resolving a private
            address</li>
          <li>Saving power by refraining from waking up the host</li>
        </ul>

        <h3 id="le_set_rpa_timeout">LE_Set_RPA_Timeout</h3>
          <p>OCF: 0x15C</p>

          <table>
            <tr>
              <th>Command parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">LE_local_IRK</code></td>
              <td>16 octet</td>
              <td>The local device IRK used to generate the random resolvable
                address(es).</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">tRPA_min</code></td>
              <td>2 octets</td>
              <td>The minimum RPA generation timeout in seconds.
                The controller must generate new resolvable addresses
                for any advertising/scanning/connection events on or after this
                timeout.<br/>
                Valid range: 300-1800</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">tRPA_max</code></td>
              <td>2 octets</td>
              <td>The maximum RPA generation timeout in seconds.
                The controller must generate new resolvable addresses for
                any advertising/scanning/connection
                events on or before this timeout.<br/>
                Valid range: <code translate="no" dir="ltr">tRPA_min</code>-1800</td>
            </tr>
          </table>

          <table>
            <tr>
              <th>Return parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Status</code></td>
              <td>1 octet</td>
              <td>The status of the command.<br/>
                <br/>
                Suggested HCI status values:<br/>
                0x00 Success<br/>
                0x01 Unknown command (if not supported)<br/>
                0x12 Invalid command parameters (if any parameters are outside
              the given range)</td>
            </tr>
          </table>

        <h3 id="le_rpa_offload_command">LE_RPA_offload_Command</h3>
          <p>OCF: 0x155</p>

          <table>
            <tr>
              <th>Command parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">RPA_offload_opcode</code></td>
              <td>1 octet</td>
              <td>0x1 - Enable customer specific feature<br/>
                0x2 - Add IRK to the list<br/>
                0x3 - Remove IRK from the list<br/>
                0x4 - Clear IRK list<br/>
                0x5 - Read IRK list entry</td>
            </tr>
          </table>

          <p>A Command Complete event will be generated for this command.</p>

          <table>
            <tr>
              <th>Return parameter</th>
              <th>Size</th>
              <th>Purpose</th>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Status</code></td>
              <td>1 octet</td>
              <td>Command Complete status</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Event_RPA_offload_opcode</code></td>
              <td>1 octet</td>
              <td>0x1 - Enable customer specific feature<br/>
                0x2 - Add IRK to the list<br/>
                0x3 - Remove IRK from the list<br/>
                0x4 - Clear IRK list<br/>
                0x5 - Read IRK list entry</td>
            </tr>
          </table>

          <h4
            id="le_rpa_offload-enable_cust_specific_sub_command">LE_RPA_offload:
            Enable_cust_specific_sub_Command</h4>
            <p>Sub OCF: 0x01</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">enable_customer_specific_feature_set</code></td>
                <td>1 octet</td>
                <td>0x01 - Enable offloaded RPA feature<br/>
                  0x00 - Disable offloaded RPA feature</td>
              </tr>
            </table>

            <p>RPA offload is required to be enabled by the host, based on the
            chip capability. Refer to the
            <code translate="no" dir="ltr">LE_Get_Vendor_Capabilities_Command</code>. Each chip can have
            a varying <code translate="no" dir="ltr">max_irk_list_sz</code> in the firmware.</p>

            <p>A Command Complete event will be generated for this command.
            </p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Event_cust_specific_feature_opcode</code></td>
                <td>1 octet</td>
                <td>0x01 [Enable customer-specific feature]</td>
              </tr>
            </table>

          <h4 id="le_rpa_offload-add_irk_to_list_sub_command">LE_RPA_offload:
            Add_IRK_to_list_sub_Command</h4>
            <p>Sub OCF: 0x02</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_IRK</code></td>
                <td>16 octets</td>
                <td>LE IRK (1st byte LSB)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Address_Type</code></td>
                <td>1 octet</td>
                <td>0: Public address<br/>
                1: Random address</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_Device_Address</code></td>
                <td>6 octets</td>
                <td>Public or random address associated to the IRK (1st byte
                  LSB)</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Event_cust_specific_feature_opcode</code></td>
                <td>1 octet</td>
                <td>0x02 [Add IRK to the list]</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_IrkList_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Available IRL list entries after current operation</td>
              </tr>
            </table>

          <h4 id="le_rpa_offload-remove_irk_to_list_sub_command">LE_RPA_offload:
            Remove_IRK_to_list_sub_Command</h4>
            <p>Sub OCF: 0x03</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Address_Type</code></td>
                <td>1 octet</td>
                <td>0: Public address<br/>
                  1: Random address</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_Device_Address</code></td>
                <td>6 octets</td>
                <td>Public or random address that associates to the IRK</td>
              </tr>
            </table>

            <p>A Command Complete event will be generated for this command.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Event_cust_specific_feature_opcode</code></td>
                <td>1 octet</td>
                <td> 0x03 [Remove IRK from the list]</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_IrkList_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Available IRL list entries after current operation</td>
              </tr>
            </table>

          <h4 id="le_rpa_offload-clear_irk_list_sub_command">LE_RPA_offload:
            Clear_IRK_list_sub_Command</h4>
            <p>Sub OCF: 0x04</p>
            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td>None</td>
                <td></td>
                <td></td>
              </tr>
            </table>

            <p> A Command Complete event will be generated for this command.</p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Event_cust_specific_feature_opcode</code></td>
                <td>1 octet</td>
                <td>0x04 [Clear IRK List]</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_IrkList_AvailableSpaces</code></td>
                <td>1 octet</td>
                <td>Available IRL list entries after current
                  operation [<code translate="no" dir="ltr">max_irk_list_sz]</code></td>
              </tr>
            </table>

          <h4 id="le_rpa_offload-read_irk_list_sub_command">LE_RPA_offload:
            Read_IRK_list_sub_Command</h4>
            <p>Sub OCF: 0x05</p>

            <table>
              <tr>
                <th>Sub-command parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_read_IRK_list_entry-index</code></td>
                <td>1 octet</td>
                <td>Index of the  IRK list [0, <code translate="no" dir="ltr">max_irk_list_sz-1]</code></td>
              </tr>
            </table>

            <p> A Command Complete event will be generated for this command.
            </p>

            <table>
              <tr>
                <th>Return parameter</th>
                <th>Size</th>
                <th>Purpose</th>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Status</code></td>
                <td>1 octet</td>
                <td>Command Complete status</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">Event_cust_specific_feature_opcode</code></td>
                <td>1 octet</td>
                <td> 0x05 [Read IRK List Entry]</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_Read_IRK_List_entry</code></td>
                <td>1 octet</td>
                <td>Index of the IRK that the host wants to read back (maximum
                IRK list size is 32)</td>
              </tr>
              <tr>
                <td><code translate="no" dir="ltr">LE_IRK</code></td>
                <td>16 octets</td>
                <td>IRK value</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">Address_Type</code></td>
              <td>1 octet</td>
              <td>0: Public address<br/>
                1: Random address</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">LE_Device_Address</code></td>
              <td>6 octets</td>
              <td>Public or random address associated to the IRK</td>
            </tr>
            <tr>
              <td><code translate="no" dir="ltr">LE_Resolved_Private_Address</code></td>
              <td>6 octets</td>
              <td>Current resolved resolvable private address of this IRK</td>
            </tr>
            </table>
  
          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
                      
<div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../setup/community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
    <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>

  </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar                   ></devsite-snackbar>    <devsite-tooltip blocked-link></devsite-tooltip>
    <devsite-analytics>
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
        <script>
    (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/js/app_loader.js', '[7,"en",null,"../../js/devsite_app.html","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource","https://androidsource-dot-google-developers.gonglchuangl.net/",null,null,["/_pwa/androidsource/manifest.json","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"]]')
  </script>  </body>

<!-- Mirrored from source.android.google.cn/devices/bluetooth/hci_requirements by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 15:20:33 GMT -->
</html>