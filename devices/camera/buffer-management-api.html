<!doctype html>
<html       lang="en"      dir="ltr">
  
<!-- Mirrored from source.android.google.cn/devices/camera/buffer-management-api by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:57:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../../_pwa/androidsource/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/rebrand-app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/touchicon-180.png"><link rel="canonical" href="buffer-management-api.html">      
<title>Camera HAL3 Buffer Management APIs &nbsp;|&nbsp; Android Open Source Project</title>

<meta property="og:title" content="Camera HAL3 Buffer Management APIs &nbsp;|&nbsp; Android Open Source Project">


  <meta property="og:url" content="buffer-management-api.html">

  <meta property="og:locale" content="en">





  

  

    </head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        block-apix        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header keep-tabs-visible>
      









<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../setup.html"
   class="gc-analytics-event"
   title="Set up"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab >
          <a href="../../compatibility.html"
   class="gc-analytics-event"
   title="Design"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab >
          <a href="../../security.html"
   class="gc-analytics-event"
   title="Secure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab active>
          <a href="../../devices.html"
   class="gc-analytics-event"
   title="Develop"
   aria-label="Develop, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab >
          <a href="../tech.html"
   class="gc-analytics-event"
   title="Configure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search
            enable-suggestions
              family-name="Android Open Source Project"    tenant-name="Android Open Source Project"            >
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results" method="GET">
    <div class="devsite-search-container">
      <div class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons" aria-hidden="true"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

        <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>


                  <a class="devsite-header-link devsite-top-button button gc-analytics-event"
   href="http://android-review.googlesource.com/"
   data-category="Site-Wide Custom Events"
   data-label="Site header link">
  Go to code
</a>
        
              </div>    </div>  </div>
  <div class="devsite-collapsible-section
    ">
    <div class="devsite-header-background">
                        <div class="devsite-product-id-row">
            <div class="devsite-product-description-row">
                              <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../devices.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Lower Header"
              data-value="1"
          >
            Develop
      
  </a>
        </li>
  </ul>
                                        </div>
                                                                                    </div>
                                      <div class="devsite-doc-set-nav-row">
                              <devsite-tabs class="lower-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../../devices.html"
   class="gc-analytics-event"
   title="Overview"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Overview"
   >
  Overview
</a>

        </tab>
                        <tab >
          <a href="../audio.html"
   class="gc-analytics-event"
   title="Audio"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Audio"
   >
  Audio
</a>

        </tab>
                        <tab active>
          <a href="../camera.html"
   class="gc-analytics-event"
   title="Camera"
   aria-label="Camera, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Camera"
   >
  Camera
</a>

        </tab>
                        <tab >
          <a href="../tech/connect.html"
   class="gc-analytics-event"
   title="Connectivity"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Connectivity"
   >
  Connectivity
</a>

        </tab>
                        <tab >
          <a href="../graphics.html"
   class="gc-analytics-event"
   title="Graphics"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Graphics"
   >
  Graphics
</a>

        </tab>
                        <tab >
          <a href="../interaction.html"
   class="gc-analytics-event"
   title="Interaction"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Interaction"
   >
  Interaction
</a>

        </tab>
                        <tab >
          <a href="../media.html"
   class="gc-analytics-event"
   title="Media"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Media"
   >
  Media
</a>

        </tab>
                        <tab >
          <a href="../storage.html"
   class="gc-analytics-event"
   title="Storage"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Storage"
   >
  Storage
</a>

        </tab>
            </div>
</devsite-tabs>

        </div>
          </div>  </div></div>
  

  </devsite-header>      <devsite-book-nav scrollbars >
                  




<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">
  <a href="../../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
        <span class="devsite-product-name">
        <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
      </span>
    
</div>  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../devices.html"
          class="devsite-nav-title gc-analytics-event
            devsite-nav-active"
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                            <ul class="devsite-nav-responsive-tabs">
                                                                                                                      <li class="devsite-nav-item">
    <a href="../../devices.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview">
      <span class="devsite-nav-text" >Overview</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../audio.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Audio">
      <span class="devsite-nav-text" >Audio</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../camera.html"
     id="devsite-nav-forward"     class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Camera">
      <span class="devsite-nav-text" menu="_book">Camera</span>
        <span class="devsite-nav-icon material-icons" data-icon="forward" aria-hidden="true"
          menu="_book">
    </span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../tech/connect.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Connectivity">
      <span class="devsite-nav-text" >Connectivity</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../graphics.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Graphics">
      <span class="devsite-nav-text" >Graphics</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../interaction.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Interaction">
      <span class="devsite-nav-text" >Interaction</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../media.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Media">
      <span class="devsite-nav-text" >Media</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="../storage.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Storage">
      <span class="devsite-nav-text" >Storage</span>
        </a>
  </li>

                                  </ul>
                          </li>
                      <li class="devsite-nav-item">
                                <a href="../tech.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
          <div class="devsite-mobile-nav-bottom">
                            <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item"><a href="../camera.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Overview">Overview</span></a></li>
  <li class="devsite-nav-item"><a href="camera3.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Camera3">Camera3</span></a></li>
  <li class="devsite-nav-item"><a href="camera3_requests_hal.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="HAL Subsystem">HAL Subsystem</span></a></li>
  <li class="devsite-nav-item"><a href="camera3_metadata.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Metadata and Controls">Metadata and Controls</span></a></li>
  <li class="devsite-nav-item"><a href="camera3_3Amodes.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="3A Modes and State">3A Modes and State</span></a></li>
  <li class="devsite-nav-item"><a href="camera3_requests_methods.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Request Creation">Request Creation</span></a></li>
  <li class="devsite-nav-item"><a href="stream-config.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Stream Configurations">Stream Configurations</span></a></li>
  <li class="devsite-nav-item"><a href="camera3_error_stream.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Errors and Streams">Errors and Streams</span></a></li>
  <li class="devsite-nav-item"><a href="camera3_crop_reprocess.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Output and Cropping">Output and Cropping</span></a></li>
  <li class="devsite-nav-item"><a href="session-parameters.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Session Parameters">Session Parameters</span></a></li>
  <li class="devsite-nav-item"><a href="singleprod-multiconsum.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Single Producer, Multiple Consumer">Single Producer, Multiple Consumer</span></a></li>
  <li class="devsite-nav-item"><a href="buffer-management-api.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Camera HAL3 Buffer Management APIs">Camera HAL3 Buffer Management APIs</span></a></li>
  <li class="devsite-nav-item"><a href="heif.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="HEIF Imaging">HEIF Imaging</span></a></li>
  <li class="devsite-nav-item"><a href="motion-tracking.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Motion Tracking">Motion Tracking</span></a></li>
  <li class="devsite-nav-item"><a href="monochrome.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Monochrome Cameras">Monochrome Cameras</span></a></li>
  <li class="devsite-nav-item"><a href="multi-camera.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Multi-Camera Support">Multi-Camera Support</span></a></li>
  <li class="devsite-nav-item"><a href="external-usb-cameras.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="External USB Cameras">External USB Cameras</span></a></li>
  <li class="devsite-nav-item"><a href="versioning.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Version Support">Version Support</span></a></li>
          </ul>
                                                                                                                                                                            </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
            has-book-nav            has-toc>
          <devsite-toc class="devsite-nav"
            ></devsite-toc>
          <devsite-content>
                          

<article class="devsite-article">
  <article class="devsite-article-inner">        
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../../devices.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="2"
          >
            Develop
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../camera.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="3"
          >
            Camera
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

              <h1 class="devsite-page-title">Camera HAL3 Buffer Management APIs</h1>
    
    <devsite-toc class="devsite-nav" devsite-toc-embedded >
    </devsite-toc>

    <div class="devsite-article-body clearfix
      ">

              





























<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->



<p>Android 10 introduces optional
<a href="camera3.html">camera HAL3</a> buffer
management APIs that allow you
to implement buffer management logic to achieve different memory and capture
latency tradeoffs in camera HAL implementations.</p>

<p>The camera HAL requires N requests (where N is equal to the
<a href="https://developer.android.google.cn/reference/android/hardware/camera2/CaptureResult.html#REQUEST_PIPELINE_DEPTH" class="external">pipeline depth</a>)
queued in its pipeline, but it often doesn&#39;t require all N sets of
output buffers at the same time.</p>

<p>For example, the HAL might have eight requests queued in the pipeline, but it
only requires output buffers for the two requests in the last stages of the
pipeline. On devices running Android 9 and lower, the camera framework allocates
buffers when the request is queued in the HAL so there could be six sets of
buffers in the HAL that aren&#39;t in use. In Android 10,
the camera HAL3 buffer management APIs allow for the decoupling of the output
buffers to free up the six sets of buffers. This can lead to hundreds of
megabytes of memory savings on high-end devices and can also be beneficial for
low-memory devices.</p>

<p>Figure 1 shows a diagram of the camera HAL interface for devices running
Android 9 and lower. Figure 2 shows the camera HAL interface in Android
10 with
the camera HAL3 buffer management APIs implemented.</p>

<p><img src="images/buffer-management-9.png" alt="Buffer management in 9 or lower"></p>

<p><strong>Figure 1.</strong> Camera HAL interface in Android 9 and lower</p>

<p><img src="images/buffer-management-q.png" alt="Buffer management in Q"></p>

<p><strong>Figure 2.</strong> Camera HAL interface in Android 10
using the buffer management APIs</p>

<h2 id="implementing_the_buffer_management_apis">Implementing the buffer management APIs</h2>

<p>To implement the buffer management APIs, the camera HAL must:</p>

<ul>
<li>Implement HIDL
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/" class="external"><code translate="no" dir="ltr">ICameraDevice@3.5</code></a>.</li>
<li>Set the camera characteristics key
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/9ee5d7103c5c8e501ef7012122faad15a430e5d5/camera/metadata/3.4/types.hal#51" class="external"><code translate="no" dir="ltr">android.info.supportedBufferManagementVersion</code></a> 
to <code translate="no" dir="ltr">HIDL_DEVICE_3_5</code>.</li>
</ul>

<p>The camera HAL uses the
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/ICameraDeviceCallback.hal#57" class="external"><code translate="no" dir="ltr">requestStreamBuffers</code></a> 
and
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/ICameraDeviceCallback.hal#68" class="external"><code translate="no" dir="ltr">returnStreamBuffers</code></a> 
methods in
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/ICameraDeviceCallback.hal" class="external"><code translate="no" dir="ltr">ICameraDeviceCallback.hal</code></a> 
to request and return buffers. The HAL must also implement the
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/6a6fe0f47bb02e0d29c8dc4a9f909612a1c616ba/camera/device/3.5/ICameraDeviceSession.hal#98" class="external"><code translate="no" dir="ltr">signalStreamFlush</code></a> 
method in
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/ICameraDeviceSession.hal" class="external"><code translate="no" dir="ltr">ICameraDeviceSession.hal</code></a> 
to signal the camera HAL to return buffers.</p>
<aside class="note"><strong>Note:</strong><span> If the camera HAL implements these buffer management APIs on a device
running Android 9 and lower, the HAL is required to support the API contract
illustrated in Figure 1.</span></aside>
<h3 id="requeststreambuffers">requestStreamBuffers</h3>

<p>Use the
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/ICameraDeviceCallback.hal#57" class="external"><code translate="no" dir="ltr">requestStreamBuffers</code></a> 
method to request buffers from the camera framework. When using the camera HAL3
buffer management APIs, capture requests from the camera framework don&#39;t
contain output buffers, that is, the <code translate="no" dir="ltr">bufferId</code> field in
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/types.hal#428" class="external"><code translate="no" dir="ltr">StreamBuffer</code></a> 
is <code translate="no" dir="ltr">0</code>. Therefore, the camera HAL must use <code translate="no" dir="ltr">requestStreamBuffers</code> to request
buffers from the camera framework.</p>

<p>The <code translate="no" dir="ltr">requestStreamBuffers</code> method allows the caller to request multiple buffers
from multiple output streams in a single call, allowing for fewer HIDL IPC
calls. However, calls take more time when more buffers are requested at the
same time and this might negatively affect the total request-to-result latency.
Also, because calls into <code translate="no" dir="ltr">requestStreamBuffers</code> are serialized in the camera
service, it&#39;s recommended that the camera HAL use a dedicated high-priority
thread to request buffers.</p>

<p>If a buffer request fails, the camera HAL must be able to properly handle
nonfatal errors. The following list describes common reasons that buffer
requests fail and how they should be handled by the camera HAL.</p>

<ul>
<li><strong>App disconnects from the output stream:</strong>
This is a nonfatal error. The camera HAL should send
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/types.hal#583" class="external"><code translate="no" dir="ltr">ERROR_REQUEST</code></a> 
for any capture request
targeting a disconnected stream and be ready to process subsequent requests
normally.</li>
<li><strong>Timeout:</strong> This can occur when an app is busy doing
intensive processing while holding onto some buffers. The camera HAL should
send
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/types.hal#583" class="external"><code translate="no" dir="ltr">ERROR_REQUEST</code></a> 
for capture requests that can&#39;t be fulfilled due to a
timeout error and be ready to process subsequent requests normally.</li>
<li><strong>Camera framework is preparing a new stream configuration:</strong>
The camera HAL should wait until the next
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/ICameraDeviceSession.hal#167" class="external"><code translate="no" dir="ltr">configureStreams</code></a> 
call is complete before calling <code translate="no" dir="ltr">requestStreamBuffers</code> again.</li>
<li><strong>The camera HAL has reached its
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/types.hal#382" class="external">buffer limit</a> 
(the <code translate="no" dir="ltr">maxBuffers</code> field):</strong>
The camera HAL should wait
until it returns at least one buffer of the stream before calling
<code translate="no" dir="ltr">requestStreamBuffers</code> again.</li>
</ul>

<h3 id="returnstreambuffers">returnStreamBuffers</h3>

<p>Use the
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/ICameraDeviceCallback.hal#68" class="external"><code translate="no" dir="ltr">returnStreamBuffers</code></a> 
method to return extra buffers to the camera framework. The camera HAL normally
returns buffers to the camera framework through the
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/ICameraDeviceCallback.hal#109" class="external"><code translate="no" dir="ltr">processCaptureResult</code></a> 
method, but it can only account for capture requests that have been sent to the
camera HAL. With the <code translate="no" dir="ltr">requestStreamBuffers</code> method, it&#39;s possible for the
camera HAL implementation to retain more buffers than what has been requested by
the camera framework. This is when the <code translate="no" dir="ltr">returnStreamBuffers</code> method should be
used. If the HAL implementation never holds more buffers than requested, the
camera HAL implementation doesn&#39;t need to call the <code translate="no" dir="ltr">returnStreamBuffers</code>
method.</p>

<h3 id="signalstreamflush">signalStreamFlush</h3>

<p>The
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/6a6fe0f47bb02e0d29c8dc4a9f909612a1c616ba/camera/device/3.5/ICameraDeviceSession.hal#98" class="external"><code translate="no" dir="ltr">signalStreamFlush</code></a> 
method is called by the camera framework to notify the camera HAL to return all
buffers at hand. This is normally called when the camera framework is about to
call
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/ICameraDeviceSession.hal#167" class="external"><code translate="no" dir="ltr">configureStreams</code></a> 
and must drain the camera capture pipeline. Similar to the <code translate="no" dir="ltr">returnStreamBuffers</code>
method, if a camera HAL implementation doesn&#39;t hold more buffers than
requested, it&#39;s possible to have an empty implementation of this method.</p>

<p>After the camera framework calls
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/6a6fe0f47bb02e0d29c8dc4a9f909612a1c616ba/camera/device/3.5/ICameraDeviceSession.hal#98" class="external"><code translate="no" dir="ltr">signalStreamFlush</code></a>,
the framework stops sending new capture requests to the camera HAL until all
buffers have been returned to the camera framework. When all buffers are
returned, the <code translate="no" dir="ltr">requestStreamBuffers</code> method calls fail, and the camera
framework can continue its work in a clean state. The camera framework then
calls either the
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/ICameraDeviceSession.hal#167" class="external"><code translate="no" dir="ltr">configureStreams</code></a> 
or
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/ICameraDeviceSession.hal#245" class="external"><code translate="no" dir="ltr">processCaptureRequest</code></a> 
method. If the camera framework calls the <code translate="no" dir="ltr">configureStreams</code> method, the camera
HAL can start requesting buffers again after the <code translate="no" dir="ltr">configureStreams</code> call returns
successfully. If the camera framework calls the <code translate="no" dir="ltr">processCaptureRequest</code> method,
the camera HAL can start requesting buffers during the <code translate="no" dir="ltr">processCaptureRequest</code>
call.</p>

<p>The semantics are different for the <code translate="no" dir="ltr">signalStreamFlush</code> method and the
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/ICameraDeviceSession.hal#393" class="external"><code translate="no" dir="ltr">flush</code></a> 
method. When the <code translate="no" dir="ltr">flush</code> method is called, the HAL can abort pending capture
requests with
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/master/camera/device/3.2/types.hal#583" class="external"><code translate="no" dir="ltr">ERROR_REQUEST</code></a> 
to drain the pipeline as soon as possible. When
the <code translate="no" dir="ltr">signalStreamFlush</code> method is called, the HAL must finish all pending
capture requests normally and return all buffers to the camera framework.</p>

<p>Another difference between the <code translate="no" dir="ltr">signalStreamFlush</code> method and other methods is
that <code translate="no" dir="ltr">signalStreamFlush</code> is a <em>one-way</em> HIDL method, which means that the camera
framework might call into other blocking APIs before the HAL receives the
<code translate="no" dir="ltr">signalStreamFlush</code> call. This means that
the <code translate="no" dir="ltr">signalStreamFlush</code> method and other methods (specifically the
<code translate="no" dir="ltr">configureStreams</code> method) might arrive at the camera HAL in a different order
than the order they were called in the camera framework. To address this
asynchrony issue, the <code translate="no" dir="ltr">streamConfigCounter</code> field was added to
<code translate="no" dir="ltr">StreamConfiguration</code> and added as an argument to the <code translate="no" dir="ltr">signalStreamFlush</code>
method. The camera HAL implementation should use the <code translate="no" dir="ltr">streamConfigCounter</code>
argument to determine whether a <code translate="no" dir="ltr">signalStreamFlush</code> call arrives later than its
corresponding <code translate="no" dir="ltr">configureStreams</code> call. See Figure 3 for an example.</p>

<p><img src="images/handling-late-calls.png" alt="Handling calls that arrive late" width="500"> </p>

<p><strong>Figure 3.</strong> How the camera HAL should detect and handle signalStreamFlush
calls that arrive late</p>

<h2 id="behavior_changes_when_implementing_the_buffer_management_apis">Behavior changes when implementing the buffer management APIs</h2>

<p>When using the buffer management APIs to implement the buffer management logic,
consider the following possible behavior changes to the camera
and camera HAL implementation:</p>

<ul>
<li><p><strong>Capture requests arrive at the camera HAL faster and more
frequently:</strong> Without buffer management APIs, the camera framework requests
output buffers for each capture request before sending a capture request to
the camera HAL. When using the buffer management APIs, the camera framework
no longer needs to wait for buffers and can therefore send capture requests
to the camera HAL earlier.</p>

<p>Also, without buffer management APIs, the camera framework stops
sending capture requests if one of the output streams of the capture
request has reached the maximum number of buffers that the HAL can hold at
one time (this value is designated by the camera HAL in the
<code translate="no" dir="ltr">HalStream::maxBuffers</code> field in the return value of a <code translate="no" dir="ltr">configureStreams</code>
call). With the buffer management APIs, this throttling behavior no longer
exists and the camera HAL implementation must not accept
<code translate="no" dir="ltr">processCaptureRequest</code> calls when the HAL has too many capture requests
queued.</p></li>
<li><p><strong><code translate="no" dir="ltr">requestStreamBuffers</code> call latency varies significantly:</strong> There are
many reasons a <code translate="no" dir="ltr">requestStreamBuffers</code> call might take a longer time than
average. For example:</p>

<ul>
<li>For the first few buffers of a newly created stream, calls
can take longer because the device needs to allocate memory.</li>
<li>The expected latency increases in proportion to the number of
buffers requested in each call.</li>
<li>The app is holding buffers and is busy processing. This
can cause buffer requests to slow down or hit a timeout because of a
lack of buffers or a busy CPU.</li>
</ul></li>
</ul>

<h2 id="buffer_management_strategies">Buffer management strategies</h2>

<p>The buffer management APIs allow for different kinds of buffer management
strategies to be implemented. Some examples are:</p>

<ul>
<li><strong>Backward compatible:</strong> The HAL requests buffers for a capture request
during the <code translate="no" dir="ltr">processCaptureRequest</code> call. This strategy doesn&#39;t provide any
memory savings, but can serve as the first implementation of the buffer
management APIs, requiring very few code changes to the existing camera HAL.</li>
<li><strong>Maximized memory savings:</strong> The camera HAL only requests output buffers
immediately before one is needed to be filled. This strategy allows for
maximized memory savings. The potential downside is more camera pipeline
jank when buffer requests take an unusually long time to finish.</li>
<li><strong>Cached:</strong> The camera HAL caches a few buffers so that it&#39;s less likely to
be affected by an occasional slow buffer request.</li>
</ul>

<p>The camera HAL can adopt different strategies for particular use cases, for
example, using the maximized memory saving strategy for use cases that use a lot
of memory and using the backward-compatible strategy for other use cases.</p>

<h2 id="sample_implementation_in_the_external_camera_hal">Sample implementation in the external camera HAL</h2>

<p>The external camera HAL was introduced in Android 9 and can be found in the
source tree at
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/" class="external"><code translate="no" dir="ltr">hardware/interfaces/camera/device/3.5/</code></a>.
In Android 10, it has been updated to include
<a href="https://android.googlesource.com/platform/hardware/interfaces/+/refs/heads/master/camera/device/3.5/default/ExternalCameraDeviceSession.cpp" class="external"><code translate="no" dir="ltr">ExternalCameraDeviceSession.cpp</code></a>,
an implementation of the buffer management API. This external camera HAL
implements the maximized memory savings strategy mentioned in <a href="#different_buffer_management_strategies">Buffer management
strategies</a> in a few hundred lines of
C++ code.</p>

          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="../../setup/build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
                      
<div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../setup/community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
    <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>

  </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar                   ></devsite-snackbar>    <devsite-tooltip blocked-link></devsite-tooltip>
    <devsite-analytics>
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
        <script>
    (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/js/app_loader.js', '[7,"en",null,"../../js/devsite_app.html","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource","https://androidsource-dot-google-developers.gonglchuangl.net/",null,null,["/_pwa/androidsource/manifest.json","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"]]')
  </script>  </body>

<!-- Mirrored from source.android.google.cn/devices/camera/buffer-management-api by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:57:56 GMT -->
</html>