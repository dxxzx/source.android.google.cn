<!doctype html>
<html       lang="en"      dir="ltr">
  
<!-- Mirrored from source.android.google.cn/setup/build by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:17:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta property="og:site_name" content="Android Open Source Project">
    <meta property="og:type" content="website">
    
          <meta name="theme-color" content="#78c257">
    
    <meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="../_pwa/androidsource/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="http://www.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.gstatic.com/" crossorigin>
    <link rel="preconnect" href="http://fonts.googleapis.com/" crossorigin>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons">
        <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/rebrand-app.css">
    <noscript>
      <link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/css/ce_bundle.css">
    </noscript>
    <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/touchicon-180.png"><link rel="canonical" href="build.html">      
<title>Soong Build System &nbsp;|&nbsp; Android Open Source Project</title>

<meta property="og:title" content="Soong Build System &nbsp;|&nbsp; Android Open Source Project">


  <meta property="og:url" content="build.html">

  <meta property="og:locale" content="en">





  

  

    </head>
  <body type="article"
        theme="androidsource-theme"
        class=""
        
        layout="docs"
        block-apix        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
    <div class="devsite-wrapper"><devsite-header keep-tabs-visible>
      









<div class="devsite-header--inner">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Close menu">
        </button>
        <div class="devsite-product-name-wrapper">
  <a href="../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.cn/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
            <span class="devsite-product-name">
            <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
          </span>
        
</div>        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
                          <devsite-tabs class="upper-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab active>
          <a href="../setup.html"
   class="gc-analytics-event"
   title="Set up"
   aria-label="Set up, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Set up"
   >
  Set up
</a>

        </tab>
                        <tab >
          <a href="../compatibility.html"
   class="gc-analytics-event"
   title="Design"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Design"
   >
  Design
</a>

        </tab>
                        <tab >
          <a href="../security.html"
   class="gc-analytics-event"
   title="Secure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Secure"
   >
  Secure
</a>

        </tab>
                        <tab >
          <a href="../devices.html"
   class="gc-analytics-event"
   title="Develop"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Develop"
   >
  Develop
</a>

        </tab>
                        <tab >
          <a href="../devices/tech.html"
   class="gc-analytics-event"
   title="Configure"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Configure"
   >
  Configure
</a>

        </tab>
                        <tab >
          <a href="../reference.html"
   class="gc-analytics-event"
   title="Reference"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Reference"
   >
  Reference
</a>

        </tab>
            </div>
</devsite-tabs>

                       </div>
          <devsite-search
            enable-suggestions
              family-name="Android Open Source Project"    tenant-name="Android Open Source Project"            >
  <form class="devsite-search-form" action="https://source.android.google.cn/s/results" method="GET">
    <div class="devsite-search-container">
      <div class="devsite-searchbox">
                <input placeholder="Search"
          type="text"
          class="devsite-search-field devsite-search-query"
          name="q"
          value=""
          autocomplete="off"
                    aria-label="Search box">
        <div class="devsite-search-image material-icons" aria-hidden="true"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              aria-label="Open search box"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          aria-label="Close search box"></button>
</devsite-search>

        </div>

        <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>


                  <a class="devsite-header-link devsite-top-button button gc-analytics-event"
   href="http://android-review.googlesource.com/"
   data-category="Site-Wide Custom Events"
   data-label="Site header link">
  Go to code
</a>
        
              </div>    </div>  </div>
  <div class="devsite-collapsible-section
    ">
    <div class="devsite-header-background">
                        <div class="devsite-product-id-row">
            <div class="devsite-product-description-row">
                              <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../setup.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Lower Header"
              data-value="1"
          >
            Set up
      
  </a>
        </li>
  </ul>
                                        </div>
                                                                                    </div>
                                      <div class="devsite-doc-set-nav-row">
                              <devsite-tabs class="lower-tabs">
  <div class="devsite-tabs-wrapper">
                  <tab >
          <a href="../setup.html"
   class="gc-analytics-event"
   title="Overview"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Overview"
   >
  Overview
</a>

        </tab>
                        <tab >
          <a href="build/requirements.html"
   class="gc-analytics-event"
   title="Start"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Start"
   >
  Start
</a>

        </tab>
                        <tab >
          <a href="develop.html"
   class="gc-analytics-event"
   title="Download"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Download"
   >
  Download
</a>

        </tab>
                        <tab active>
          <a href="build.html"
   class="gc-analytics-event"
   title="Build"
   aria-label="Build, selected"         data-category="Site-Wide Custom Events"
        data-label="Tab: Build"
   >
  Build
</a>

        </tab>
                        <tab >
          <a href="create/coding-tasks.html"
   class="gc-analytics-event"
   title="Create"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Create"
   >
  Create
</a>

        </tab>
                        <tab >
          <a href="contribute.html"
   class="gc-analytics-event"
   title="Contribute"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Contribute"
   >
  Contribute
</a>

        </tab>
                        <tab >
          <a href="community.html"
   class="gc-analytics-event"
   title="Contact"
           data-category="Site-Wide Custom Events"
        data-label="Tab: Contact"
   >
  Contact
</a>

        </tab>
            </div>
</devsite-tabs>

        </div>
          </div>  </div></div>
  

  </devsite-header>      <devsite-book-nav scrollbars >
                  




<nav class="devsite-book-nav devsite-nav nocontent">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">
  <a href="../index.html" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo">
  <img src="https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg" class="devsite-site-logo" alt="Android Open Source Project">
</a>
        <span class="devsite-product-name">
        <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                              </li>
  </ul>
      </span>
    
</div>  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
              <ul class="devsite-nav-list">
                      <li class="devsite-nav-item">
                                <a href="../setup.html"
          class="devsite-nav-title gc-analytics-event
            devsite-nav-active"
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Set up">
      <span class="devsite-nav-text" >Set up</span>
        </a>
  
                                            <ul class="devsite-nav-responsive-tabs">
                                                                                                                      <li class="devsite-nav-item">
    <a href="../setup.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Overview">
      <span class="devsite-nav-text" >Overview</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="build/requirements.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Start">
      <span class="devsite-nav-text" >Start</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="develop.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Download">
      <span class="devsite-nav-text" >Download</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="build.html"
     id="devsite-nav-forward"     class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Build">
      <span class="devsite-nav-text" menu="_book">Build</span>
        <span class="devsite-nav-icon material-icons" data-icon="forward" aria-hidden="true"
          menu="_book">
    </span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="create/coding-tasks.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Create">
      <span class="devsite-nav-text" >Create</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="contribute.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Contribute">
      <span class="devsite-nav-text" >Contribute</span>
        </a>
  </li>

                                                                                                                      <li class="devsite-nav-item">
    <a href="community.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Contact">
      <span class="devsite-nav-text" >Contact</span>
        </a>
  </li>

                                  </ul>
                          </li>
                      <li class="devsite-nav-item">
                                <a href="../compatibility.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Design">
      <span class="devsite-nav-text" >Design</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../security.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Secure">
      <span class="devsite-nav-text" >Secure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../devices.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Develop">
      <span class="devsite-nav-text" >Develop</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../devices/tech.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Configure">
      <span class="devsite-nav-text" >Configure</span>
        </a>
  
                                        </li>
                      <li class="devsite-nav-item">
                                <a href="../reference.html"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Reference">
      <span class="devsite-nav-text" >Reference</span>
        </a>
  
                                        </li>
                                <li class="devsite-nav-item">
    <a href="http://android-review.googlesource.com/"
          class="devsite-nav-title gc-analytics-event
            "
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Go to code">
      <span class="devsite-nav-text" >Go to code</span>
        </a>
  </li>

                  </ul>
          </div>
          <div class="devsite-mobile-nav-bottom">
                            <ul class="devsite-nav-list" menu="_book">
            <li class="devsite-nav-item"><a href="build.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Build System">Build System</span></a></li>
  <li class="devsite-nav-item"><a href="build/building.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Building">Building</span></a></li>
  <li class="devsite-nav-item"><a href="build/running.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Flash Devices">Flash Devices</span></a></li>
  <li class="devsite-nav-item"><a href="build/building-kernels.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Build Kernels">Build Kernels</span></a></li>
  <li class="devsite-nav-item"><a href="build/building-kernels-deprecated.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="Build Kernels (deprecated)">Build Kernels (deprecated)</span></a></li>
  <li class="devsite-nav-item"><a href="build/known-issues.html"
     class="devsite-nav-title"
   ><span class="devsite-nav-text" title="See Known Issues">See Known Issues</span></a></li>
          </ul>
                                                                                                                                                                            </div>
      </div>
</nav>
              </devsite-book-nav>
      <div id="gc-wrapper">
        <div class="devsite-main-content"
            has-book-nav            has-toc>
          <devsite-toc class="devsite-nav"
            ></devsite-toc>
          <devsite-content>
                          

<article class="devsite-article">
  <article class="devsite-article-inner">        
    <div class="devsite-article-meta">
      <ul class="devsite-breadcrumb-list">
    <li class="devsite-breadcrumb-item
             ">
                    <a href="../index.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="1"
          >
            AOSP
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="../setup.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="2"
          >
            Set up
      
  </a>
        </li>
    <li class="devsite-breadcrumb-item
             ">
                <div class="devsite-breadcrumb-guillemet material-icons" aria-hidden="true"></div>
                    <a href="build.html"              class="devsite-breadcrumb-link gc-analytics-event"
              data-category="Site-Wide Custom Events"
              data-label="Breadcrumbs"
              data-value="3"
          >
            Build
      
  </a>
        </li>
  </ul>
               <devsite-page-rating position="header" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
          </div>

              <h1 class="devsite-page-title">Soong Build System</h1>
    
    <devsite-toc class="devsite-nav" devsite-toc-embedded >
    </devsite-toc>

    <div class="devsite-article-body clearfix
      ">

              





























<!--
  Copyright 2019 The Android Open Source Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->



<p>Before the Android 7.0 release, Android used
<a href="https://www.gnu.org/software/make/" class="external">GNU Make</a> 
exclusively to describe and execute its build rules. The Make build system is
widely supported and used, but at Android&#39;s scale became slow, error-prone,
unscalable, and difficult to test. The
<a href="https://android.googlesource.com/platform/build/soong/+/refs/heads/master/README.md" class="external">Soong build system</a> 
provides the flexibility required for Android builds.</p>

<h2 id="what_is_soong">What is Soong?</h2>

<p>The
<a href="https://android.googlesource.com/platform/build/soong/+/refs/heads/master/README.md" class="external">Soong build system</a> 
was introduced in Android 7.0 (Nougat) to replace Make. This is still a work in
progress.</p>

<p>See the
<a href="https://android.googlesource.com/platform/build/+/master/README.md" class="external">Android Make Build System</a> 
description in the Android Open Source Project (AOSP) for general
<a href="https://android.googlesource.com/platform/build/+/master/Usage.txt" class="external">instructions</a> 
and
<a href="https://android.googlesource.com/platform/build/+/master/Changes.md" class="external">build system changes for Android.mk writers</a> 
to learn of modifications needed to adapt from Make to Soong.</p>

<p>See
<a href="../compatibility/tests/development/blueprints.html">Simple Build Configuration</a>
for example Soong configuration (Blueprint or <code translate="no" dir="ltr">.bp</code>) files and the
<a href="https://ci.android.com/builds/latest/branches/aosp-build-tools/targets/linux/view/soong_build.html" class="external">Soong reference files</a> for complete details.</p>
<aside class="caution"><strong>Caution:</strong><span> Until Android fully converts from Make to Soong, the Make product
configuration must specify <code translate="no" dir="ltr">PRODUCT_SOONG_NAMESPACES</code> value. See the
<a href="#namespace_modules">Namespace modules</a> section for instructions.</span></aside>
<h2 id="androidbp_file_format">Android.bp file format</h2>

<p>By design, <code translate="no" dir="ltr">Android.bp</code> files are simple. They contain no conditionals nor
control flow statements - all complexity is handled by build logic written in
Go. The syntax and semantics of <code translate="no" dir="ltr">Android.bp</code> files are similar to
<a href="https://www.bazel.io/versions/master/docs/be/overview.html" class="external">Bazel BUILD files</a> 
when possible.</p>

<h3 id="modules">Modules</h3>

<p>A module in an <code translate="no" dir="ltr">Android.bp</code> file starts with a
<a href="https://ci.android.com/builds/latest/branches/aosp-build-tools/targets/linux/view/soong_build.html" class="external">module type</a> 
followed by a set of properties in <code translate="no" dir="ltr">name: value,</code> format:</p>
<pre class="prettyprint" translate="no" dir="ltr"><code translate="no" dir="ltr">cc_binary {
    name: &#34;gzip&#34;,
    srcs: [&#34;src/test/minigzip.c&#34;],
    shared_libs: [&#34;libz&#34;],
    stl: &#34;none&#34;,
}
</code></pre>
<p>Every module must have a <code translate="no" dir="ltr">name</code> property, and the value must be unique across
all <code translate="no" dir="ltr">Android.bp</code> files, with the only two exceptions being the ones in
namespaces and prebuilt modules.</p>

<p>For a list of valid module types and their properties, see the
<a href="https://ci.android.com/builds/latest/branches/aosp-build-tools/targets/linux/view/soong_build.html" class="external">Soong Modules Reference</a>.</p>

<h3 id="types">Types</h3>

<p>Variables and properties are strongly typed, with variables dynamically based on
the first assignment, and properties set statically by the module type. The
supported types are:</p>

<ul>
<li>Bool (<code translate="no" dir="ltr">true</code> or <code translate="no" dir="ltr">false</code>)</li>
<li>Integers (<code translate="no" dir="ltr">int</code>)</li>
<li>Strings (<code translate="no" dir="ltr">&quot;string&quot;</code>)</li>
<li>Lists of strings (<code translate="no" dir="ltr">[&quot;string1&quot;, &quot;string2&quot;]</code>)</li>
<li>Maps (<code translate="no" dir="ltr">{key1: &quot;value1&quot;, key2: [&quot;value2&quot;]}</code>)</li>
</ul>

<p>Maps may contain values of any type, including nested maps. Lists and maps may
have trailing commas after the last value.</p>

<h3 id="globs">Globs</h3>

<p>Properties that take a list of files, such as <code translate="no" dir="ltr">srcs</code>, can also take glob
patterns. Glob patterns can contain the normal UNIX wildcard <code translate="no" dir="ltr">*</code>, for example
<code translate="no" dir="ltr">*.java</code>. glob patterns can also contain a single <code translate="no" dir="ltr">**</code> wildcard as a path
element, which matches zero or more path elements. For example,
<code translate="no" dir="ltr">java/**/*.java</code> matches both:
<code translate="no" dir="ltr">java/Main.java</code>
<code translate="no" dir="ltr">java/com/android/Main.java</code></p>

<h3 id="variables">Variables</h3>

<p>An <code translate="no" dir="ltr">Android.bp</code> file may contain top-level variable assignments:</p>
<pre class="prettyprint" translate="no" dir="ltr"><code translate="no" dir="ltr">gzip_srcs = [&#34;src/test/minigzip.c&#34;],
cc_binary {
    name: &#34;gzip&#34;,
    srcs: gzip_srcs,
    shared_libs: [&#34;libz&#34;],
    stl: &#34;none&#34;,
}
</code></pre>
<p>Variables are scoped to the remainder of the file they are declared in, as well
as any child Blueprint files. Variables are immutable with one exception - they
can be appended to with a += assignment, but only before they have been
referenced.</p>

<h3 id="comments">Comments</h3>

<p><code translate="no" dir="ltr">Android.bp</code> files can contain C-style multiline<code translate="no" dir="ltr">/* */</code> and C++ style
single-line <code translate="no" dir="ltr">//</code> comments.</p>

<h3 id="operators">Operators</h3>

<p>Strings, lists of strings, and maps can be appended using the + operator.
Integers can be summed up using the + operator. Appending a map produces the
union of keys in both maps, appending the values of any keys that are present in
both maps.</p>

<h3 id="conditionals">Conditionals</h3>

<p>Soong doesn&#39;t support conditionals in <code translate="no" dir="ltr">Android.bp</code> files. Instead,
complexity in build rules that would require conditionals are handled in Go,
where high-level language features can be used, and implicit dependencies
introduced by conditionals can be tracked. Most conditionals are converted to a
map property, where one of the values in the map is selected and appended
to the top-level properties.</p>

<p>For example, to support architecture-specific files:</p>
<pre class="prettyprint" translate="no" dir="ltr"><code translate="no" dir="ltr">cc_library {
    ...
    srcs: [&#34;generic.cpp&#34;],
    arch: {
        arm: {
            srcs: [&#34;arm.cpp&#34;],
        },
        x86: {
            srcs: [&#34;x86.cpp&#34;],
        },
    },
}
</code></pre>
<h3 id="formatter">Formatter</h3>

<p>Soong includes a canonical formatter for Blueprint files, similar to
<a href="https://golang.org/cmd/gofmt/" class="external">gofmt</a>. To recursively reformat all
<code translate="no" dir="ltr">Android.bp</code> files in the current directory, run:</p>
<pre class="prettyprint" translate="no" dir="ltr"><code translate="no" dir="ltr">bpfmt -w .
</code></pre>
<p>The canonical format includes four-space indents, newlines after every element
of a multi-element list, and a trailing comma in lists and maps.</p>

<h2 id="special_modules">Special Modules</h2>

<p>Some special module groups have unique characteristics.</p>

<h3 id="defaults_modules">Defaults modules</h3>

<p>A defaults module can be used to repeat the same properties in multiple modules.
For example:</p>
<pre class="prettyprint" translate="no" dir="ltr"><code translate="no" dir="ltr">cc_defaults {
    name: &#34;gzip_defaults&#34;,
    shared_libs: [&#34;libz&#34;],
    stl: &#34;none&#34;,
}

cc_binary {
    name: &#34;gzip&#34;,
    defaults: [&#34;gzip_defaults&#34;],
    srcs: [&#34;src/test/minigzip.c&#34;],
}
</code></pre>
<h3 id="prebuilt_modules">Prebuilt modules</h3>

<p>Some prebuilt module types allow a module to have the same name as its
source-based counterparts. For example, there can be a <code translate="no" dir="ltr">cc_prebuilt_binary</code>
named &#39;foo&#39; when there is already a <code translate="no" dir="ltr">cc_binary</code> with the same name. This gives
developers the flexibility to choose which version to include in their final
product. If a build configuration contains both versions, the <code translate="no" dir="ltr">prefer</code> flag
value in the prebuilt module definition dictates which version has priority.
Note that some prebuilt modules have names that don&#39;t start with <code translate="no" dir="ltr">prebuilt</code>,
such as <code translate="no" dir="ltr">android_app_import</code>.</p>

<h3 id="namespace_modules">Namespace modules</h3>

<p>Until Android fully converts from Make to Soong, the Make product configuration
must specify a <code translate="no" dir="ltr">PRODUCT_SOONG_NAMESPACES</code> value. Its
value should be a space-separated list of namespaces that Soong exports to Make
to be built by the <code translate="no" dir="ltr">m</code> command. After Android&#39;s conversion to Soong is complete,
the details of enabling namespaces could change.</p>

<p>Soong provides the ability for modules in different directories to specify the
same name, as long as each module is declared within a separate namespace. A
namespace can be declared like this:</p>
<pre class="prettyprint" translate="no" dir="ltr"><code translate="no" dir="ltr">soong_namespace {
    imports: [&#34;path/to/otherNamespace1&#34;, &#34;path/to/otherNamespace2&#34;],
}
</code></pre>
<p>Note that a namespace does not have a name property; its path is automatically
assigned as its name.</p>

<p>Each Soong module is assigned a namespace based on its location in the tree.
Each Soong module is considered to be in the namespace defined by the
<code translate="no" dir="ltr">soong_namespace</code> found in an <code translate="no" dir="ltr">Android.bp</code> file in the current directory or
closest ancestor directory. If no such <code translate="no" dir="ltr">soong_namespace</code> module is found, the
module is considered to be in the implicit root namespace.</p>

<p>Here is an example: Soong attempts to resolve dependency D declared by module M
in namespace N that imports namespaces I1, I2, I3…</p>

<ol>
<li>Then if D is a fully-qualified name of the form <code translate="no" dir="ltr">//namespace:module</code>, only
the specified namespace will be searched for the specified module name.</li>
<li>Otherwise, Soong will first look for a module named D declared in namespace
N.</li>
<li>If that module does not exist, Soong will look for a module named D in
namespaces I1, I2, I3…</li>
<li>Lastly, Soong will look in the root namespace.</li>
</ol>

          </div>

    
                   <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0">
         </devsite-page-rating>
                   
          </article>
</article>

<devsite-content-footer class="nocontent">
  <p>Content and code samples on this page are subject to the licenses described in the <a href="../license.html">Content License</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
</devsite-content-footer>


                      </devsite-content>
        </div>
        <devsite-footer-promos class="devsite-footer">
                      
                  </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
                      <nav class="devsite-footer-linkboxes nocontent">
  <ul class="devsite-footer-linkboxes-list">
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Build</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.googlesource.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android repository
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="build/requirements.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Requirements
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="build/downloading.html"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Downloading
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/blobs-preview/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Preview binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/images/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Factory images
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://developers.google.com/android/drivers/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Driver binaries
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://android.github.io/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            GitHub
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Connect</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/Android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            @Android on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://twitter.com/AndroidDev/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            @AndroidDev on Twitter
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://blog.google/products/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Android Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://security.googleblog.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            Google Security Blog
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-platform/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Platform on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-building/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Building on Google Groups
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://groups.google.com/forum/?fromgroups#!forum/android-porting/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Porting on Google Groups
          </a>
        </li>
              </ul>
    </li>
        <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading">Get help</h3>      <ul class="devsite-footer-linkbox-list">
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/android/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 1)"           >
            Android Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/pixelphone/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 2)"           >
            Pixel Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://support.google.com/nexus/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 3)"           >
            Nexus Help Center
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 4)"           >
            www.android.com
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://www.android.com/gms/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 5)"           >
            Google Mobile Services
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://stackoverflow.com/questions/tagged/android-source/"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 6)"           >
            Stack Overflow
          </a>
        </li>
                <li class="devsite-footer-linkbox-item">
          <a href="http://issuetracker.google.com/issues?q=status:open%20componentid:190923"
             class="devsite-footer-linkbox-link
                    gc-analytics-event"
             data-category="Site-Wide Custom Events"
                        data-label="Footer Link (index 7)"           >
            Issue Tracker
          </a>
        </li>
              </ul>
    </li>
      </ul>
</nav>
                  </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
                      
<div class="devsite-footer-utility">
  
  <nav class="devsite-nav">
        <ul class="devsite-footer-utility-list">
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../source/index.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer About Android link">
          About Android
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="community.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Community link">
          Community
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../legal.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer Legal link">
          Legal
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="../license.html"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link">
          License
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://policies.google.cn/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link">
          Privacy
        </a>
              </li>
            <li class="devsite-footer-utility-item
                 ">
                        <a class="devsite-footer-utility-link
                  gc-analytics-event"
           href="http://issuetracker.google.com/issues/new?component=191476"
           data-category="Site-Wide Custom Events"
           data-label="Footer Site feedback link">
          Site feedback
        </a>
              </li>
          </ul>
    
    <devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    <select class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
                <option>Language</option>
              <option value="en"
              track-metadata-original-language="en"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
          <option value="zh_cn"
              track-metadata-original-language="en"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
        </select>
  </devsite-select>
</devsite-language-selector>

  </nav>
</div>
                  </devsite-footer-utility>
      </div></div>
    <devsite-sitemask></devsite-sitemask>
    <devsite-snackbar                   ></devsite-snackbar>    <devsite-tooltip blocked-link></devsite-tooltip>
    <devsite-analytics>
              <script type="application/json" analytics>[{"metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}, "dimensions": {}, "gaid": "UA-45455297-4"}]</script>
<script type="application/json" gtm>[]</script>
          </devsite-analytics>
        <script>
    (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/js/app_loader.js', '[7,"en",null,"../js/devsite_app.html","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource","https://androidsource-dot-google-developers.gonglchuangl.net/",1,null,["/_pwa/androidsource/manifest.json","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/favicon.png","https://www.gstatic.com/devrel-devsite/vbb62cc5a3e8f17e37bae4792b437f28f787df3f9cf9732cbfcc99b4f4ff41a54/androidsource/images/rebrand/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700|Material+Icons"]]')
  </script>  </body>

<!-- Mirrored from source.android.google.cn/setup/build by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Sep 2019 14:17:28 GMT -->
</html>